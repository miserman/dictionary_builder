(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{69:function(e,t,n){Promise.resolve().then(n.bind(n,8270))},8270:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tr}});var r=n(7437),s=n(8595),i=n(3948),l=n(3857),a=n(2265);let o=(0,a.createContext)({});function c(e){let{loadingTerms:t,loadingTermAssociations:n,loadingSenseKeys:s,loadingSynsetInfo:i,children:l}=e,[c,d]=(0,a.useState)(),[x,h]=(0,a.useState)(),[u,m]=(0,a.useState)(),[p,j]=(0,a.useState)(),[g,f]=(0,a.useState)(),[y,Z]=(0,a.useState)();return(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/terms.txt").then(e=>e.text()).then(e=>{let t=Object.freeze(e.split("\n"));d(t);let n={},r={all:t},s="";t.forEach((e,t)=>{n[e]=t,(s=e[0])in r?r[s].push(e):r[s]=[e]}),h(Object.freeze(n));let i={};Object.keys(r).forEach(e=>i[e]=";;"+r[e].join(";;")+";;"),m(Object.freeze(i))}).finally(()=>t(!1))},[t]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/term_associations.json").then(e=>e.json()).then(e=>{j(e)}).finally(()=>n(!1))},[n]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/sense_keys.txt").then(e=>e.text()).then(e=>{f(Object.freeze(e.split("\n")))}).finally(()=>s(!1))},[s]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/synset_info.json").then(e=>e.json()).then(e=>{Z(e.map((e,t)=>(e.index=t,e)))}).finally(()=>i(!1))},[i]),(0,r.jsx)(o.Provider,{value:{terms:c,termLookup:x,collapsedTerms:u,termAssociations:p,sense_keys:g,synsetInfo:y},children:l})}let d=/\*/,x=/\*/g,h=/([\[\]\(\)*?^$.+])/g,u=/^;|;$/g,m=/([\[\]\(\)?^$.+])/g;function p(e){return";"+e.replace(m,"\\$&").replace(x,"[^;]*")+";"}function j(e,t){return e.length-t.length}function g(e,t){return t&&-1!==e?((1-e/t)*100).toFixed(2):"0"}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,s=t[e.source[1]in t?e.source[1]:"all"];for(let t,i="";n.length<r&&(t=e.exec(s));)(i=t[0].replace(u,""))&&n.push(i)}let y=/\./g;function Z(e){return";"+e.replace(y,"[^;]")+";"}let v=/^.*[/\\]/;function C(e){return e.replace(v,"")}var b=n(8457),w=n(4262),S=n(2653),k=n(4111),_=n(5133),E=n(6114),O=n(3226),P=n(8469),N=n(3457),A=n(8956),z=n(9050);function F(){return JSON.parse(localStorage.getItem("dictionary_builder_settings")||"{}")}function T(){let[e,t]=(0,a.useState)(!1),n=()=>t(!e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{onClick:n,children:(0,r.jsx)(b.Z,{})}),(0,r.jsx)(k.ZP,{anchor:"right",open:e,onClose:n,children:(0,r.jsxs)(_.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,r.jsx)(E.Z,{title:(0,r.jsx)(O.Z,{children:"Settings"}),action:(0,r.jsx)(S.Z,{onClick:n,children:(0,r.jsx)(w.Z,{})})}),(0,r.jsx)(P.Z,{sx:{alignContent:"left",mb:"auto"},children:(0,r.jsx)(N.Z,{spacing:3})}),(0,r.jsx)(A.Z,{children:(0,r.jsx)(z.Z,{fullWidth:!0,color:"error",onClick:()=>{let e=F();e.dictionary_names&&e.dictionary_names.forEach(e=>{localStorage.removeItem("dict_"+e),localStorage.removeItem("dict_history_"+e)}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()},children:"Clear Storage"})})]})})]})}let I=(0,a.createContext)("default"),R=(0,a.createContext)(e=>{}),D=(0,a.createContext)({}),M=(0,a.createContext)(e=>{}),W=(0,a.createContext)({}),J=(0,a.createContext)(e=>{}),K=(0,a.createContext)([]),$=(0,a.createContext)(e=>{}),H=(0,a.createContext)([]),Y=(0,a.createContext)(e=>{}),q=(0,a.createContext)(0),L=(0,a.createContext)(e=>{}),B=(0,a.createContext)({}),U=(e,t)=>{let{terms:n,termLookup:r,termAssociations:s,synsetInfo:i}=t,l={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&r&&r[e]||-1,related:[],synsets:[]};if(s&&i&&n&&-1!==l.index){l.recognized=!0;let e=s[l.index];l.related=e&&e[0]?(Array.isArray(e[0])?e[0]:[e[0]]).map(e=>n[e-1]):[],l.synsets=e&&e[1]?(Array.isArray(e[1])?e[1]:[e[1]]).map(e=>i[e-1]):[]}return l},V=(e,t)=>{let n="string"==typeof e;if(n&&!d.test(e))return U(e,t);{let r=n?p(e):e.source,s={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:RegExp(n?r:Z(r),"g"),matches:[]};return t.collapsedTerms&&f(s.regex,t.collapsedTerms,s.matches),s.recognized=!!s.matches.length,s}};function X(e){let{children:t}=e,n=(0,a.useContext)(o),s=(0,a.useMemo)(()=>({}),[]),i=(0,a.useMemo)(F,[]),l=(0,a.useMemo)(()=>{let e={default:{}};return(i.dictionary_names||[]).forEach(t=>{e[t]=JSON.parse(localStorage.getItem("dict_"+t)||"{}")}),e},[i]),[c,d]=(0,a.useState)(i.selected||"default"),x=()=>JSON.parse(localStorage.getItem("dict_history_"+c)||"[]"),[h,u]=(0,a.useState)(0),m=e=>{if("replace"===e.type)return j(e.history),e.history;let t="clear"===e.type?[]:[...p];"remove"===e.type?t.pop():"clear"!==e.type&&(h&&t.splice(0,h),e.entry.time=Date.now(),t.push(e.entry)),t.length>1e3&&t.splice(1e3,t.length),localStorage.setItem("dict_history_"+c,JSON.stringify(t)),j(t)},[p,j]=(0,a.useState)([]),g=e=>{"delete"===e.type?(delete l[e.name],localStorage.removeItem("dict_"+e.name),localStorage.removeItem("dict_history_"+e.name),"default"===e.name&&(l.default={}),c===e.name&&(Z("default"),C({type:"change_dict",dict:l.default}))):("set"!==e.type&&(l[e.name]=e.dict),c&&localStorage.setItem("dict_"+e.name,JSON.stringify(l[c])),"save"!==e.type&&(Z(e.name),C({type:"change_dict",dict:l[e.name]})),localStorage.setItem("dict_"+e.name,JSON.stringify(l[e.name]))),i.dictionary_names=Object.keys(l),localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[f,y]=(0,a.useReducer)((e,t)=>{switch(t.type){case"collect":let n=new Set(t.reset?[]:e);return Object.keys(t.dictionary).forEach(e=>{let{categories:r}=t.dictionary[e];Object.keys(r).forEach(e=>n.add(e))}),Array.from(n).sort();case"add":return e.includes(t.cat)?[...e]:[...e,t.cat].sort();default:return e.filter(e=>e!==t.cat)}},[]),Z=e=>{let t=e in l?e:"default";d(t),i.selected=t,localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[v,C]=(0,a.useReducer)((e,t)=>{if("change_dict"===t.type)return m({type:"replace",history:x()}),y({type:"collect",dictionary:t.dict,reset:!0}),t.dict;let r={...e};if("remove_category"===t.type){let e={},n=0;Object.keys(r).forEach(s=>{let i=r[s];t.name in i.categories&&i.categories[t.name]&&(n++,e[s]=i.categories[t.name],delete i.categories[t.name])}),n&&m({type:"add",entry:{type:"remove_category",name:t.name,value:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in r&&(r[e].categories[t.name]=t.weights[e])}),m({type:"add",entry:{type:"add_category",name:t.name,value:t.weights}});else{let i="string"==typeof t.term?t.term:t.term.source;if("remove"===t.type)delete r[i],m({type:"add",entry:{type:"remove_term",name:i,value:e[i]}});else{let l=s[i];if(l&&t.term_type===l.term_type||(s[i]=V(t.term,n)),!t.sense){let e=s[i];"fixed"===e.type&&1===e.synsets.length&&n.sense_keys&&(t.sense=n.sense_keys[e.synsets[0].index])}let a=r[i]||{};if(r[i]={added:a.added||Date.now(),type:a.type||l&&l.term_type||"fixed",categories:t.categories||a.categories||{},sense:t.sense||a.sense||""},"replace"===t.type){let n="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete r[n],m({type:"add",entry:{type:"replace_term",name:i,value:e[i],original:e[n]}})}else i in r?m({type:"add",entry:{type:"edit_term",name:i,value:e[i],original:e[i]}}):m({type:"add",entry:{type:"add_term",name:i,value:e[i]}})}y({type:"collect",dictionary:r})}return g({type:"save",name:c,dict:r}),r},l.default);return(0,a.useEffect)(()=>{i.selected&&i.selected in l||(i.selected="default"),C({type:"change_dict",dict:l[i.selected]})},[i,l]),(0,r.jsx)(q.Provider,{value:h,children:(0,r.jsx)(L.Provider,{value:u,children:(0,r.jsx)(H.Provider,{value:p,children:(0,r.jsx)(Y.Provider,{value:m,children:(0,r.jsx)(D.Provider,{value:l,children:(0,r.jsx)(M.Provider,{value:g,children:(0,r.jsx)(I.Provider,{value:c,children:(0,r.jsx)(W.Provider,{value:v,children:(0,r.jsx)(K.Provider,{value:f,children:(0,r.jsx)(R.Provider,{value:e=>{Z(e)},children:(0,r.jsx)(J.Provider,{value:C,children:(0,r.jsx)($.Provider,{value:y,children:(0,r.jsx)(B.Provider,{value:s,children:t})})})})})})})})})})})})})}var G=n(8639),Q=n(4309),ee=n(8276),et=n(1975),en=n(9245),er=n(5795),es=n(3701),ei=n(6988),el=n(4147),ea=n(666),eo=n(9279),ec=n(7449),ed=n(5266),ex=n(9299),eh=n(5210);function eu(e){let{senseKey:t,info:n}=e,s=(0,a.useContext)(ek);return(0,r.jsx)(ee.Z,{title:n.definition,placement:"right",children:(0,r.jsx)(eh.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>s({type:"add",state:{type:"synset",value:t,info:n}}),children:t})})}function em(e){let{name:t,info:n}=e,s=n[t],{terms:i,sense_keys:l,synsetInfo:c}=(0,a.useContext)(o);return i&&l&&c?(0,r.jsxs)(en.Z,{sx:{m:1},children:[(0,r.jsx)(O.Z,{variant:"h5",children:t}),(0,r.jsx)(O.Z,{children:"string"==typeof s?s:"members"===t?i?Array.isArray(s)?s.map(e=>(0,r.jsx)(ew,{term:i[e-1]},e)):(0,r.jsx)(ew,{term:i[s-1]},s):(0,r.jsx)(r.Fragment,{}):Array.isArray(s)?s.map(e=>{let t=c[e-1];return(0,r.jsx)(eu,{senseKey:l[e-1],info:t},e)}):(0,r.jsx)(eu,{senseKey:l[s-1],info:c[s-1]})})]},t):(0,r.jsx)(r.Fragment,{})}let ep={id:0,index:0,ili:0,definition:0,topic:0},ej={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function eg(e){let{info:t}=e,{sense_keys:n}=(0,a.useContext)(o);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{variant:"h6",children:t.definition}),(0,r.jsxs)(N.Z,{direction:"row",spacing:2,children:[(0,r.jsxs)(en.Z,{children:[(0,r.jsxs)(O.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID: ",(0,r.jsx)("span",{className:"number",children:t.id})]}),(0,r.jsxs)(O.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Sense Key: ",(0,r.jsx)("span",{className:"number",children:n&&n[t.index]})]}),(0,r.jsxs)(O.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,r.jsx)("span",{className:"number",children:t.ili})]})]}),(0,r.jsxs)(en.Z,{children:[(0,r.jsxs)(O.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,r.jsx)("span",{className:"number",children:ej[t.id.substring(t.id.length-1)]})]}),(0,r.jsxs)(O.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,r.jsx)("span",{className:"number",children:t.topic})]})]})]}),(0,r.jsx)(N.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in ep)).map(e=>(0,r.jsx)(em,{name:e,info:t},e))})]})}let ef=/[aeiouy]$/;function ey(e,t){let n;let r=new Set;e=e.replace(h,"\\$&");try{n=RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?(?:"+e+(e.length>(ef.test(e)?3:2)?"|"+e.replace(ef,"[aeiouy]"):"")+"|"+e+e.substring(e.length-1)+")-?(?:'|ac|age|al|alize|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|nce|ness|or|ous|r|s|ship|st|th|ties|ty|ur|ward|wise|y|z)?(?:'|ate|ation|d|ed|er|es|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?\\;","g")}catch(e){}if(n){let s=t[e[0]in t?e[0]:"all"];for(let t;t=n.exec(s);)t[0]&&";"+e+";"!==t[0]&&r.add(t[0].replace(u,""))}return Array.from(r)}var eZ=n(9152);function ev(e){let{id:t,field:n,processed:s,label:i}=e,l=(0,a.useContext)(W),c=(0,a.useContext)(J),d=(0,eZ.l)(),x=l[s.term].sense,{sense_keys:h}=(0,a.useContext)(o);return"fixed"===s.type&&s.synsets.length?(0,r.jsx)(G.Z,{fullWidth:!0,"aria-label":"assign synset",value:x,onChange:e=>{d.current.setEditCellValue({id:t,field:n,value:e.target.value}),c({type:"update",term:s.term,term_type:s.term_type,sense:e.target.value})},label:i,children:h&&s.synsets.map(e=>{let{index:t}=e;return(0,r.jsx)(Q.Z,{value:h[t],children:(0,r.jsx)(ee.Z,{title:e.definition,placement:"right",children:(0,r.jsx)(O.Z,{sx:{width:"100%"},children:h[t]})})},t)})}):(0,r.jsx)(et.Z,{value:x,onChange:e=>{d.current.setEditCellValue({id:t,field:n,value:e.target.value}),c({type:"update",term:s.term,term_type:s.term_type,sense:e.target.value})},label:i})}function eC(e){let{processed:t}=e,n=(0,a.useContext)(B),s=(0,a.useContext)(o),[i,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(5),x=t.matches.length,h=[];if(x)for(let e=i*c,n=Math.min(t.matches.length,e+c);e<n;e++)h.push(t.matches[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=ey(e,{all:";;"+t.matches.join(";;")+";;"})}return(0,r.jsx)(en.Z,{sx:{height:"100%",overflowY:"auto"},children:x?(0,r.jsxs)(er.Z,{sx:{height:"100%"},children:[(0,r.jsxs)(es.Z,{stickyHeader:!0,size:"small",sx:{width:"100%","& .MuiTableCell-root:first-of-type":{pl:.5},"& .MuiTableCell-root:last-of-type":{pr:.5}},children:[(0,r.jsx)(ei.Z,{children:(0,r.jsxs)(el.Z,{children:[(0,r.jsx)(ea.Z,{width:"999",children:"Match"}),(0,r.jsx)(ea.Z,{align:"right",children:"Frequency"}),(0,r.jsx)(ea.Z,{align:"right",children:"Senses"}),(0,r.jsx)(ea.Z,{align:"right",children:"Related"})]})}),(0,r.jsx)(eo.Z,{children:h.map((e,t)=>{e in n||(n[e]=V(e,s));let i=n[e];return(0,r.jsxs)(el.Z,{sx:{height:33},hover:!0,children:[(0,r.jsx)(ea.Z,{children:(0,r.jsx)(ew,{term:e})}),(0,r.jsx)(ea.Z,{align:"right",children:g(i.index,s.terms&&s.terms.length)}),(0,r.jsx)(ea.Z,{align:"right",children:i.synsets.length}),(0,r.jsx)(ea.Z,{align:"right",children:i.related.length})]},e+t)})})]}),(0,r.jsx)(ec.Z,{component:"div",rowsPerPageOptions:[5,10,50,100,1e3],count:x,rowsPerPage:c,page:i,onPageChange:(e,t)=>{l(t)},onRowsPerPageChange:e=>{d(parseInt(e.target.value)),l(0)}})]}):(0,r.jsx)(O.Z,{children:"No matches"})})}function eb(e){let{processed:t}=e,n={p:1,maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},{terms:s,collapsedTerms:i,sense_keys:l}=(0,a.useContext)(o);return t.forms||(t.forms=ey(t.term,i||{all:""}),t.forms.sort(j)),(0,r.jsxs)(N.Z,{direction:"row",spacing:4,sx:{height:"100%"},children:[(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(ee.Z,{title:"100 - index / n terms * 100; terms are losely sorted by frequency and space coverage",children:(0,r.jsx)(O.Z,{children:"Relative Frequency"})}),(0,r.jsx)(en.Z,{sx:{p:1},children:(0,r.jsx)("span",{className:"number",children:g(t.index,s&&s.length)})})]}),t.forms.length?(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(O.Z,{children:"Expanded Forms"}),(0,r.jsx)(en.Z,{sx:n,children:(0,r.jsx)(ed.Z,{sx:{p:0},children:t.forms.map(e=>(0,r.jsx)(ex.ZP,{sx:{p:0},children:(0,r.jsx)(ew,{term:e})},e))})})]}):(0,r.jsx)(r.Fragment,{}),t.related.length?(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(O.Z,{children:"Related Terms"}),(0,r.jsx)(en.Z,{sx:n,children:(0,r.jsx)(ed.Z,{sx:{p:0},children:t.related.map(e=>(0,r.jsx)(ex.ZP,{sx:{p:0},children:(0,r.jsx)(ew,{term:e})},e))})})]}):(0,r.jsx)(r.Fragment,{}),l&&t.synsets.length?(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(O.Z,{children:"Senses"}),(0,r.jsx)(en.Z,{sx:n,children:(0,r.jsx)(ed.Z,{sx:{p:0},children:t.synsets.map(e=>(0,r.jsx)(ex.ZP,{sx:{p:0},children:(0,r.jsx)(eu,{senseKey:l[e.index],info:e})},e.index))})})]}):(0,r.jsx)(r.Fragment,{})]})}function ew(e){let{term:t}=e,n=(0,a.useContext)(ek);return(0,r.jsx)(eh.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function eS(e){let{term:t}=e,n=(0,a.useContext)(B),s=(0,a.useContext)(o);t in n||(n[t]=V(t,s));let i=n[t];return"fixed"===i.type?(0,r.jsx)(eb,{processed:i}):(0,r.jsx)(eC,{processed:i})}let ek=(0,a.createContext)(e=>{});function e_(e){let{term:t}=e,n=(0,a.useContext)(W),s=(0,a.useContext)(J),i=t in n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Z,{sx:{overflowY:"auto",pt:0},children:(0,r.jsx)(eS,{term:t})}),(0,r.jsx)(A.Z,{sx:{justifyContent:"flex-end",mt:"auto"},children:(0,r.jsx)(z.Z,{onClick:()=>{s(i?{type:"remove",term:t}:{type:"add",term:t,term_type:"fixed"})},children:i?"Remove":"Add"})})]})}function eE(e){let{info:t}=e;return(0,r.jsx)(P.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,r.jsx)(eg,{info:t})})}function eO(e){let{state:t,edit:n}=e;if(!t.length)return;let s=()=>n({type:"reset"}),i=t[0];return(0,r.jsx)(k.ZP,{open:""!==i.value,onClose:s,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:"45vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(E.Z,{action:(0,r.jsx)(S.Z,{"aria-label":"Close",onClick:s,children:(0,r.jsx)(w.Z,{})}),title:(0,r.jsxs)(N.Z,{direction:"row",children:[t.length>1?(0,r.jsx)(z.Z,{onClick:()=>n({type:"back"}),sx:{opacity:.7},children:t[1].value}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(O.Z,{variant:"h4",children:i.value})]})}),"term"===i.type?(0,r.jsx)(e_,{term:i.value}):(0,r.jsx)(eE,{info:i.info})]})})}var eP=n(6882),eN=n(8938),eA=n(8123),ez=n(502),eF=n(9540),eT=n(880),eI=n(6500),eR=n(4989),eD=n(9742),eM=n(1122),eW=n(4081),eJ=n(819),eK=n(8212),e$=n(2502),eH=n(5843),eY=n(1101),eq=n(9394),eL=n(1797),eB=n(6337),eU=n(2834);let eV=(0,eH.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),eX=/\\t/,eG=/^\s+|\s+$/g,eQ=/^"|"$/g,e0=/\t+/g;function e1(e,t){return{added:Date.now(),type:"fixed",categories:e,sense:t||""}}function e2(){let e=(0,eY.Z)(),t=(0,a.useContext)(M),[n,s]=(0,a.useState)(""),[i,l]=(0,a.useState)(!1),o=()=>l(!i),[c,d]=(0,a.useState)(""),x=()=>{s(""),d("")},h=()=>{n&&(t({type:"add",name:n,dict:function(e){let t={};if(e)try{if("%"===e[0]){let n=e.split("\n"),r={},s=n.length;if(s>1){let e=1;for(e=1;e<s;e++){let t=n[e].replace(eG,"");if("%"===t)break;let s=t.split(e0);s.length>1&&(r[s[0]]=s[1])}for(e++;e<s;e++){let s=n[e].replace(eG,"").split(e0);if(s.length>1){let e=s.splice(0,1)[0],n={};s.forEach(e=>{e in r&&(n[r[e]]=1)}),t[e]=e1(n)}}}}else if("{"===e[0]){let n=JSON.parse(e);Object.keys(n).forEach(e=>{let r=n[e];Array.isArray(r)?r.forEach(n=>{n in t?t[n].categories[e]=1:t[n]=e1({[e]:1})}):Object.keys(r).forEach(n=>{n in t?t[n].categories[e]=r[n]:t[n]=e1({[e]:r[n]})})})}else{let n=e.split("\n"),r=eX.test(n[0])?"\\t":",",s=n.splice(0,1)[0].split(r).map(e=>e.replace(eQ,""));s.splice(0,1),n.forEach(e=>{let n=e.split(r),i=n.splice(0,1)[0].replace(eQ,""),l={};n.forEach((e,t)=>{e&&(l[s[t]]=+e)}),t[i]=e1(l)})}}catch(e){}return t}(c)}),x(),o())};return(0,a.useEffect)(()=>{window.addEventListener("drop",e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],r=new FileReader;r.onload=()=>{n||s(C(t.name)),d(r.result)},r.readAsText(t)}})},[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{variant:"contained",onClick:o,children:"New"}),(0,r.jsxs)(eq.Z,{open:i,onClose:o,children:[(0,r.jsx)(eL.Z,{children:"Add Dictionary"}),(0,r.jsx)(S.Z,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:12,color:e.palette.grey[500]},children:(0,r.jsx)(w.Z,{})}),(0,r.jsx)(eB.Z,{sx:{p:1},children:(0,r.jsxs)(N.Z,{spacing:1,children:[(0,r.jsx)(et.Z,{size:"small",label:"name",value:n,onKeyDown:e=>{n&&"Enter"===e.code&&h()},onChange:e=>{s(e.target.value)}}),(0,r.jsx)("textarea",{style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"nowrap",minWidth:"30em",minHeight:"20em"},value:c,onChange:e=>{d(e.target.value)},placeholder:"drag and drop a file, or enter content directly"})]})}),(0,r.jsxs)(eU.Z,{sx:{justifyContent:"space-between"},children:[(0,r.jsxs)(N.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(z.Z,{variant:"outlined",component:"label",children:["File",(0,r.jsx)(eV,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],r=new FileReader;r.onload=()=>{n||s(C(t.name)),d(r.result)},r.readAsText(t)}}})]}),(0,r.jsx)(z.Z,{onClick:x,children:"clear"})]}),(0,r.jsx)(z.Z,{variant:"contained",onClick:h,children:"Add"})]})]})]})}function e5(){let e=(0,eY.Z)(),t=(0,a.useContext)(I),n=(0,a.useContext)(D)[t],[s,i]=(0,a.useState)(!1),l=()=>i(!s),[o,c]=(0,a.useState)("csv"),[d,x]=(0,a.useState)(","),[h,u]=(0,a.useState)(t),[m,p]=(0,a.useState)("unweighted"),j=(0,a.useMemo)(()=>(function(e,t,n,r){switch(t){case"csv":let s=Object.keys(e),i=new Set;s.forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>i.add(e))});let l=Array.from(i),a=new Map(l.map((e,t)=>[t,e]));return'"term"'+n+'"'+l.join('"'+n+'"')+'"\n'+s.map(t=>{let r=e[t].categories,s='"'+t+'"';return a.forEach(e=>{s+=n+(e in r?r[e]:"")}),s}).join("\n");case"dic":let o={},c=0,d="";return Object.keys(e).forEach(t=>{let n=e[t].categories;if(n){let e=[t];Object.keys(n).forEach(t=>{t in o||(o[t]=++c),e.push(o[t])}),d+="\n"+e.join("	")}}),"%\n"+Object.keys(o).map(e=>o[e]+"	"+e).join("\n")+"\n%"+d;case"json":if("full"===r)return JSON.stringify(e,void 0,2);let x={};if(Object.keys(e).forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>{e in x||(x[e]={}),x[e][t]=n[e]})}),"weighted"===r)return JSON.stringify(x,void 0,2);let h={};return Object.keys(x).forEach(e=>{h[e]=Object.keys(x[e])}),JSON.stringify(h,void 0,2);default:return""}})(n,o,d,m),[n,o,d,m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{variant:"contained",onClick:l,children:"Export"}),(0,r.jsxs)(eq.Z,{open:s,onClose:l,children:[(0,r.jsx)(eL.Z,{children:"Export Dictionary"}),(0,r.jsx)(S.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:12,color:e.palette.grey[500]},children:(0,r.jsx)(w.Z,{})}),(0,r.jsx)(eB.Z,{sx:{p:1},children:(0,r.jsxs)(N.Z,{spacing:1,children:[(0,r.jsx)(et.Z,{size:"small",label:"name",value:h,onChange:e=>{u(e.target.value)}}),(0,r.jsx)("textarea",{style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"nowrap",minWidth:"30em",minHeight:"20em"},value:j,onChange:()=>{}})]})}),(0,r.jsxs)(eU.Z,{sx:{justifyContent:"space-between"},children:[(0,r.jsxs)(N.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(eW.Z,{children:[(0,r.jsx)(eJ.Z,{children:"Format"}),(0,r.jsxs)(G.Z,{label:"Format",size:"small",value:o,onChange:e=>{c(e.target.value)},children:[(0,r.jsx)(Q.Z,{value:"dic",children:".dic"}),(0,r.jsx)(Q.Z,{value:"json",children:".json"}),(0,r.jsx)(Q.Z,{value:"csv",children:".csv"})]})]}),"csv"===o?(0,r.jsx)(et.Z,{sx:{maxWidth:"5em"},size:"small",label:"Separator",value:d,onChange:e=>{x(e.target.value)}}):(0,r.jsx)(r.Fragment,{})," ","json"===o?(0,r.jsxs)(eW.Z,{children:[(0,r.jsx)(eJ.Z,{children:"Type"}),(0,r.jsxs)(G.Z,{label:"Type",size:"small",value:m,onChange:e=>{p(e.target.value)},children:[(0,r.jsx)(Q.Z,{value:"weighted",children:"Weighted"}),(0,r.jsx)(Q.Z,{value:"unweighted",children:"Unweighted"}),(0,r.jsx)(Q.Z,{value:"full",children:"Full"})]})]}):(0,r.jsx)(r.Fragment,{})]}),(0,r.jsx)(z.Z,{variant:"contained",onClick:()=>{if(h&&j){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([j],{type:"text/plain"}))),e.setAttribute("download",h+"."+("csv"===o?"	"===d?"tsv":","===d?"csv":"txt":o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}(0,eH.ZP)("a")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});let e3=function(e,t){return t.time&&e.time?t.time-e.time:-1};function e9(){let[e,t]=(0,a.useState)(!1),n=()=>t(!e),s=(0,a.useContext)(D),i=(0,a.useContext)(M),l=(0,a.useContext)(I),o=Object.keys(s),c=(0,a.useContext)(K),d=(0,a.useContext)($),x=(0,a.useContext)(J),h=(0,a.useContext)(H),u=(0,a.useContext)(Y),m=(0,a.useContext)(q),p=(0,a.useContext)(L),[j,g]=(0,a.useState)(""),f=()=>{j&&-1===c.indexOf(j)&&(d({type:"add",cat:j}),g(""))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{variant:"text",sx:{fontWeight:"bold"},onClick:n,children:l}),(0,r.jsx)(k.ZP,{anchor:"left",open:e,onClose:n,children:(0,r.jsxs)(_.Z,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,r.jsx)(E.Z,{title:(0,r.jsx)(O.Z,{children:"Dictionary Menu"}),action:(0,r.jsx)(S.Z,{onClick:n,children:(0,r.jsx)(w.Z,{})})}),(0,r.jsxs)(N.Z,{direction:"row",sx:{mb:2},children:[(0,r.jsxs)(eW.Z,{fullWidth:!0,children:[(0,r.jsx)(eJ.Z,{children:"Current"}),(0,r.jsx)(G.Z,{label:"Current",size:"small",value:l,onChange:e=>{i({type:"set",name:e.target.value,dict:s[e.target.value]})},children:o.map(e=>(0,r.jsx)(Q.Z,{value:e,children:e},e))})]}),(0,r.jsx)(e2,{})]}),(0,r.jsx)(P.Z,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,r.jsxs)(N.Z,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,r.jsxs)(_.Z,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(E.Z,{title:(0,r.jsx)(O.Z,{children:"Categories"}),sx:{pb:0}}),(0,r.jsx)(P.Z,{sx:{pt:0,pb:0,mb:"auto",overflowY:"auto"},children:(0,r.jsx)(ed.Z,{children:c.map(e=>(0,r.jsxs)(ex.ZP,{sx:{p:0},children:[(0,r.jsx)(eK.Z,{primary:e}),(0,r.jsx)(S.Z,{"aria-label":"delete category",onClick:()=>{x({type:"remove_category",name:e}),d({type:"remove",cat:e})},children:(0,r.jsx)(eM.Z,{})})]},e))})}),(0,r.jsx)(A.Z,{children:(0,r.jsxs)(N.Z,{direction:"row",children:[(0,r.jsx)(et.Z,{size:"small",value:j,onKeyDown:e=>{"Enter"===e.code&&f()},onChange:e=>{g(e.target.value)}}),(0,r.jsx)(z.Z,{onClick:f,children:"Add"})]})})]}),(0,r.jsxs)(_.Z,{elevation:5,sx:{height:"60%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(E.Z,{title:(0,r.jsx)(O.Z,{children:"Edit History"}),sx:{pb:0}}),(0,r.jsx)(P.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,r.jsx)(ed.Z,{sx:{overflowX:"hidden"},children:h.sort(e3).map((e,t)=>(0,r.jsx)(ex.ZP,{sx:{p:0},children:(0,r.jsx)(e$.Z,{sx:{borderLeft:m>=t?"2px solid #fff":""},onClick:()=>{p(t)},children:(0,r.jsx)(eK.Z,{sx:{m:0},primary:e.type+": "+e.name,secondary:e.time?new Date(e.time).toLocaleString():""})})},t))})}),(0,r.jsx)(A.Z,{children:(0,r.jsx)(z.Z,{fullWidth:!0,onClick:()=>{u({type:"clear"})},children:"Clear"})})]})]})}),(0,r.jsx)(A.Z,{children:(0,r.jsxs)(N.Z,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,r.jsx)(e5,{}),(0,r.jsx)(z.Z,{fullWidth:!0,variant:"outlined",color:"error",onClick:()=>{i({type:"delete",name:l})},children:"Delete"})]})})]})})]})}function e8(e){let{terms:t,exists:n,add:s}=e,[i,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)([]),[j,g]=(0,a.useState)(!1),y=(0,a.useContext)(ek),{collapsedTerms:v}=(0,a.useContext)(o),C=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:i:i;if(t&&!n(t)){if(j){let e=t;try{e=new RegExp(e)}catch(e){}s(e,"regex")}else s(t,"fixed");m([]),l("")}},b=e=>{let t=e.target;if(t&&"value"in t){let e=t.value.toLowerCase();d(n(e)),l(e)}};return(0,r.jsx)(eI.Z,{component:"nav",children:(0,r.jsxs)(eR.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,r.jsx)(e9,{}),(0,r.jsxs)(N.Z,{direction:"row",sx:{width:"calc(min(500px, 50%))"},spacing:1,children:[(0,r.jsx)(eD.Z,{options:u,value:i,onKeyUp:e=>{if("code"in e&&"Enter"===e.code){let t="value"in e.target?e.target.value:"";if(t===i)return C(t)}if(t){let e=[];if(i&&v){let t;try{t=RegExp(j?Z(i):x.test(i)?p(i):";"+i+"[^;]*;","g")}catch(e){t=RegExp(";"+i.replace(h,"\\%&")+";","g")}f(t,v,e,100)}m(e)}},onChange:b,renderOption:(e,t)=>(0,a.createElement)(ex.ZP,{...e,key:t,onClick:C},t),renderInput:e=>(0,r.jsx)(et.Z,{...e,size:"small",placeholder:"term to add",value:i,onChange:b,error:c}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,r.jsx)(ee.Z,{title:"regular expression characters are "+(j?"active":"escaped"),children:(0,r.jsx)(S.Z,{"aria-label":"toggle regular expression",onClick:()=>g(!j),children:j?(0,r.jsx)(eF.Z,{}):(0,r.jsx)(eT.Z,{})})}),(0,r.jsx)(z.Z,{variant:"outlined",disabled:!i,onClick:()=>{i&&y({type:"add",state:{type:"term",value:i}})},children:"View"}),(0,r.jsx)(z.Z,{variant:"contained",onClick:()=>C(),disabled:!i||c,children:"Add"})]}),(0,r.jsx)(T,{})]})})}var e4=n(8451);let e6=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}],e7=/^category_/;function te(e){let{loading:t,drawerOpen:n}=e,s=(0,a.useContext)(o),i=(0,a.useContext)(W),l=(0,a.useContext)(K),c=(0,a.useContext)(B),d=(0,a.useContext)(J),x=Object.keys(i).reverse(),h=(0,a.useMemo)(()=>{let e=[{field:"id",headerName:"Term",renderCell:e=>(0,r.jsx)(ew,{term:e.value})},{field:"sense",headerName:"Sense",editable:!0,renderEditCell:e=>(0,r.jsx)(ev,{id:e.id,field:e.field,processed:e.row.processed})},{field:"frequency",headerName:"Frequency"},{field:"matches",headerName:"Matches"},{field:"senses",headerName:"Senses"},{field:"related",headerName:"Related"}];return l.forEach(t=>e.push({field:"category_"+t,headerName:t,editable:!0,valueParser:(e,t)=>{let n=+e||"";if(t&&n){let{field:n,row:r}=t,{processed:s,dictEntry:i}=r;if(n.startsWith("category_")){let t=i.categories;t[n.replace(e7,"")]=+e,d({type:"update",term:s.term,term_type:s.term_type,categories:t})}}return n}})),e},[l,d]),u=(0,a.useMemo)(()=>s.termAssociations?x.map(e=>{e in c||(c[e]=V("regex"===i[e].type?new RegExp(e):e,s));let t=c[e],n=i[e],r=t?"fixed"===t.type?{processed:t,dictEntry:n,id:e,sense:n.sense,frequency:g(t.index,s.terms&&s.terms.length),matches:t.recognized?1:0,senses:t.synsets.length,related:t.related.length}:{processed:t,dictEntry:n,id:e,sense:n.sense,matches:t.matches.length}:{processed:t,dictEntry:n,id:e,matches:0};if(n.categories){let e=n.categories;Object.keys(e).forEach(t=>{r["category_"+t]=e[t]})}return r}):[],[x,s,i,c]);return(0,r.jsx)(en.Z,{children:s.termAssociations&&s.synsetInfo?(0,r.jsxs)(eN.Z,{children:[(0,r.jsx)(e8,{terms:s.terms,exists:e=>e in i,add:(e,t)=>{d({type:"add",term:e,term_type:t})}}),(0,r.jsx)(en.Z,{component:"main",sx:{position:"absolute",top:0,right:0,bottom:0,left:0,overflowY:"auto",mt:"3em",mb:n?"45vh":0},children:x.length?(0,r.jsx)(e4._$,{rows:u,columns:h,disableRowSelectionOnClick:!0,showCellVerticalBorder:!0,density:"compact"}):(0,r.jsx)(O.Z,{align:"center",children:"Add terms, or import an existing dictionary."})})]}):(0,r.jsxs)(N.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,r.jsx)(O.Z,{children:"Loading Resources..."}),(0,r.jsx)(ed.Z,{children:e6.map(e=>{let{key:n,label:i}=e;return(0,r.jsx)(ex.ZP,{children:(0,r.jsxs)(O.Z,{children:[s[n]?(0,r.jsx)(eA.Z,{color:"success"}):t[n]?(0,r.jsx)(eP.Z,{size:"1.5rem"}):(0,r.jsx)(ez.Z,{color:"error",sx:{marginBottom:-.8}}),s[n]||t[n]?"":"Failed to load ",i]})},n)})})]})})}let tt=(0,s.Z)({palette:{mode:"dark",primary:{main:"#bb92e3"}}}),tn=(e,t)=>{switch(t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function tr(){let[e,t]=(0,a.useState)(!0),[n,s]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!0),[u,m]=(0,a.useReducer)(tn,[]);return(0,r.jsx)(a.StrictMode,{children:(0,r.jsxs)(i.Z,{theme:tt,children:[(0,r.jsx)(l.ZP,{}),(0,r.jsx)(c,{loadingTerms:t,loadingTermAssociations:s,loadingSenseKeys:d,loadingSynsetInfo:h,children:(0,r.jsx)(X,{children:(0,r.jsxs)(ek.Provider,{value:m,children:[(0,r.jsx)(te,{loading:{terms:e,termAssociations:n,sense_keys:o,synsetInfo:x},drawerOpen:!!u.length}),(0,r.jsx)(eO,{state:u,edit:m})]})})})]})})}}},function(e){e.O(0,[814,971,938,744],function(){return e(e.s=69)}),_N_E=e.O()}]);