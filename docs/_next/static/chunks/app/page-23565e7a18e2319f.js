(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{69:function(e,t,n){Promise.resolve().then(n.bind(n,420))},420:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tm}});var r=n(7437),s=n(8595),i=n(3948),a=n(3857),l=n(2265),o=n(8123),c=n(502),d=n(3457),h=n(3226),u=n(5266),x=n(9299),m=n(6882);let p=(0,l.createContext)({}),g=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}];function y(e){let{children:t}=e,[n,s]=(0,l.useState)(),[i,a]=(0,l.useState)(),[y,f]=(0,l.useState)(),[j,v]=(0,l.useState)(),[Z,b]=(0,l.useState)(),[C,w]=(0,l.useState)(),[k,_]=(0,l.useState)(!0),[S,E]=(0,l.useState)(!0),[O,N]=(0,l.useState)(!0),[P,z]=(0,l.useState)(!0);(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/terms.txt").then(e=>e.text()).then(e=>{let t=Object.freeze(e.split("\n"));s(t);let n={all:";;"+t.join(";;")+";;"},r={};t.forEach((e,t)=>{r[e]=t;let s=e[0];s&&(s in n?n[s]+=e+";;":n[s]=";;"+e+";;")}),a(Object.freeze(r)),f(Object.freeze(n))}).finally(()=>_(!1))},[k]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/term_associations.json").then(e=>e.json()).then(e=>{v(e)}).finally(()=>E(!1))},[S]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/sense_keys.txt").then(e=>e.text()).then(e=>{b(Object.freeze(e.split("\n")))}).finally(()=>N(!1))},[O]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/synset_info.json").then(e=>e.json()).then(e=>{w(e.map((e,t)=>(e.index=t,e)))}).finally(()=>z(!1))},[P]);let F={terms:n,termLookup:i,collapsedTerms:y,termAssociations:j,sense_keys:Z,synsetInfo:C},A={terms:k,termAssociations:S,sense_keys:O,synsetInfo:P};return(0,r.jsx)(p.Provider,{value:F,children:j&&C?t:(0,r.jsxs)(d.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,r.jsx)(h.Z,{children:"Loading Resources..."}),(0,r.jsx)(u.Z,{children:g.map(e=>{let{key:t,label:n}=e;return(0,r.jsx)(x.ZP,{children:(0,r.jsxs)(h.Z,{children:[F[t]?(0,r.jsx)(o.Z,{color:"success"}):A[t]?(0,r.jsx)(m.Z,{size:"1.5rem"}):(0,r.jsx)(c.Z,{color:"error",sx:{marginBottom:-.8}}),F[t]||A[t]?"":"Failed to load ",n]})},t)})})]})})}let f=/\*/,j=/\*/g,v=/([\[\]\(\)*?^$.+])/g,Z=/^;|;$/g,b=/([\[\]\(\)?^$.+])/g;function C(e){return";"+e.replace(b,"\\$&").replace(j,"[^;]*")+";"}function w(e,t){return e.length-t.length}function k(e,t){return t&&-1!==e?((1-e/t)*100).toFixed(2):"0.00"}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,s=t[e.source[1]in t?e.source[1]:"all"];for(let t,i="";n.length<r&&(t=e.exec(s));)(i=t[0].replace(Z,""))&&n.push(i)}let S=/\./g;function E(e){return";"+e.replace(S,"[^;]")+";"}let O=/^.*[/\\]/;function N(e){return e.replace(O,"")}var P=n(8457),z=n(4262),F=n(2653),A=n(4111),M=n(5133),T=n(6114),D=n(8469),I=n(1975),R=n(8956),W=n(9050);let J="41vh",L="200px";function K(){return JSON.parse(localStorage.getItem("dictionary_builder_settings")||"{}")}function $(){let[e,t]=(0,l.useState)(!1),n=()=>t(!e),s=(0,l.useMemo)(K,[]),i=(0,l.useContext)(el),[a,o]=(0,l.useState)(s.undo||"z"),[c,u]=(0,l.useState)(s.redo||"x"),x=(0,l.useCallback)(e=>{(e.ctrlKey||e.metaKey)&&(e.key===c?i(-1):e.key===a&&i(1))},[a,c,i]);return(0,l.useEffect)(()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)}),[a,c,x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Z,{onClick:n,"aria-label":"toggle settings menu",children:(0,r.jsx)(P.Z,{})}),(0,r.jsx)(A.ZP,{anchor:"right",open:e,onClose:n,children:(0,r.jsxs)(M.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,r.jsx)(T.Z,{title:(0,r.jsx)(h.Z,{children:"Settings"}),action:(0,r.jsx)(F.Z,{onClick:n,"aria-label":"close settings menu",className:"close-button",children:(0,r.jsx)(z.Z,{})})}),(0,r.jsx)(D.Z,{sx:{alignContent:"left",mb:"auto"},children:(0,r.jsxs)(d.Z,{spacing:3,children:[(0,r.jsx)(h.Z,{children:"Keybinds"}),(0,r.jsx)(I.Z,{size:"small",label:"undo",value:a,onChange:e=>{window.removeEventListener("keydown",x),s.undo=e.target.value,localStorage.setItem("dictionary_builder_settings",JSON.stringify(s)),o(e.target.value)}}),(0,r.jsx)(I.Z,{size:"small",label:"redo",value:c,onChange:e=>{window.removeEventListener("keydown",x),s.redo=e.target.value,localStorage.setItem("dictionary_builder_settings",JSON.stringify(s)),u(e.target.value)}})]})}),(0,r.jsx)(R.Z,{children:(0,r.jsx)(W.Z,{fullWidth:!0,color:"error",onClick:()=>{let e=K();e.dictionary_names&&e.dictionary_names.forEach(e=>{localStorage.removeItem("dict_"+e),localStorage.removeItem("dict_history_"+e)}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()},children:"Clear Storage"})})]})})]})}var B=n(2502),H=n(8212),Y=n(7154),q=n(9093),V=n(9657);function U(){let e=(0,l.useContext)(ei),t=(0,l.useContext)(ea),n=(0,l.useContext)(el),s=(0,l.useMemo)(()=>e.edits.map((t,s)=>(0,r.jsx)(x.ZP,{sx:{p:0},children:(0,r.jsx)(B.Z,{sx:{borderLeft:e.position>=s?"2px solid #fff":""},onClick:()=>n(s-e.position),children:(0,r.jsx)(H.Z,{sx:{m:0},primary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Z,{children:[(0,r.jsx)("span",{style:{opacity:".75"},children:t.type+": "}),t.name]}),"edit_term"===t.type?(0,r.jsx)(h.Z,{className:"code",sx:{wordBreak:"break-all"},children:"categories"===t.value.field?t.value.edits.map(e=>e.category+": "+e.from+" -> "+e.to).join("\n"):t.value.field+": "+t.value.original+" -> "+t.value.new}):(0,r.jsx)(r.Fragment,{})]}),secondary:(0,r.jsx)(h.Z,{sx:{fontSize:".8em",opacity:.6},variant:"body2",children:t.time?new Date(t.time).toLocaleString():""})})})},s)),[e,n]);return(0,r.jsxs)(M.Z,{elevation:5,sx:{height:"60%",minHeight:"300px",position:"relative",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(T.Z,{title:(0,r.jsx)(h.Z,{fontWeight:"bold",children:"Edit History"}),sx:{pb:0}}),(0,r.jsxs)(d.Z,{direction:"row",sx:{position:"absolute",top:8,right:8},children:[(0,r.jsx)(F.Z,{onClick:()=>n(1),"aria-label":"undo",children:(0,r.jsx)(Y.Z,{})}),(0,r.jsx)(F.Z,{onClick:()=>n(-1),"aria-label":"redo",children:(0,r.jsx)(q.Z,{})}),(0,r.jsx)(F.Z,{onClick:()=>n(-1e3),"aria-label":"jump to current",children:(0,r.jsx)(V.Z,{})})]}),(0,r.jsx)(D.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,r.jsx)(u.Z,{sx:{overflowX:"hidden"},children:s})}),(0,r.jsx)(R.Z,{children:(0,r.jsx)(W.Z,{fullWidth:!0,onClick:()=>{t({type:"clear"})},children:"Clear"})})]})}let G=(0,l.createContext)("default"),X=(0,l.createContext)(e=>{}),Q=(0,l.createContext)({}),ee=(0,l.createContext)(e=>{}),et=(0,l.createContext)({}),en=(0,l.createContext)(e=>{}),er=(0,l.createContext)([]),es=(0,l.createContext)(e=>{}),ei=(0,l.createContext)({edits:[],position:-1}),ea=(0,l.createContext)(e=>{}),el=(0,l.createContext)(e=>{}),eo=(0,l.createContext)(!0),ec=(0,l.createContext)(e=>{}),ed=(0,l.createContext)({}),eh=(e,t)=>{let{terms:n,termLookup:r,termAssociations:s,synsetInfo:i}=t,a={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&r&&r[e]||-1,related:[],synsets:[]};if(s&&i&&n&&-1!==a.index){a.recognized=!0;let e=s[a.index];a.related=e&&e[0]?(Array.isArray(e[0])?e[0]:[e[0]]).map(e=>n[e-1]):[],a.synsets=e&&e[1]?(Array.isArray(e[1])?e[1]:[e[1]]).map(e=>i[e-1]):[]}return a},eu=(e,t)=>{let n="string"==typeof e;if(n&&!f.test(e))return eh(e,t);{let r=n?C(e):e.source,s={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:RegExp(n?r:E(r),"g"),matches:[]};return t.collapsedTerms&&_(s.regex,t.collapsedTerms,s.matches),s.recognized=!!s.matches.length,s}};function ex(e){let{children:t}=e,n=(0,l.useContext)(p),s=(0,l.useMemo)(()=>({}),[]),i=(0,l.useMemo)(K,[]),a=(0,l.useMemo)(()=>{let e={default:{}};return(i.dictionary_names||[]).forEach(t=>{e[t]=JSON.parse(localStorage.getItem("dict_"+t)||"{}")}),e},[i]),[o,c]=(0,l.useState)(i.selected||"default"),d=()=>JSON.parse(localStorage.getItem("dict_history_"+o)||'{"edits": [], "position": -1}'),h=e=>{if("replace"===e.type){x(e.history);return}let t="clear"===e.type?[]:[...u.edits],n="clear"===e.type?-1:u.position;"remove"===e.type?t.pop():"clear"!==e.type&&(n>-1&&(t.splice(0,n+1),n=-1),e.entry.time||(e.entry.time=Date.now()),t.splice(0,0,e.entry)),t.length>1e3&&t.splice(1e3,t.length-999),localStorage.setItem("dict_history_"+o,JSON.stringify({edits:t,position:n})),x({edits:t,position:n})},[u,x]=(0,l.useState)(d()),m=e=>{"delete"===e.type?(delete a[e.name],localStorage.removeItem("dict_"+e.name),localStorage.removeItem("dict_history_"+e.name),"default"===e.name&&(a.default={}),o===e.name&&(f("default"),v({type:"change_dict",dict:a.default}))):("set"!==e.type&&(a[e.name]=e.dict),o&&localStorage.setItem("dict_"+e.name,JSON.stringify(a[o])),"save"!==e.type&&(f(e.name),v({type:"change_dict",dict:a[e.name]})),localStorage.setItem("dict_"+e.name,JSON.stringify(a[e.name]))),i.dictionary_names=Object.keys(a),localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[g,y]=(0,l.useReducer)((e,t)=>{switch(t.type){case"collect":let n=new Set(t.reset?[]:e);return Object.keys(t.dictionary).forEach(e=>{let{categories:r}=t.dictionary[e];Object.keys(r).forEach(e=>n.add(e))}),Array.from(n).sort();case"add":return e.includes(t.cat)?[...e]:[...e,t.cat].sort();default:return e.filter(e=>e!==t.cat)}},[]),f=e=>{let t=e in a?e:"default";c(t),i.selected=t,localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[j,v]=(0,l.useReducer)((e,t)=>{if("history_bulk"===t.type)return y({type:"collect",dictionary:t.dict,reset:!0}),m({type:"save",name:o,dict:t.dict}),t.dict;if("change_dict"===t.type)return h({type:"replace",history:d()}),y({type:"collect",dictionary:t.dict,reset:!0}),t.dict;let r={...e};if("remove_category"===t.type){let e={},n=0;Object.keys(r).forEach(s=>{let i=r[s];t.name in i.categories&&(n++,i.categories[t.name]&&(e[s]=i.categories[t.name]),delete i.categories[t.name])}),n&&h({type:"add",entry:{type:"remove_category",name:t.name,value:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in r&&(r[e].categories[t.name]=t.weights[e])}),h({type:"add",entry:{type:"add_category",name:t.name,value:t.weights}});else{let i="string"==typeof t.term?t.term:t.term.source;if("remove"===t.type)delete r[i],h({type:"add",entry:{type:"remove_term",name:i,value:e[i]}});else{let a=s[i];if(a&&t.term_type===a.term_type||(s[i]=eu(t.term,n)),!t.sense){let e=s[i];"fixed"===e.type&&1===e.synsets.length&&n.sense_keys&&(t.sense=n.sense_keys[e.synsets[0].index])}let l=r[i]||{};if(r[i]={added:l.added||Date.now(),type:l.type||a&&a.term_type||"fixed",categories:{...t.categories||l.categories||{}},sense:"sense"in t?t.sense||"":l.sense||""},"replace"===t.type){let n="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete r[n],h({type:"add",entry:{type:"replace_term",name:i,value:r[i],originalName:n,originalValue:e[n]}})}else if(i in e){let t;let n=e[i],s=r[i];if(s.type!==n.type)t={field:"type",new:s.type,original:n.type};else if(s.sense!==n.sense)t={field:"sense",new:s.sense,original:n.sense};else{let e=[];t={field:"categories",edits:e},Object.keys(s.categories).forEach(t=>{s.categories[t]!==n.categories[t]&&e.push({category:t,from:n.categories[t]||0,to:s.categories[t]||0})}),Object.keys(n.categories).forEach(t=>{t in s.categories||e.push({category:t,from:n.categories[t],to:0})})}h({type:"add",entry:{type:"edit_term",name:i,value:t}})}else h({type:"add",entry:{type:"add_term",name:i,value:r[i]}})}y({type:"collect",dictionary:r})}return m({type:"save",name:o,dict:r}),r},a.default);(0,l.useEffect)(()=>{i.selected&&i.selected in a||(i.selected="default"),v({type:"change_dict",dict:a[i.selected]})},[i,a]);let[Z,b]=(0,l.useState)(!0);return(0,r.jsx)(eo.Provider,{value:Z,children:(0,r.jsx)(ec.Provider,{value:b,children:(0,r.jsx)(ei.Provider,{value:u,children:(0,r.jsx)(ea.Provider,{value:h,children:(0,r.jsx)(Q.Provider,{value:a,children:(0,r.jsx)(ee.Provider,{value:m,children:(0,r.jsx)(G.Provider,{value:o,children:(0,r.jsx)(et.Provider,{value:j,children:(0,r.jsx)(er.Provider,{value:g,children:(0,r.jsx)(X.Provider,{value:e=>{f(e)},children:(0,r.jsx)(en.Provider,{value:v,children:(0,r.jsx)(es.Provider,{value:y,children:(0,r.jsx)(el.Provider,{value:e=>{let t={...j},n=d();!function(e,t,n){let r=t.position;if(e>t.position)for(r=Math.max(0,r);r<e+1;r++)t.edits[r]&&function(e,t){switch(e.type){case"add_term":delete t[e.name];return;case"remove_term":t[e.name]=e.value;return;case"replace_term":delete t[e.name],t[e.originalName]=e.originalValue;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.from?n.categories[e.category]=e.from:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.original;return;case"add_category":Object.keys(t).forEach(n=>{let r=t[n];Object.keys(r.categories).forEach(t=>{t in e.value&&delete r.categories[t]})});return;case"remove_category":Object.keys(t).forEach(n=>{n in e.value&&(t[n].categories[e.name]=e.value[n])});return}}(t.edits[r],n);else for(r=Math.min(t.edits.length-1,r);r>e;r--)t.edits[r]&&function(e,t){switch(e.type){case"add_term":t[e.name]=e.value;return;case"remove_term":delete t[e.name];return;case"replace_term":delete t[e.originalName],t[e.name]=e.value;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.to?n.categories[e.category]=e.to:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.new;return;case"add_category":Object.keys(t).forEach(n=>{n in e.value&&(t[n].categories[e.name]=e.value[n])});return;case"remove_category":Object.keys(e.value).forEach(n=>{let r=t[n];r&&r.categories&&e.name in r.categories&&delete r.categories[e.name]});return}}(t.edits[r],n);t.position=e}(Math.min(Math.max(-1,n.position+e),n.edits.length-1),n,t),h({type:"replace",history:n}),localStorage.setItem("dict_history_"+o,JSON.stringify(n)),v({type:"history_bulk",dict:t})},children:(0,r.jsx)(ed.Provider,{value:s,children:t})})})})})})})})})})})})})})}var em=n(8639),ep=n(4309),eg=n(8276),ey=n(9245),ef=n(5795),ej=n(3701),ev=n(6988),eZ=n(4147),eb=n(666),eC=n(9279),ew=n(7449),ek=n(5210);function e_(e){let{senseKey:t,info:n}=e,s=(0,l.useContext)(eI);return(0,r.jsx)(eg.Z,{title:n.definition,placement:"right",children:(0,r.jsx)(ek.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>s({type:"add",state:{type:"synset",value:t,info:n}}),children:t})})}function eS(e){let{name:t,info:n}=e,s=n[t],{terms:i,sense_keys:a,synsetInfo:o}=(0,l.useContext)(p);return i&&a&&o?(0,r.jsxs)(ey.Z,{sx:{m:1},children:[(0,r.jsx)(h.Z,{variant:"h5",children:t}),(0,r.jsx)(h.Z,{children:"string"==typeof s?s:"members"===t?i?Array.isArray(s)?s.map(e=>(0,r.jsx)(eT,{term:i[e-1]},e)):(0,r.jsx)(eT,{term:i[s-1]},s):(0,r.jsx)(r.Fragment,{}):Array.isArray(s)?s.map(e=>{let t=o[e-1];return(0,r.jsx)(e_,{senseKey:a[e-1],info:t},e)}):(0,r.jsx)(e_,{senseKey:a[s-1],info:o[s-1]})})]},t):(0,r.jsx)(r.Fragment,{})}let eE={id:0,index:0,ili:0,definition:0,topic:0},eO={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function eN(e){let{info:t}=e,{sense_keys:n}=(0,l.useContext)(p);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h6",children:t.definition}),(0,r.jsxs)(d.Z,{direction:"row",spacing:2,children:[(0,r.jsxs)(ey.Z,{children:[(0,r.jsxs)(h.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID: ",(0,r.jsx)("span",{className:"number",children:t.id})]}),(0,r.jsxs)(h.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Sense Key: ",(0,r.jsx)("span",{className:"number",children:n&&n[t.index]})]}),(0,r.jsxs)(h.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,r.jsx)("span",{className:"number",children:t.ili})]})]}),(0,r.jsxs)(ey.Z,{children:[(0,r.jsxs)(h.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,r.jsx)("span",{className:"number",children:eO[t.id.substring(t.id.length-1)]})]}),(0,r.jsxs)(h.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,r.jsx)("span",{className:"number",children:t.topic})]})]})]}),(0,r.jsx)(d.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in eE)).map(e=>(0,r.jsx)(eS,{name:e,info:t},e))})]})}let eP=/[aeiouy]$/;function ez(e,t){let n,r;let s=new Set;e=e.replace(v,"\\$&");try{n=RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?(?:"+e+(e.length>(eP.test(e)?3:2)?"|"+e.replace(eP,"[aeiouy]"):"")+"|"+e+e.substring(e.length-1)+")-?(?:'|ac|age|al|alize|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|nce|ness|or|ous|r|s|ship|st|th|ties|ty|ur|ward|wise|y|z)?(?:'|ate|ation|d|ed|er|es|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?\\;","g")}catch(e){}if(n)for(;r=n.exec(t);)r[0]&&";"+e+";"!==r[0]&&s.add(r[0].replace(Z,""));return Array.from(s)}function eF(e){let{id:t,field:n,processed:s,label:i,gridApi:a}=e,o=(0,l.useContext)(et),c=(0,l.useContext)(en),d=o[s.term].sense,{sense_keys:u}=(0,l.useContext)(p);return"fixed"===s.type&&s.synsets.length?(0,r.jsx)(em.Z,{fullWidth:!0,size:"small","aria-label":"assign synset",value:d,onChange:e=>{a&&a.current.setEditCellValue({id:t,field:n,value:e.target.value}),c({type:"update",term:s.term,term_type:s.term_type,sense:e.target.value})},label:i,children:u&&s.synsets.map(e=>{let{index:t}=e;return(0,r.jsx)(ep.Z,{value:u[t],children:(0,r.jsx)(eg.Z,{title:e.definition,placement:"right",children:(0,r.jsx)(h.Z,{sx:{width:"100%"},children:u[t]})})},t)})}):(0,r.jsx)(I.Z,{size:"small",value:d,onChange:e=>{a&&a.current.setEditCellValue({id:t,field:n,value:e.target.value}),c({type:"update",term:s.term,term_type:s.term_type,sense:e.target.value})},label:i})}function eA(e){let{processed:t}=e,n=(0,l.useContext)(ed),s=(0,l.useContext)(p),[i,a]=(0,l.useState)(0),[o,c]=(0,l.useState)(5),d=t.matches.length,u=[];if(d)for(let e=i*o,n=Math.min(t.matches.length,e+o);e<n;e++)u.push(t.matches[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=ez(e,";;"+t.matches.join(";;")+";;")}return(0,r.jsx)(ey.Z,{sx:{height:"100%",overflowY:"auto"},children:d?(0,r.jsxs)(ef.Z,{sx:{height:"100%"},children:[(0,r.jsxs)(ej.Z,{stickyHeader:!0,size:"small",sx:{width:"100%","& .MuiTableCell-root:first-of-type":{pl:.5},"& .MuiTableCell-root:last-of-type":{pr:.5}},children:[(0,r.jsx)(ev.Z,{children:(0,r.jsxs)(eZ.Z,{children:[(0,r.jsx)(eb.Z,{width:"999",children:"Match"}),(0,r.jsx)(eb.Z,{align:"right",children:"Frequency"}),(0,r.jsx)(eb.Z,{align:"right",children:"Senses"}),(0,r.jsx)(eb.Z,{align:"right",children:"Related"})]})}),(0,r.jsx)(eC.Z,{children:u.map((e,t)=>{e in n||(n[e]=eu(e,s));let i=n[e];return(0,r.jsxs)(eZ.Z,{sx:{height:33},hover:!0,children:[(0,r.jsx)(eb.Z,{children:(0,r.jsx)(eT,{term:e})}),(0,r.jsx)(eb.Z,{align:"right",children:k(i.index,s.terms&&s.terms.length)}),(0,r.jsx)(eb.Z,{align:"right",children:i.synsets.length}),(0,r.jsx)(eb.Z,{align:"right",children:i.related.length})]},e+t)})})]}),(0,r.jsx)(ew.Z,{component:"div",rowsPerPageOptions:[5,10,50,100,1e3],count:d,rowsPerPage:o,page:i,onPageChange:(e,t)=>{a(t)},onRowsPerPageChange:e=>{c(parseInt(e.target.value)),a(0)}})]}):(0,r.jsx)(h.Z,{children:"No matches"})})}function eM(e){let{processed:t}=e,n={p:1,maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},{terms:s,collapsedTerms:i,sense_keys:a}=(0,l.useContext)(p);return t.forms||(t.forms=ez(t.term,i?i.all:""),t.forms.sort(w)),(0,r.jsxs)(d.Z,{direction:"row",spacing:4,sx:{height:"100%"},children:[(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(eg.Z,{title:"100 - index / n terms * 100; terms are losely sorted by frequency and space coverage",children:(0,r.jsx)(h.Z,{children:"Relative Frequency"})}),(0,r.jsx)(ey.Z,{sx:{p:1},children:(0,r.jsx)("span",{className:"number",children:k(t.index,s&&s.length)})})]}),t.forms.length?(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{children:"Expanded Forms"}),(0,r.jsx)(ey.Z,{sx:n,children:(0,r.jsx)(u.Z,{sx:{p:0},children:t.forms.map(e=>(0,r.jsx)(x.ZP,{sx:{p:0},children:(0,r.jsx)(eT,{term:e})},e))})})]}):(0,r.jsx)(r.Fragment,{}),t.related.length?(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{children:"Related Terms"}),(0,r.jsx)(ey.Z,{sx:n,children:(0,r.jsx)(u.Z,{sx:{p:0},children:t.related.map(e=>(0,r.jsx)(x.ZP,{sx:{p:0},children:(0,r.jsx)(eT,{term:e})},e))})})]}):(0,r.jsx)(r.Fragment,{}),a&&t.synsets.length?(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{children:"Senses"}),(0,r.jsx)(ey.Z,{sx:n,children:(0,r.jsx)(u.Z,{sx:{p:0},children:t.synsets.map(e=>(0,r.jsx)(x.ZP,{sx:{p:0},children:(0,r.jsx)(e_,{senseKey:a[e.index],info:e})},e.index))})})]}):(0,r.jsx)(r.Fragment,{})]})}function eT(e){let{term:t}=e,n=(0,l.useContext)(eI);return(0,r.jsx)(ek.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function eD(e){let{term:t}=e,n=(0,l.useContext)(ed),s=(0,l.useContext)(p);t in n||(n[t]=eu(t,s));let i=n[t];return"fixed"===i.type?(0,r.jsx)(eM,{processed:i}):(0,r.jsx)(eA,{processed:i})}let eI=(0,l.createContext)(e=>{});function eR(e){let{term:t}=e,n=(0,l.useContext)(et),s=(0,l.useContext)(en),i=t in n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{sx:{overflowY:"auto",pb:0,pt:0},children:(0,r.jsx)(eD,{term:t})}),(0,r.jsx)(R.Z,{sx:{justifyContent:"flex-end",mt:"auto"},children:(0,r.jsx)(W.Z,{onClick:()=>{s(i?{type:"remove",term:t}:{type:"add",term:t,term_type:"fixed"})},children:i?"Remove":"Add"})})]})}function eW(e){let{info:t}=e;return(0,r.jsx)(D.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,r.jsx)(eN,{info:t})})}function eJ(e){let{state:t,edit:n}=e;if(!t.length)return;let s=()=>n({type:"reset"}),i=t[0];return(0,r.jsx)(A.ZP,{open:""!==i.value,onClose:s,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:J,display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,r.jsxs)(M.Z,{children:[(0,r.jsx)(T.Z,{action:(0,r.jsx)(F.Z,{"aria-label":"Close info drawer",onClick:s,className:"close-button",children:(0,r.jsx)(z.Z,{})}),title:(0,r.jsxs)(d.Z,{direction:"row",children:[t.length>1?(0,r.jsx)(W.Z,{onClick:()=>n({type:"back"}),sx:{opacity:.7},children:t[1].value}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(h.Z,{variant:"h4",children:i.value})]})}),"term"===i.type?(0,r.jsx)(eR,{term:i.value}):(0,r.jsx)(eW,{info:i.info})]})})}var eL=n(8938),eK=n(1664),e$=n(9540),eB=n(880),eH=n(6500),eY=n(4989),eq=n(9742),eV=n(4081),eU=n(819),eG=n(5843),eX=n(1101),eQ=n(9394),e0=n(1797),e1=n(6337),e2=n(2834);let e5=(0,eG.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),e3=/\\t/,e9=/^\s+|\s+$/g,e4=/^["\s]+|["\s]+$/g,e8=/\t+/g;function e6(e,t){return{added:Date.now(),type:"fixed",categories:e,sense:t||""}}function e7(){let e=(0,eX.Z)(),t=(0,l.useContext)(ee),[n,s]=(0,l.useState)(""),[i,a]=(0,l.useState)(!1),o=()=>a(!i),[c,h]=(0,l.useState)(""),u=()=>{s(""),h("")},x=()=>{n&&(t({type:"add",name:n,dict:function(e){let t={};if(e)try{if("%"===e[0]){let n=e.split("\n"),r={},s=n.length;if(s>1){let e=1;for(e=1;e<s;e++){let t=n[e].replace(e9,"");if("%"===t)break;let s=t.split(e8);s.length>1&&s[1]&&(r[s[0]]=s[1])}for(e++;e<s;e++){let s=n[e].replace(e9,"").split(e8);if(s.length>1){let e=s.splice(0,1)[0].toLowerCase();if(e){let n={};s.forEach(e=>{e in r&&(n[r[e]]=1)}),t[e]=e6(n)}}}}}else if("{"===e[0]){let n=JSON.parse(e);Object.keys(n).forEach(e=>{if(e){let r=n[e];Array.isArray(r)?r.forEach(n=>{(n=n.toLowerCase())&&(n in t?t[n].categories[e]=1:t[n]=e6({[e]:1}))}):Object.keys(r).forEach(n=>{(n=n.toLowerCase())&&(n in t?t[n].categories[e]=r[n]:t[n]=e6({[e]:r[n]}))})}})}else{let n=e.split("\n"),r=e3.test(n[0])?"\\t":",",s=n.splice(0,1)[0].split(r).map(e=>e.replace(e4,""));s.splice(0,1),n.forEach(e=>{let n=e.split(r),i=n.splice(0,1)[0].toLowerCase().replace(e4,"");if(i){let e={};n.forEach((t,n)=>{t&&s[n]&&(e[s[n]]=+t)}),t[i]=e6(e)}})}}catch(e){}return t}(c)}),u(),o())};return(0,l.useEffect)(()=>{window.addEventListener("drop",e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],r=new FileReader;r.onload=()=>{n||s(N(t.name)),h(r.result)},r.readAsText(t)}})},[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{variant:"contained",onClick:o,children:"New"}),(0,r.jsxs)(eQ.Z,{open:i,onClose:o,children:[(0,r.jsx)(e0.Z,{children:"Add Dictionary"}),(0,r.jsx)(F.Z,{"aria-label":"close import menu",onClick:o,sx:{position:"absolute",right:8,top:12,color:e.palette.grey[500]},children:(0,r.jsx)(z.Z,{})}),(0,r.jsx)(e1.Z,{sx:{p:1},children:(0,r.jsxs)(d.Z,{spacing:1,children:[(0,r.jsx)(I.Z,{size:"small",label:"name",value:n,onKeyDown:e=>{n&&"Enter"===e.code&&x()},onChange:e=>{s(e.target.value)}}),(0,r.jsx)("textarea",{style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"nowrap",minWidth:"30em",minHeight:"20em"},value:c,onChange:e=>{h(e.target.value)},placeholder:"drag and drop a file, or enter content directly"})]})}),(0,r.jsxs)(e2.Z,{sx:{justifyContent:"space-between"},children:[(0,r.jsxs)(d.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(W.Z,{variant:"outlined",component:"label",children:["File",(0,r.jsx)(e5,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],r=new FileReader;r.onload=()=>{n||s(N(t.name)),h(r.result)},r.readAsText(t)}}})]}),(0,r.jsx)(W.Z,{onClick:u,children:"clear"})]}),(0,r.jsx)(W.Z,{variant:"contained",onClick:x,children:"Add"})]})]})]})}function te(){let e=(0,eX.Z)(),t=(0,l.useContext)(G),n=(0,l.useContext)(Q)[t],[s,i]=(0,l.useState)(!1),a=()=>i(!s),[o,c]=(0,l.useState)("dic"),[h,u]=(0,l.useState)(","),[x,m]=(0,l.useState)(t),[p,g]=(0,l.useState)("unweighted"),y=(0,l.useMemo)(()=>s?function(e,t,n,r){switch(t){case"csv":let s=Object.keys(e),i=new Set;s.forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>i.add(e))});let a=Array.from(i),l=new Map(a.map((e,t)=>[t,e]));return'"term"'+n+'"'+a.join('"'+n+'"')+'"\n'+s.map(t=>{let r=e[t].categories,s='"'+t+'"';return l.forEach(e=>{s+=n+(e in r?r[e]:"")}),s}).join("\n");case"dic":let o={},c=0,d="";return Object.keys(e).forEach(t=>{let n=e[t].categories;if(n){let e=[t];Object.keys(n).forEach(t=>{t in o||(o[t]=++c),e.push(o[t])}),d+="\n"+e.join("	")}}),"%\n"+Object.keys(o).map(e=>o[e]+"	"+e).join("\n")+"\n%"+d;case"json":if("full"===r)return JSON.stringify(e,void 0,2);let h={};if(Object.keys(e).forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>{e in h||(h[e]={}),h[e][t]=n[e]})}),"weighted"===r)return JSON.stringify(h,void 0,2);let u={};return Object.keys(h).forEach(e=>{u[e]=Object.keys(h[e])}),JSON.stringify(u,void 0,2);default:return""}}(n,o,h,p):"",[s,n,o,h,p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{variant:"contained",onClick:a,children:"Export"}),s&&(0,r.jsxs)(eQ.Z,{open:s,onClose:a,children:[(0,r.jsx)(e0.Z,{children:"Export Dictionary"}),(0,r.jsx)(F.Z,{"aria-label":"close export menu",onClick:a,sx:{position:"absolute",right:8,top:12,color:e.palette.grey[500]},children:(0,r.jsx)(z.Z,{})}),(0,r.jsx)(e1.Z,{sx:{p:1},children:(0,r.jsxs)(d.Z,{spacing:1,children:[(0,r.jsx)(I.Z,{size:"small",label:"name",value:x,onChange:e=>{m(e.target.value)}}),(0,r.jsx)("textarea",{style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"nowrap",minWidth:"30em",minHeight:"20em"},value:y,onChange:()=>{}})]})}),(0,r.jsxs)(e2.Z,{sx:{justifyContent:"space-between"},children:[(0,r.jsxs)(d.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(eV.Z,{children:[(0,r.jsx)(eU.Z,{children:"Format"}),(0,r.jsxs)(em.Z,{label:"Format",size:"small",value:o,onChange:e=>{c(e.target.value)},children:[(0,r.jsx)(ep.Z,{value:"dic",children:".dic"}),(0,r.jsx)(ep.Z,{value:"json",children:".json"}),(0,r.jsx)(ep.Z,{value:"csv",children:".csv"})]})]}),"csv"===o?(0,r.jsx)(I.Z,{sx:{maxWidth:"5em"},size:"small",label:"Separator",value:h,onChange:e=>{u(e.target.value)}}):(0,r.jsx)(r.Fragment,{})," ","json"===o?(0,r.jsxs)(eV.Z,{children:[(0,r.jsx)(eU.Z,{children:"Type"}),(0,r.jsxs)(em.Z,{label:"Type",size:"small",value:p,onChange:e=>{g(e.target.value)},children:[(0,r.jsx)(ep.Z,{value:"weighted",children:"Weighted"}),(0,r.jsx)(ep.Z,{value:"unweighted",children:"Unweighted"}),(0,r.jsx)(ep.Z,{value:"full",children:"Full"})]})]}):(0,r.jsx)(r.Fragment,{})]}),(0,r.jsx)(W.Z,{variant:"contained",onClick:()=>{if(x&&y){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([y],{type:"text/plain"}))),e.setAttribute("download",x+"."+("csv"===o?"	"===h?"tsv":","===h?"csv":"txt":o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}function tt(){let[e,t]=(0,l.useState)(!1),n=()=>t(!e),s=(0,l.useContext)(Q),i=(0,l.useContext)(ee),a=(0,l.useContext)(G),o=Object.keys(s),c=(0,l.useContext)(er),m=(0,l.useContext)(es),p=(0,l.useContext)(en),[g,y]=(0,l.useState)(""),f=()=>{g&&-1===c.indexOf(g)&&(m({type:"add",cat:g}),y(""))},j=(0,l.useMemo)(()=>c.map(e=>(0,r.jsxs)(x.ZP,{sx:{p:0},children:[(0,r.jsx)(H.Z,{primary:e}),(0,r.jsx)(F.Z,{"aria-label":"delete category",sx:{opacity:.5},onClick:()=>{p({type:"remove_category",name:e}),m({type:"remove",cat:e})},children:(0,r.jsx)(eK.Z,{})})]},e)),[c,p,m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{variant:"text",sx:{fontWeight:"bold"},onClick:n,children:a}),(0,r.jsx)(A.ZP,{anchor:"left",open:e,onClose:n,children:(0,r.jsxs)(M.Z,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,r.jsx)(T.Z,{title:(0,r.jsx)(h.Z,{fontWeight:"bold",children:"Dictionary Menu"}),action:(0,r.jsx)(F.Z,{onClick:n,"aria-label":"close dictionary menu",className:"close-button",children:(0,r.jsx)(z.Z,{})})}),(0,r.jsxs)(d.Z,{direction:"row",sx:{mb:2},children:[(0,r.jsxs)(eV.Z,{fullWidth:!0,children:[(0,r.jsx)(eU.Z,{children:"Current"}),(0,r.jsx)(em.Z,{label:"Current",size:"small",value:a,onChange:e=>{i({type:"set",name:e.target.value,dict:s[e.target.value]})},children:o.map(e=>(0,r.jsx)(ep.Z,{value:e,children:e},e))})]}),(0,r.jsx)(e7,{})]}),(0,r.jsx)(D.Z,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,r.jsxs)(d.Z,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,r.jsxs)(M.Z,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(T.Z,{title:(0,r.jsx)(h.Z,{fontWeight:"bold",children:"Categories"}),sx:{pb:0}}),(0,r.jsx)(D.Z,{sx:{pt:0,pb:0,mb:"auto",overflowY:"auto"},children:(0,r.jsx)(u.Z,{children:j})}),(0,r.jsx)(R.Z,{children:(0,r.jsxs)(d.Z,{direction:"row",children:[(0,r.jsx)(I.Z,{size:"small",value:g,onKeyDown:e=>{"Enter"===e.code&&f()},onChange:e=>{y(e.target.value)}}),(0,r.jsx)(W.Z,{onClick:f,children:"Add"})]})})]}),(0,r.jsx)(U,{})]})}),(0,r.jsx)(R.Z,{children:(0,r.jsxs)(d.Z,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,r.jsx)(te,{}),(0,r.jsx)(W.Z,{fullWidth:!0,variant:"outlined",color:"error",onClick:()=>{i({type:"delete",name:a})},children:"Delete"})]})})]})})]})}function tn(e){let{terms:t,exists:n,add:s}=e,[i,a]=(0,l.useState)(""),[o,c]=(0,l.useState)(!1),[h,u]=(0,l.useState)([]),[m,g]=(0,l.useState)(!1),y=(0,l.useContext)(eI),{collapsedTerms:f}=(0,l.useContext)(p),Z=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:i:i;if(t&&!n(t)){if(m){let e=t;try{e=new RegExp(e)}catch(e){}s(e,"regex")}else s(t,"fixed");u([]),a("")}},b=e=>{let t=e.target;if(t&&"value"in t){let e=t.value.toLowerCase();c(n(e)),a(e)}};return(0,r.jsx)(eH.Z,{component:"nav",children:(0,r.jsxs)(eY.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,r.jsx)(tt,{}),(0,r.jsxs)(d.Z,{direction:"row",sx:{width:"calc(min(500px, 50%))"},spacing:1,children:[(0,r.jsx)(eq.Z,{options:h,value:i,onKeyUp:e=>{let n="value"in e.target?e.target.value:"";if("Enter"===e.code&&(!n||n===i))return Z(i);if(n!==i&&b(e),t){let e=[];if(i&&f){let t;try{t=RegExp(m?E(i):j.test(i)?C(i):";"+i+"[^;]*;","g")}catch(e){t=RegExp(";"+i.replace(v,"\\%&")+";","g")}_(t,f,e,100)}u(e)}},onChange:b,renderOption:(e,t)=>(0,l.createElement)(x.ZP,{...e,key:t,onClick:Z},t),renderInput:e=>(0,r.jsx)(I.Z,{...e,size:"small",placeholder:"term to add",value:i,onChange:b,error:o}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,r.jsx)(eg.Z,{title:"regular expression characters are "+(m?"active":"escaped"),children:(0,r.jsx)(F.Z,{"aria-label":"toggle regular expression",onClick:()=>g(!m),children:m?(0,r.jsx)(e$.Z,{}):(0,r.jsx)(eB.Z,{})})}),(0,r.jsx)(W.Z,{variant:"outlined",disabled:!i,onClick:()=>{i&&y({type:"add",state:{type:"term",value:i}})},children:"View"}),(0,r.jsx)(W.Z,{variant:"contained",onClick:()=>Z(),disabled:!i||o,children:"Add"})]}),(0,r.jsx)($,{})]})})}(0,eG.ZP)("a")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});var tr=n(4237),ts=n(1027),ti=n(2750),ta=n(182),tl=n(8444);function to(e){let{term:t,processedTerms:n,dict:s,close:i,categories:a,editor:o,bottomMargin:c}=e,[u,x]=(0,l.useState)(!1);if(!t||!(t in n)||!(t in s))return(0,r.jsx)(r.Fragment,{});let m=n[t],p=s[t],g=p.categories,y=[];return a.forEach(e=>{(u||e in g)&&y.push({id:e,from_term_editor:g[e]||"",dictEntry:p,processed:m})}),(0,r.jsx)(ey.Z,{sx:{position:"absolute",top:0,bottom:0,left:0,width:L,mt:"3em",mb:c},children:(0,r.jsxs)(M.Z,{sx:{height:"100%",pb:"2.5em"},elevation:1,children:[(0,r.jsx)(T.Z,{action:(0,r.jsx)(F.Z,{"aria-label":"Close term editor",onClick:()=>i(""),className:"close-button",children:(0,r.jsx)(z.Z,{})}),title:(0,r.jsx)(h.Z,{fontWeight:"bold",sx:{whiteSpace:"nowrap"},children:(0,r.jsx)(eT,{term:m.term})})}),(0,r.jsx)(D.Z,{sx:{p:.5,height:"100%"},children:(0,r.jsxs)(d.Z,{direction:"column",sx:{height:"100%"},children:[(0,r.jsxs)(eV.Z,{sx:{mb:3},children:["fuzzy"!==m.type&&m.synsets.length?(0,r.jsx)(eU.Z,{sx:{mt:"-7px"},children:"Sense"}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(eF,{label:"Sense",id:"",field:"",processed:m})]}),(0,r.jsxs)(d.Z,{direction:"column",spacing:1,sx:{height:"100%"},children:[(0,r.jsx)(h.Z,{fontWeight:"bold",children:"Category Weights"}),(0,r.jsx)(ta.Z,{sx:{width:"100%"},control:(0,r.jsx)(tl.Z,{size:"small",checked:u,onChange:()=>x(!u)}),label:(0,r.jsx)(h.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,r.jsx)(ts._$,{sx:{"& .MuiToolbar-root":{p:0},"& .MuiDataGrid-main":{height:0},"& .MuiTablePagination-displayedRows":{m:0},"& .MuiTablePagination-actions":{m:0}},rows:y,columns:[{field:"id",headerName:"Name",width:110},{field:"from_term_editor",headerName:"Weight",width:65,editable:!0,hideable:!1,valueParser:(e,t)=>{let n=+e||"";return t&&o(n,t),n}}],disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&o(0,e)}})]})]})})]})})}function tc(e,t){return t.dictEntry.added-e.dictEntry.added}let td=/^category_/;function th(e){let{drawerOpen:t}=e,n=(0,l.useContext)(p),s=(0,l.useContext)(et),i=(0,l.useContext)(er),a=(0,l.useContext)(ed),o=(0,l.useContext)(en),c=Object.keys(s).reverse(),d=(0,l.useCallback)((e,t)=>{let{field:n,row:r}=t,{processed:s,dictEntry:i}=r;if(n&&("from_term_editor"===n||n.startsWith("category_"))){let t={...i.categories},a="from_term_editor"===n?r.id:n.replace(td,"");a in t&&!e?delete t[a]:e&&(t[a]=e),o({type:"update",term:s.term,term_type:s.term_type,categories:t})}},[o]),u=(0,tr.A)(),x=(0,l.useMemo)(()=>{let e=[{field:"",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,r.jsx)(F.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{o({type:"remove",term:e.id})},children:(0,r.jsx)(eK.Z,{sx:{fontSize:".9em"}})})},{field:"id",headerName:"Term",renderCell:e=>(0,r.jsx)(eT,{term:e.value})},{field:"sense",headerName:"Sense",editable:!0,renderEditCell:e=>(0,r.jsx)(eF,{id:e.id,field:e.field,processed:e.row.processed,gridApi:u})},{field:"frequency",headerName:"Frequency"},{field:"matches",headerName:"Matches"},{field:"senses",headerName:"Senses"},{field:"related",headerName:"Related"}];return i.forEach(t=>e.push({field:"category_"+t,headerName:t,editable:!0,valueParser:(e,t)=>{let n=+e||"";return t&&d(n,t),n}})),e},[i,o,d,u]),m=(0,l.useMemo)(()=>{let e=Array(c.length);return n.termAssociations&&n.synsetInfo&&c.forEach((t,r)=>e[r]=function(e,t,n,r){e in t||(t[e]=eu("regex"===r[e].type?new RegExp(e):e,n));let s=t[e],i=r[e],a="fixed"===s.type?{processed:s,dictEntry:i,id:e,sense:i.sense,matches:s.recognized?1:0,frequency:k(s.index,n.terms&&n.terms.length),senses:s.synsets.length,related:s.related.length}:{processed:s,dictEntry:i,id:e,sense:i.sense,matches:s.matches.length};if(i.categories){let e=i.categories;Object.keys(e).forEach(t=>{a["category_"+t]=e[t]})}return a}(t,a,n,s)),e.sort(tc)},[c,n,s,a]),g=t?J:0,[y,f]=(0,l.useState)("");return!y||y in a&&y in s||f(""),(0,r.jsxs)(eL.Z,{children:[(0,r.jsx)(tn,{terms:n.terms,exists:e=>e in s,add:(e,t)=>{o({type:"add",term:e,term_type:t})}}),(0,r.jsx)(to,{term:y,processedTerms:a,dict:s,close:f,categories:i,editor:d,bottomMargin:g}),(0,r.jsx)(ey.Z,{component:"main",sx:{position:"absolute",top:0,right:0,bottom:0,left:y?L:0,overflowY:"auto",mt:"3em",mb:g},children:c.length?(0,r.jsx)(ts._$,{rows:m,columns:x,showCellVerticalBorder:!0,disableDensitySelector:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:ti.T},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&d(0,e)},onRowClick:e=>{let{row:t}=e;f(t.id)}}):(0,r.jsx)(h.Z,{align:"center",children:"Add terms, or import an existing dictionary."})})]})}let tu=(0,s.Z)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}}),tx=(e,t)=>{switch(t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function tm(){let[e,t]=(0,l.useReducer)(tx,[]);return(0,r.jsx)(l.StrictMode,{children:(0,r.jsxs)(i.Z,{theme:tu,children:[(0,r.jsx)(a.ZP,{}),(0,r.jsx)(y,{children:(0,r.jsx)(ex,{children:(0,r.jsxs)(eI.Provider,{value:t,children:[(0,r.jsx)(th,{drawerOpen:!!e.length}),(0,r.jsx)(eJ,{state:e,edit:t})]})})})]})})}}},function(e){e.O(0,[547,971,938,744],function(){return e(e.s=69)}),_N_E=e.O()}]);