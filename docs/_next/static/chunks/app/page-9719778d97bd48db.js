(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{88284:function(e,t,n){Promise.resolve().then(n.bind(n,46531))},32261:function(e,t,n){"use strict";n.d(t,{V:function(){return j},Z:function(){return Z}});var s=n(57437),r=n(60335),i=n(91326),a=n(88929),l=n(80511),o=n(64593),c=n(99128),d=n(2265),u=n(71268),h=n(53355),m=n(93853),x=n(54964),p=n(87339),f=n(64817),g=n(56002),y=n(47810);let j={dictionary:0,comparisons:0};function b(e,t){return t.dictEntry.added-e.dictEntry.added}function Z(e){let{editFromEvent:t}=e,n=(0,d.useContext)(m.IO),j=(0,d.useContext)(x.Z7),Z=(0,d.useContext)(x.SZ),v=(0,d.useCallback)(e=>Z.includes(e),[Z]),C=(0,d.useContext)(x.EN),w=(0,d.useMemo)(()=>Object.freeze(Object.keys(j).map(e=>j[e].term||e).sort()),[j]),_=(0,d.useMemo)(()=>{let e=[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsx)(r.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{C({type:"remove",term_id:e.id})},children:(0,s.jsx)(u.Z,{sx:{fontSize:".9em"}})})},{field:"term",headerName:"Term",renderCell:e=>(0,s.jsx)(h.IJ,{term:e.value})},{field:"sense",headerName:"Sense",description:"assigned sense key",editable:!0,renderEditCell:e=>(0,s.jsx)(h.m1,{id:e.id,field:e.field,processed:e.row.processed,editCell:e.api.setEditCellValue})},{field:"frequency",headerName:"Frequency",description:"relative frequency; 100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage"},{field:"matches",headerName:"Matches",description:"number of matches found in the full term list"},{field:"senses",headerName:"Senses",description:"number of directly associated senses"},{field:"related",headerName:"Related",description:"number of similar terms on record, based on agreement between embeddings spaces"},{field:"ncats",headerName:"Categories",description:"number of categories the term has weight in"}];return Z.forEach(n=>e.push({field:"category_"+n,headerName:n,editable:!0,valueParser:(e,n,s)=>{let r=+e||"";return s&&t(r,{...n,field:s.field}),r}})),e},[Z,t]),[k,S]=(0,d.useState)([]),[E,O]=(0,d.useState)(0),N=(0,d.useMemo)(()=>{if(w.length<1e3)return!1;let e=k.map(e=>{let{id:t}=e;return t}).sort();return!(2>Math.abs(e.length-w.length))&&e.join()!==w.join()},[k,w]);(0,d.useEffect)(()=>{n.termAssociations&&n.synsetInfo&&(0,p.Ao)(j,n,N?O:void 0).then(e=>{S(e.sort(b)),N&&O(0)})},[j,n,N]);let[z,P]=(0,d.useState)("");return(0,s.jsxs)(i.Z,{component:"main",sx:{height:"100%"},children:[w.length&&(N||k.length)?N?(0,s.jsx)(o.Z,{open:N,sx:{alignItems:"baseline"},children:(0,s.jsxs)(a.Z,{sx:{textAlign:"center",mt:12},children:[(0,s.jsx)(l.Z,{variant:"h4",children:"Processing Dictionary"}),(0,s.jsx)(c.Z,{variant:"determinate",value:100*E}),(0,s.jsx)(l.Z,{variant:"caption",children:E?Math.round(100*E)+"%":"preparing..."})]})}):(0,s.jsx)(g.iA,{rows:k,columns:_,isCategory:v,setEditCategory:P,editFromEvent:t}):(0,s.jsxs)(a.Z,{sx:{p:3},children:[(0,s.jsx)(l.Z,{align:"center",children:"Add terms, or import an existing dictionary."}),(0,s.jsx)(i.Z,{sx:{m:"auto",p:1},children:(0,s.jsx)(y.g,{children:"Import"})})]}),(0,s.jsx)(f.Q,{category:z,onClose:()=>P("")})]})}},28443:function(e,t,n){"use strict";n.d(t,{P:function(){return x},Z:function(){return f}});var s=n(57437),r=n(91326),i=n(88929),a=n(80511),l=n(99128),o=n(2265),c=n(87339),d=n(93853),u=n(54964),h=n(32261);let m=(0,n(57818).default)(()=>Promise.all([n.e(502),n.e(408)]).then(n.bind(n,94408)),{loadableGenerated:{webpack:()=>[94408]}});function x(e,t){return{lemma:+(e in t.lemma),lemma_related:+(e in t.lemma_related),lemma_synset:+(e in t.lemma_synset),related:+(e in t.related),related_lemma:+(e in t.related_lemma),related_related:+(e in t.related_related),related_synset:+(e in t.related_synset),synset:+(e in t.synset),synset_lemma:+(e in t.synset_lemma),synset_related:+(e in t.synset_related),synset_synset:+(e in t.synset_synset)}}async function p(e,t,n,s,r,i,a,l){clearTimeout(h.V.comparisons);let o=Object.keys(t),c=o.length;for(let r=0;e<c&&r<100;r++,e++){let r=t[o[e]];r.processed.lookup.map.forEach((e,i)=>{let a=r.term+"."+i,o=i+"."+r.term;if(r.term!==i&&!(a in s)&&!(o in s)&&i in t){s[a]=s[o]=!0;let e=function(e,t,n){if(!t.processed)return 0;let s=x(e.term,t.processed.lookup);return n?.35*s.lemma+.1*s.lemma_related+.001*s.lemma_synset+.25*s.related+.1*s.related_lemma+.001*s.related_related+.001*s.related_synset+.001*s.synset+.001*s.synset_lemma+.001*s.synset_related+.001*s.synset_synset:.35*s.lemma+.25*s.related+.001*s.synset}(r,t[i],l.dense);e>l.min_sim&&n.push({source:r.term,target:i,value:e,lineStyle:{width:.3+2*e,opacity:.35}})}})}i([e,c]),e<c?h.V.comparisons=setTimeout(()=>p(e,t,n,s,r,i,a,l),0):setTimeout(()=>{let e={},s=Object.values(t).map((t,n)=>(e[t.term]=n,{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,host:t.host||"",category:Object.keys(t.categories).sort((e,t)=>r[e]-r[t]),name:t.term,prop:1,value:0,symbolSize:10,itemStyle:{opacity:1},label:{show:!0}}));n.forEach(t=>{s[e[t.source]].value+=t.value,s[e[t.target]].value+=t.value});let i=0;s.forEach(e=>{let{value:t}=e;t>i&&(i=t)}),a({edges:n,nodes:s.map(e=>(e.prop=e.value/i,e.itemStyle={opacity:.6+.4*e.prop},e))})},0)}function f(e){let{allTerms:t,catCounts:n,selectedCategories:h,options:x,plotOptions:f}=e,g=(0,o.useContext)(d.IO),y=(0,o.useContext)(u.Z7),[j,b]=(0,o.useState)({edges:[],nodes:[]}),[Z,v]=(0,o.useState)([0,0]);return(0,o.useEffect)(()=>{let e=new Map(h.map((e,t)=>[t,e])),s={};t.forEach((t,n)=>{let r=!1,i={};if(e.forEach(e=>{(e in t.categories||"no categories"===e&&!Object.keys(t.categories).length)&&(r=!0,i[e]=t.categories[e])}),r){let e=(0,c.tt)(n,g,y,!0);"fixed"===e.type?n in s||(s[n]={term:n,categories:i,processed:e}):x.include_fuzzy&&e.matches.forEach(e=>{e in y||e in s||(s[e]={host:n,term:e,categories:i,processed:(0,c.tt)(e,g,{},!0)})})}}),p(0,s,[],{},n,v,b,x)},[y,g,x,h]),Z[0]<Z[1]?(0,s.jsx)(r.Z,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsx)(r.Z,{sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0,alignItems:"center",justifyContent:"center",textAlign:"center"},children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(a.Z,{variant:"h5",children:"Calculating Pairwise Similarities"}),(0,s.jsx)(l.Z,{variant:"determinate",value:Z[0]/Z[1]*100}),(0,s.jsx)(a.Z,{variant:"caption",children:Z[0]+" / "+Z[1]})]})})}):(0,s.jsx)(r.Z,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsx)(m,{nodes:j.nodes,edges:j.edges,options:f})})}},54964:function(e,t,n){"use strict";n.d(t,{$U:function(){return g},C4:function(){return j},EN:function(){return m},Hm:function(){return u},J6:function(){return c},Nc:function(){return S},SZ:function(){return x},Z7:function(){return h},_r:function(){return p},cl:function(){return _},dg:function(){return Z},p3:function(){return v},u_:function(){return C},uj:function(){return d},v$:function(){return y},xE:function(){return f}});var s=n(57437),r=n(2265),i=n(23471),a=n(87470),l=n(77129),o=n(93853);let c=(0,r.createContext)({selected:"default",dictionary_names:["default"],info_drawer_height:30,term_editor_width:200,use_db:!0}),d=(0,r.createContext)(e=>{}),u=(0,r.createContext)(e=>{}),h=(0,r.createContext)({}),m=(0,r.createContext)(e=>{}),x=(0,r.createContext)([]),p=(0,r.createContext)(e=>{}),f=(0,r.createContext)({edits:[],position:-1}),g=(0,r.createContext)(e=>{}),y=(0,r.createContext)(e=>{}),j=(0,r.createContext)(""),b=()=>async e=>{},Z=(0,r.createContext)((e,t)=>{}),v=(0,r.createContext)(async e=>{});function C(e,t){let n={};return Object.keys(t).forEach(s=>{let r=t[s];e.forEach(e=>{e in r.categories&&(n[s]=r)})}),n}let w={};function _(e){return e in w}function k(e,t){return e.toLowerCase()>t.toLowerCase()?1:-1}function S(e){let{children:t}=e,[n,C]=(0,r.useState)(""),[_,S]=(0,r.useState)(b),E=(e,t)=>{t?(C(e),S(t)):(C(""),S(b))},O=(0,r.useContext)(o.D4);(0,r.useEffect)(()=>{(0,l.Vt)(O,E)},[]);let[N,z]=(0,r.useState)((0,i.r)()),P=!!N.use_db,I=e=>{(0,l.x0)(e,t=>{R({type:"change_dict",name:e,dict:t})},E,P)},M=e=>{if("replace"===e.type){A(e.history);return}let t="clear"===e.type?[]:[...T.edits],n="clear"===e.type?-1:T.position;"remove"===e.type?t.pop():"clear"!==e.type&&(n>-1&&(t.splice(0,n+1),n=-1),e.entry.time||(e.entry.time=Date.now()),t.splice(0,0,e.entry)),t.length>1e3&&t.splice(1e3,t.length-999),N.disable_storage||(0,l.po)(N.selected,"dict_history_",{edits:t,position:n},P),A({edits:t,position:n})},[T,A]=(0,r.useState)({edits:[],position:-1}),F=e=>{"delete"===e.type?("default"!==e.name&&N.dictionary_names.splice(N.dictionary_names.indexOf(e.name),1),N.selected="default",z({...N}),(0,l.Li)(e.name,"dict_"),(0,l.Li)(e.name,"dict_history_"),(0,l.c)(e.name),I("default")):(N.dictionary_names.includes(e.name)||N.dictionary_names.push(e.name),N.selected=e.name,"set"===e.type?I(e.name):(N.disable_storage||(0,l.GM)(e.name,e.dict,P,e.password),"add"===e.type&&R({type:"change_dict",name:e.name,dict:e.dict}))),localStorage.setItem("dictionary_builder_settings",JSON.stringify(N))},[D,W]=(0,r.useReducer)((e,t)=>{let n=e;if("collect"===t.type){let s=new Set(t.reset?[]:e);Object.keys(t.dictionary).forEach(e=>{let n=t.dictionary[e];n&&n.categories&&Object.keys(n.categories).forEach(e=>s.add(e))}),n=Array.from(s).sort(k)}else"add"===t.type?e.includes(t.cat)||(n=[...e,t.cat].sort(k)):n=e.filter(e=>e!==t.cat);return e.length!==n.length||e.join("")!==n.join("")?n:e},[]),[L,R]=(0,r.useReducer)((e,t)=>{if("history_bulk"===t.type)return W({type:"collect",dictionary:t.dict,reset:!0}),F({type:"save",name:N.selected,dict:t.dict}),t.dict;if("change_dict"===t.type){var n;return n=t.dict,w={},Object.keys(n).forEach(e=>{let t=n[e],s=t.term||e;t.term=s,s in w?e!==s&&w[s].add(e):w[s]=new Set}),(0,l.td)(t.name,e=>M({type:"replace",history:e}),E,P),W({type:"collect",dictionary:t.dict,reset:!0}),t.dict}let s={...e};if("rename_category"===t.type){let e=0;Object.keys(s).forEach(n=>{let r=s[n];t.name in r.categories&&(e++,r.categories[t.name]&&(r.categories[t.newName]=r.categories[t.name]),delete r.categories[t.name])}),W({type:"remove",cat:t.name}),W({type:"add",cat:t.newName}),e&&M({type:"add",entry:{type:"rename_category",name:t.newName,originalName:t.name}})}else if("remove_category"===t.type){let e={},n=0;Object.keys(s).forEach(r=>{let i=s[r];t.name in i.categories&&(n++,i.categories[t.name]&&(e[r]=i.categories[t.name]),delete i.categories[t.name])}),n&&M({type:"add",entry:{type:"remove_category",name:t.name,weights:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in s&&(t.weights[e]?s[e].categories[t.name]=t.weights[e]:delete s[e].categories[t.name])}),M({type:"add",entry:t});else if("reweight_category"===t.type){let e={},n=0;Object.keys(s).forEach(r=>{let i=s[r];i.categories[t.name]!==t.weights[r]&&(n++,e[r]=i.categories[t.name]||0,t.weights[r]?i.categories[t.name]=t.weights[r]:delete i.categories[t.name])}),n&&M({type:"add",entry:{...t,originalWeights:e}})}else{if("remove"===t.type)delete s[t.term_id],M({type:"add",entry:{type:"remove_term",name:t.term_id,value:e[t.term_id]}});else{let n="string"==typeof t.term?t.term:t.term.source;t.term_id||("add"===t.type?n in w?(t.term_id=n+(w[n].size+1),w[n].add(t.term_id)):w[n]=new Set:t.term_id=n);let r=t.term_id||n,i=s[r]||{};if(s[r]={term:n,added:i.added||t.added||Date.now(),type:t.term_type||i.type||"fixed",categories:{...t.categories||i.categories||{}},sense:"sense"in t?t.sense||"":i.sense||""},"replace"===t.type){let n="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete s[n],M({type:"add",entry:{type:"replace_term",name:r,value:s[r],originalName:n,originalValue:e[n]}})}else if(r in e){let t;let n=e[r],i=s[r];if(n.sense&&i.sense!==n.sense)t={field:"sense",new:i.sense,original:n.sense};else{let e=[];Object.keys(i.categories).forEach(t=>{i.categories[t]!==n.categories[t]&&e.push({category:t,from:n.categories[t]||0,to:i.categories[t]||0})}),Object.keys(n.categories).forEach(t=>{t in i.categories||e.push({category:t,from:n.categories[t],to:0})}),e.length?t={field:"categories",edits:e}:i.sense!==n.sense&&(t={field:"sense",new:i.sense,original:n.sense})}t&&M({type:"add",entry:{type:"edit_term",name:r,value:t}})}else M({type:"add",entry:{type:"add_term",name:r,value:s[r]}})}W({type:"collect",dictionary:s})}return F({type:"save",name:N.selected,dict:s}),s},{});return(0,r.useEffect)(()=>{N.dictionary_names.includes(N.selected)||(N.selected="default"),I(N.selected)},[]),(0,s.jsx)(c.Provider,{value:N,children:(0,s.jsx)(d.Provider,{value:z,children:(0,s.jsx)(j.Provider,{value:n,children:(0,s.jsx)(Z.Provider,{value:E,children:(0,s.jsx)(v.Provider,{value:_,children:(0,s.jsx)(f.Provider,{value:T,children:(0,s.jsx)(g.Provider,{value:M,children:(0,s.jsx)(u.Provider,{value:F,children:(0,s.jsx)(h.Provider,{value:L,children:(0,s.jsx)(x.Provider,{value:D,children:(0,s.jsx)(m.Provider,{value:R,children:(0,s.jsx)(p.Provider,{value:W,children:(0,s.jsx)(y.Provider,{value:e=>{let t=Math.min(Math.max(-1,T.position+e),T.edits.length-1);if(t!==T.position){let e={...L},n={...T};(0,a.S)(t,n,e),M({type:"replace",history:n}),N.disable_storage||(0,l.po)(N.selected,"dict_history_",n,P),R({type:"history_bulk",dict:e})}},children:t})})})})})})})})})})})})})}},64817:function(e,t,n){"use strict";n.d(t,{Q:function(){return O}});var s=n(57437),r=n(19337),i=n(61096),a=n(80824),l=n(60335),o=n(66124),c=n(88929),d=n(23983),u=n(76548),h=n(80511),m=n(68038),x=n(74583),p=n(98784),f=n(92966),g=n(88857),y=n(2265),j=n(54964),b=n(87339),Z=n(93853),v=n(31655),C=n(85140),w=n(63742),_=n(79806),k=n(39169),S=n(28443);function E(e){let{name:t,current:n,edit:f}=e,g=(0,y.useContext)(Z.IO),{terms:E,collapsedTerms:O,termLookup:N}=g,z=(0,y.useContext)(j.Z7),P=(0,y.useMemo)(()=>{let e={};return Object.keys(z).forEach(t=>e[z[t].term||t]=!0),e},[z]),I=(0,y.useMemo)(()=>({all:";;"+Object.keys(P).join(";;")+";;"}),[P]),[M,T]=(0,y.useState)(!1),A=()=>T(!M),[F,D]=(0,y.useState)(!0),[W,L]=(0,y.useState)(!0),[R,q]=(0,y.useState)(!0),[K,B]=(0,y.useState)(!0),[H,$]=(0,y.useState)(1),[V,G]=(0,y.useState)(""),[J,U]=(0,y.useState)([]),[X,Y]=(0,y.useState)([]),Q=K?e=>N&&e in N:e=>e in P,ee=e=>{e&&!X.includes(e)&&Q(e)&&Y([...X,e])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{onClick:A,children:"Fill Weights"}),M&&(0,s.jsxs)(i.Z,{open:M,onClose:A,children:[(0,s.jsx)(a.Z,{children:"Category Weight Filler"}),(0,s.jsx)(l.Z,{"aria-label":"close category weight filler",onClick:A,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(o.Z,{sx:{minWidth:"300px",minHeight:"300px",p:1},children:(0,s.jsxs)(c.Z,{spacing:2,children:[(0,s.jsx)(v.Z,{title:W?"Weights will be similarity to the specified core terms":"Will use the specified value as the weight of all terms",placement:"right",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:W,onChange:()=>L(!W)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Similarity-based"}),labelPlacement:"start"})}),W&&E?(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(C.Z,{multiple:!0,disableCloseOnSelect:!0,options:J,onKeyUp:e=>{let t="value"in e.target?e.target.value:"";if(("Enter"===e.code||"NumpadEnter"===e.code)&&V&&(!t||t===V)){ee(t);return}if(E){let e=[];if(t&&O){let n;try{n=RegExp(k.AL.test(t)?(0,k.ZC)(t):";"+t+"[^;]*;","g")}catch(e){n=RegExp(";"+t.replace(k.mi,"\\%&")+";","g")}(0,b.gD)("",n,K?O:I,e,100)}X.forEach(t=>{e.includes(t)||e.push(t)}),U(e)}},value:X,onChange:(e,t)=>{1===Math.abs(t.length-X.length)&&Y([...t])},renderTags:(e,t)=>e.map((e,n)=>(0,y.createElement)(w.Z,{label:e,...t({index:n}),key:e})),renderInput:e=>(0,s.jsx)(d.Z,{...e,size:"small",label:"Core Terms",value:V,onChange:e=>{X.includes(e.target.value)||G(e.target.value)}}),filterOptions:e=>e,noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}),(0,s.jsxs)(_.Z,{sx:{m:0,justifyContent:"space-between"},children:[(0,s.jsx)(u.Z,{onClick:()=>{U([]),Y([])},children:"Clear"}),(0,s.jsx)(v.Z,{title:K?"Allowing any terms from the full list on record":"Allowing only terms included in the category",placement:"top",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:K,onChange:()=>{U([]),B(!K)}}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Allow any terms"}),labelPlacement:"top"})}),(0,s.jsx)(v.Z,{title:R?"Will rescaling similarities to be between 0 and 1":"Will display raw similarity values",placement:"top",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:R,onChange:()=>q(!R)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Scale"}),labelPlacement:"top"})})]})]}):(0,s.jsx)(d.Z,{fullWidth:!0,size:"small",label:"Value",value:H,onChange:e=>$(+e.target.value)}),(0,s.jsx)(v.Z,{title:F?"Will apply weight to all terms in the dictionary":"Will apply weight only to terms with weight in the current category",placement:"right",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:F,onChange:()=>D(!F)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Apply to all terms"}),labelPlacement:"start"})})]})}),(0,s.jsxs)(p.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(u.Z,{onClick:A,children:"Cancel"}),(0,s.jsx)(u.Z,{variant:"contained",onClick:()=>{let e={};if(W){let t=new Map;X.forEach(e=>{let n=(0,b.tt)(e,g,z,!0);"fixed"===n.type?t.set(e,n.lookup):n.matches.forEach(e=>{t.set(e,(0,b.tt)(e,g,z,!0).lookup)})});let s=[1/0,-1/0];if(Object.keys(F?P:n).forEach(n=>{let r=0;t.forEach(e=>{let t=(0,b.tt)(n,g,z);if("fixed"===t.type){let t=(0,S.P)(n,e);r+=1*(t.lemma||t.related||t.synset)+.1*(t.lemma_related||t.lemma_synset)+.01*(t.related_lemma||t.related_related||t.related_synset)+.001*(t.synset_lemma||t.synset_related||t.synset_synset)}else t.matches.forEach(t=>{let n=(0,S.P)(t,e);r+=1*(n.lemma||n.related||n.synset)+.1*(n.lemma_related||n.lemma_synset)+.01*(n.related_lemma||n.related_related||n.related_synset)+.001*(n.synset_lemma||n.synset_related||n.synset_synset)})}),R&&(s[0]>r&&(s[0]=r),s[1]<r&&(s[1]=r)),r&&(e[n]=r)}),R){let t=s[1]-s[0];Object.keys(e).forEach(n=>{e[n]=Math.max((e[n]-s[0])/t,1e-4)})}}else F?Object.keys(z).forEach(t=>e[t]=H):Object.keys(n).forEach(t=>{n[t]&&(e[t]=H)});let s=F?z:n,r={};Object.keys(s).forEach(t=>{if(t in e)r[t]=e[t];else if(F){let{term:n}=s[t];n&&n in e&&(r[t]=e[n])}}),f({type:"reweight_category",name:t,weights:r}),A()},children:"Fill"})]})]})]})}function O(e){let{category:t,onClose:n}=e,[v,C]=(0,y.useState)(!1),w=(0,y.useContext)(j.SZ),_=(0,y.useContext)(Z.IO),k=(0,y.useContext)(j.Z7),S=(0,y.useContext)(j._r),[O,N]=(0,y.useState)(t),[z,P]=(0,y.useState)(t);(0,y.useEffect)(()=>{P(t)},[t,P]),(0,y.useEffect)(()=>{N(z)},[z,N]);let I=(0,y.useContext)(j.EN),M=(0,y.useCallback)((e,n)=>{let{field:s,processed:r,dictEntry:i}=n;if(s){let s={...i.categories};t in s&&!e?delete s[t]:e&&(s[t]=+e),I({type:"update",term_id:n.id,term:r.term,term_type:r.term_type,categories:s})}},[I,t]),T=(0,y.useMemo)(()=>new Map(Object.keys(k).map((e,t)=>[t,e])),[k]),A=(0,y.useMemo)(()=>{let e={};return T.forEach(n=>{let{categories:s}=k[n];t in s&&(e[n]=s[t])}),e},[k,T,t]),F=(0,y.useMemo)(()=>{let e=[];return T.forEach(t=>{if(v||t in A){let n=k[t];e.push({id:t,term:n.term?n.sense&&t!==n.term?n.term+"@"+n.sense:n.term:t,weight:A[t]||"",dictEntry:n,processed:(0,b.tt)(t,_,k)})}}),e},[_,k,T,v,A]);return t&&w.includes(t)?(0,s.jsxs)(i.Z,{open:!!t,onClose:n,children:[(0,s.jsx)(a.Z,{children:"Category Editor"}),(0,s.jsx)(l.Z,{"aria-label":"close category editor",onClick:n,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(o.Z,{sx:{p:1,width:"400px",maxWidth:"100%",height:"500px"},children:(0,s.jsxs)(c.Z,{sx:{height:"100%"},children:[(0,s.jsxs)(c.Z,{direction:"row",children:[(0,s.jsx)(d.Z,{label:"Name",fullWidth:!0,value:O,onChange:e=>N(e.target.value),size:"small"}),O!==t&&(0,s.jsx)(u.Z,{variant:"contained",onClick:()=>{I({type:"rename_category",name:t,newName:O})},children:"Rename"})]}),(0,s.jsxs)(c.Z,{direction:"column",spacing:1,sx:{mt:2,height:"100%"},children:[(0,s.jsx)(h.Z,{fontWeight:"bold",children:"Term Weights"}),(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:v,onChange:()=>C(!v)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,s.jsx)(f._,{className:"bottom-search datagrid-vertical",rows:F,columns:[{field:"term",headerName:"Term"},{field:"weight",headerName:"Weight",editable:!0,hideable:!1,valueParser:(e,t,n)=>{let s=+e||"";return n&&M(s,{...t,field:n.field}),s}}],disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:()=>(0,s.jsx)(g.T,{sx:{width:"200px"}})},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&"view"===e.cellMode&&M(0,{...e.row,field:e.field})}})]})]})}),(0,s.jsx)(p.Z,{children:(0,s.jsxs)(c.Z,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[(0,s.jsx)(u.Z,{color:"error",variant:"contained",onClick:()=>{I({type:"remove_category",name:t}),S({type:"remove",cat:t}),n()},children:"Delete"}),(0,s.jsx)(E,{name:t,current:A,edit:I})]})})]}):(0,s.jsx)(s.Fragment,{})}},60460:function(e,t,n){"use strict";n.d(t,{I:function(){return m}});var s=n(57437),r=n(19337),i=n(76548),a=n(61096),l=n(80824),o=n(60335),c=n(66124),d=n(80511),u=n(98784),h=n(2265);function m(e){let{label:t,message:n,onConfirm:m}=e,[x,p]=(0,h.useState)(!1),f=()=>p(!x);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{fullWidth:!0,color:"error",onClick:f,children:t}),x&&(0,s.jsxs)(a.Z,{open:x,onClose:f,children:[(0,s.jsx)(l.Z,{children:"Confirm"}),(0,s.jsx)(o.Z,{"aria-label":"close confirmation dialog",onClick:f,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(d.Z,{children:n})}),(0,s.jsxs)(u.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(i.Z,{onClick:f,children:"Cancel"}),(0,s.jsx)(i.Z,{variant:"contained",color:"error",onClick:()=>{m(),f()},children:t})]})]})]})}},87470:function(e,t,n){"use strict";n.d(t,{A:function(){return v},S:function(){return Z}});var s=n(57437),r=n(7547),i=n(57300),a=n(47905),l=n(80511),o=n(70270),c=n(27573),d=n(88929),u=n(60335),h=n(94696),m=n(32184),x=n(82879),p=n(76548),f=n(2265),g=n(54964),y=n(21662),j=n(57079),b=n(24834);function Z(e,t,n){let s=t.position;if(e>t.position)for(s=Math.max(0,s);s<e+1;s++)t.edits[s]&&function(e,t){switch(e.type){case"add_term":delete t[e.name];return;case"remove_term":t[e.name]=e.value;return;case"replace_term":delete t[e.name],t[e.originalName]=e.originalValue;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.from?n.categories[e.category]=e.from:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.original;return;case"add_category":Object.keys(t).forEach(n=>{let s=t[n];Object.keys(s.categories).forEach(t=>{t in e.weights&&delete s.categories[t]})});return;case"remove_category":Object.keys(t).forEach(n=>{n in e.weights&&(t[n].categories[e.name]=e.weights[n])});return;case"reweight_category":Object.keys(t).forEach(n=>{e.originalWeights[n]?t[n].categories[e.name]=e.originalWeights[n]:delete t[n].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(n=>{let s=t[n];e.name in s.categories&&(s.categories[e.name]&&(s.categories[e.originalName]=s.categories[e.name]),delete s.categories[e.name])});return}}(t.edits[s],n);else for(s=Math.min(t.edits.length-1,s);s>e;s--)t.edits[s]&&function(e,t){switch(e.type){case"add_term":t[e.name]=e.value;return;case"remove_term":delete t[e.name];return;case"replace_term":delete t[e.originalName],t[e.name]=e.value;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.to?n.categories[e.category]=e.to:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.new;return;case"add_category":Object.keys(t).forEach(n=>{n in e.weights&&(t[n].categories[e.name]=e.weights[n])});return;case"remove_category":Object.keys(t).forEach(n=>{let s=t[n];s&&s.categories&&e.name in s.categories&&delete s.categories[e.name]});return;case"reweight_category":Object.keys(t).forEach(n=>{e.weights[n]?t[n].categories[e.name]=e.weights[n]:delete t[n].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(n=>{let s=t[n];e.originalName in s.categories&&(s.categories[e.originalName]&&(s.categories[e.name]=s.categories[e.originalName]),delete s.categories[e.originalName])});return}}(t.edits[s],n);t.position=e}function v(){let e=(0,f.useContext)(g.xE),t=(0,f.useContext)(g.$U),n=(0,f.useContext)(g.v$),Z=(0,f.useMemo)(()=>e.edits.map((t,o)=>(0,s.jsx)(r.ZP,{sx:{p:0},children:(0,s.jsx)(i.Z,{sx:{borderLeft:e.position>=o?"2px solid #fff":""},onClick:()=>n(o-e.position),children:(0,s.jsx)(a.Z,{sx:{m:0},primary:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsx)("span",{style:{opacity:".75"},children:t.type+": "}),t.name]}),"edit_term"===t.type?(0,s.jsx)(l.Z,{className:"code",sx:{wordBreak:"break-all"},children:"categories"===t.value.field?t.value.edits.map(e=>e.category+": "+e.from+" -> "+e.to).join("\n"):t.value.field+": "+t.value.original+" -> "+t.value.new}):"rename_category"===t.type?(0,s.jsxs)(l.Z,{className:"code",children:["From ",t.originalName]}):(0,s.jsx)(s.Fragment,{})]}),secondary:(0,s.jsx)(l.Z,{sx:{fontSize:".8em",opacity:.6},variant:"body2",children:t.time?new Date(t.time).toLocaleString():""})})})},o)),[e,n]);return(0,s.jsxs)(o.Z,{elevation:5,sx:{height:"60%",minHeight:"300px",position:"relative",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(c.Z,{title:(0,s.jsx)(l.Z,{fontWeight:"bold",children:"Edit History"}),sx:{pb:0}}),(0,s.jsxs)(d.Z,{direction:"row",sx:{position:"absolute",top:8,right:8},children:[(0,s.jsx)(u.Z,{onClick:()=>n(1),"aria-label":"undo",children:(0,s.jsx)(y.Z,{})}),(0,s.jsx)(u.Z,{onClick:()=>n(-1),"aria-label":"redo",children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(u.Z,{onClick:()=>n(-1e3),"aria-label":"jump to current",children:(0,s.jsx)(b.Z,{})})]}),(0,s.jsx)(h.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(m.Z,{sx:{overflowX:"hidden"},children:Z})}),(0,s.jsx)(x.Z,{children:(0,s.jsx)(p.Z,{variant:"contained",color:"warning",fullWidth:!0,onClick:()=>{t({type:"clear"})},children:"Clear"})})]})}},47810:function(e,t,n){"use strict";n.d(t,{g:function(){return R}});var s=n(57437),r=n(19337),i=n(60692),a=n(83607),l=n(48024),o=n(22960),c=n(76548),d=n(61096),u=n(80824),h=n(60335),m=n(66124),x=n(88929),p=n(23983),f=n(28549),g=n(18409),y=n(31655),j=n(68038),b=n(74583),Z=n(91326),v=n(98784),C=n(2265),w=n(54964),_=n(39169),k=n(32184),S=n(7547),E=n(57300),O=n(77129);function N(e){let{setName:t,setContent:n}=e,i=(0,C.useContext)(w.dg),a=(0,C.useContext)(w.J6),[l,o]=(0,C.useState)(!1),x=()=>o(!l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{title:"select an existing dictionary to import as a copy",children:(0,s.jsx)(c.Z,{variant:"outlined",onClick:x,children:"Copy"})}),l&&(0,s.jsxs)(d.Z,{open:l,onClose:x,children:[(0,s.jsx)(u.Z,{children:"Copy Dictionary"}),(0,s.jsx)(h.Z,{"aria-label":"close export menu",onClick:x,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(m.Z,{sx:{p:0},children:(0,s.jsx)(k.Z,{sx:{p:0,pb:2},children:a.dictionary_names.map(e=>(0,s.jsx)(S.ZP,{sx:{p:0},children:(0,s.jsx)(E.Z,{onClick:()=>(0,O.x0)(e,s=>{t(a.dictionary_names.includes(e+" Copy")?e+" Copy"+(1e4*Math.random()>>0):e+" Copy"),n(JSON.stringify(s,void 0,2)),x()},i,!!a.use_db),children:e})},e))})})]})]})}let z=(0,l.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),P=/\t/,I=/\s\s/,M=/^\s+|\s+$/g,T=/^["\s]+|["\s]+$/g,A=/\s{2,}|\t+/g,F=/[[({]/,D=/[\])}]/,W=/([\[\]\(\)?^$.+])/;function L(e,t,n,s,r){return{added:s,type:r&&function(e){if(!W.test(e))return!1;let t=F.test(e),n=D.test(e);return t&&n||!t&&!n}(e)?"regex":"fixed",categories:t,sense:n||"",term:e}}function R(e){let{children:t}=e,n=(0,o.Z)(),l=(0,C.useContext)(w.Hm),[k,S]=(0,C.useState)(""),[E,O]=(0,C.useState)(!1),F=()=>O(!E),[D,W]=(0,C.useState)(!1),[R,q]=(0,C.useState)(!1),[K,B]=(0,C.useState)(""),[H,$]=(0,C.useState)(""),[V,G]=(0,C.useState)(!0),J=()=>{S(""),B(""),$("")},U=()=>{k&&(l({type:"add",name:k,dict:function(e,t){let n=Date.now(),s={},r=e=>{let t=e;return e in s?(t+=s[e].size+1,s[e].add(t)):s[e]=new Set,t},i={};if(e)try{if("%"===e[0]){let s=e.split(_.SP),a={},l=s.length;if(l>1){let e=1;for(e=1;e<l;e++){let t=s[e].replace(M,"");if("%"===t)break;let n=t.split(A);n.length>1&&n[1]&&(a[n[0]]=n[1])}for(e++;e<l;e++){let o=s[e].replace(M,"").split(A);if(o.length>1){let s=o.splice(0,1)[0].toLowerCase();if(s){let c={};o.forEach(e=>{e in a&&(c[a[e]]=1)});let[d,u]=s.split("@");i[r(d)]=L(d,c,u,n+l-e,t)}}}}}else if("{"===e[0]){let s=JSON.parse(e),a=Object.keys(s);if(a.length&&"type"in s[a[0]]&&"string"==typeof s[a[0]].type)return s;let l=0;a.forEach(e=>{if(e){let a=s[e];Array.isArray(a)?(l+=a.length,a.forEach((s,a)=>{if(s){let[o,c]=s.toLowerCase().split("@"),d=r(o);d in i?i[d].categories[e]=1:i[d]=L(o,{[e]:1},c,n+l-a,t)}})):Object.keys(a).forEach((s,o)=>{if(l++,s){let[c,d]=s.toLowerCase().split("@"),u=r(c);u in i?i[u].categories[e]=a[s]:i[u]=L(c,{[e]:a[c]},d,n+l-o,t)}})}})}else{let s=e.split(_.SP),a=P.test(s[0])?"	":I.test(s[0])?"  ":",",l=s.splice(0,1)[0].split(a).map(e=>e.replace(T,""));l.splice(0,1);let o="term_sense"===l[0],c=s.length;s.forEach((e,s)=>{let d=e.split(a).map(e=>e.replace(T,"")),u=d.splice(0,1)[0].toLowerCase();if(u){let e="",a={};d.forEach((t,n)=>{if(t&&l[n]){let s=+t;!e&&(o&&0===n||isNaN(s))?e=t:a[l[n]]=+t}}),i[r(u)]=L(u,a,e,n+c-s,t)}})}}catch(e){}return i}(K,D),password:R?H:""}),J(),O(!1))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{variant:"outlined",onClick:F,children:t}),(0,s.jsxs)(d.Z,{open:E,onClose:F,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],n=new FileReader;n.onload=()=>{S((0,_.T9)(t.name)),B(n.result)},n.readAsText(t)}},children:[(0,s.jsx)(u.Z,{children:"Add Dictionary"}),(0,s.jsx)(h.Z,{"aria-label":"close import menu",onClick:F,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(m.Z,{sx:{p:1},children:(0,s.jsxs)(x.Z,{spacing:1,children:[(0,s.jsx)(p.Z,{size:"small",label:"Name",value:k,onKeyDown:e=>{(k&&"Enter"===e.code||"NumpadEnter"===e.code)&&U()},onChange:e=>{S(e.target.value)}}),(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(g.Z,{sx:{fontSize:".8em"},htmlFor:"import_content",children:"Import Content"}),(0,s.jsx)("textarea",{id:"import_content",style:{backgroundColor:n.palette.background.default,color:n.palette.text.primary,whiteSpace:K?"pre":"normal",minWidth:"30em",minHeight:"20em"},value:K,onChange:e=>{B(e.target.value)},placeholder:"drag and drop a file, or enter content directly; see export menu for format examples"})]}),(0,s.jsx)(y.Z,{title:"Attempt to convert terms to regular expressions if they contain special RegEx characters.",placement:"top",children:(0,s.jsx)(j.Z,{label:"Detect RegEx",labelPlacement:"start",control:(0,s.jsx)(b.Z,{checked:D,onChange:()=>W(!D)})})}),(0,s.jsx)(y.Z,{title:"Encrypt dictionary and history when being stored.",placement:"right",children:(0,s.jsx)(j.Z,{label:"Encrypt",labelPlacement:"start",control:(0,s.jsx)(b.Z,{checked:R,onChange:()=>q(!R)})})}),R?(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(p.Z,{fullWidth:!0,size:"small",label:"Password",type:V?"password":"text",value:H,onChange:e=>$(e.target.value)}),(0,s.jsx)(h.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>G(!V),children:V?(0,s.jsx)(i.Z,{}):(0,s.jsx)(a.Z,{})})]}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsxs)(v.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(x.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(N,{setName:S,setContent:B}),(0,s.jsx)(y.Z,{title:"select a file to import a dictionary from",children:(0,s.jsxs)(c.Z,{variant:"outlined",component:"label",children:["File",(0,s.jsx)(z,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],n=new FileReader;n.onload=()=>{S((0,_.T9)(t.name)),B(n.result),e.target.value=""},n.readAsText(t)}}})]})}),(0,s.jsx)(y.Z,{title:"clear current content",children:(0,s.jsx)(c.Z,{onClick:J,children:"clear"})})]}),(0,s.jsx)(c.Z,{variant:"contained",disabled:!!R&&!H||!k,onClick:U,children:"Add"})]})]})]})}},17872:function(e,t,n){"use strict";n.d(t,{VZ:function(){return _},l0:function(){return Z},qm:function(){return b}});var s=n(57437),r=n(94696),i=n(82879),a=n(76548),l=n(58438),o=n(70270),c=n(91326),d=n(27573),u=n(60335),h=n(88929),m=n(80511),x=n(2265),p=n(54964),f=n(53355),g=n(19337),y=n(56522),j=n(17671);let b=(0,x.createContext)([]),Z=(0,x.createContext)(e=>{});function v(e){let{term:t}=e,n=(0,x.useContext)(p.Z7),l=(0,x.useContext)(p.EN),o=t in n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{sx:{overflowY:"auto",pb:0,pt:0,height:"100%"},children:(0,s.jsx)(f.m7,{term:t})}),(0,s.jsx)(i.Z,{sx:{justifyContent:"flex-end",p:0},children:(0,s.jsx)(a.Z,{onClick:()=>{l(o?{type:"remove",term_id:t}:{type:"add",term:t,term_type:"fixed"})},children:o?"Remove":"Add"})})]})}function C(e){let{info:t}=e;return(0,s.jsx)(r.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,s.jsx)(y.gA,{info:t})})}let w=-1;function _(e){let{height:t,setHeight:n}=e,r=(0,x.useContext)(p.Z7),i=(0,x.useContext)(Z),f=(0,x.useContext)(p.J6),y=(0,x.useContext)(p.uj),_=(0,x.useContext)(j.Pq),k=(0,x.useContext)(b),S=(0,x.useCallback)(e=>{let s=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));s!==t&&(cancelAnimationFrame(w),w=requestAnimationFrame(()=>{n(s),window.dispatchEvent(new Event("resize"))}))},[n]),[E,O]=(0,x.useState)(!1),N=(0,x.useCallback)(e=>{O(!0),e.preventDefault(),document.body.style.cursor="ns-resize",window.addEventListener("mousemove",S)},[S]);if((0,x.useEffect)(()=>{let e=e=>{if(-1!==w){cancelAnimationFrame(w),O(!1),w=-1,document.body.style.cursor="default",window.removeEventListener("mousemove",S);let t=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));n(t),f.info_drawer_height=t,y({...f}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(f)),window.dispatchEvent(new Event("resize"))}};return window.addEventListener("mouseup",e),()=>window.removeEventListener("mouseup",e)},[S,f,y,n]),!k.length)return;let z=()=>{i({type:"reset"})},P=k[0];return P.value&&(0,s.jsx)(l.ZP,{open:!0,onClose:z,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:t+"vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{sx:{width:"100%",backgroundColor:"#515151",height:"1px",position:"absolute",cursor:"ns-resize",border:E?"solid 2px #dab4ff":"","&:hover":{border:"solid 2px #dab4ff"}},onMouseDownCapture:N}),(0,s.jsx)(d.Z,{sx:{p:1},action:(0,s.jsx)(u.Z,{"aria-label":"Close info drawer",onClick:z,className:"close-button",children:(0,s.jsx)(g.Z,{})}),title:(0,s.jsxs)(h.Z,{direction:"row",children:[k.length>1?(0,s.jsx)(a.Z,{onClick:()=>i({type:"back"}),sx:{opacity:.8},children:k[1].value}):(0,s.jsx)(s.Fragment,{}),P.value in r?(0,s.jsx)(a.Z,{sx:{textTransform:"none",p:0},onClick:()=>_(P.value),children:(0,s.jsx)(m.Z,{variant:"h3",children:P.value})}):(0,s.jsx)(m.Z,{variant:"h3",children:P.value})]})}),"term"===P.type?(0,s.jsx)(v,{term:P.value}):(0,s.jsx)(C,{info:P.info})]})})}},40340:function(e,t,n){"use strict";async function s(e){let t=new Blob([JSON.stringify(e)]).stream().pipeThrough(new CompressionStream("gzip")).getReader(),n=[];for(;;){let{done:e,value:s}=await t.read();if(e)break;n.push(s)}return new Blob(n)}async function r(e){let t=e.stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(t).json()}n.d(t,{L:function(){return r},n:function(){return s}})},39169:function(e,t,n){"use strict";n.d(t,{AL:function(){return i},O$:function(){return u},OX:function(){return m},SP:function(){return s},T9:function(){return p},WR:function(){return l},ZC:function(){return c},ks:function(){return r},mi:function(){return a},tO:function(){return d}});let s=/[\r\n]+/,r=/\*/,i=/\*/g,a=/([\[\]\(\)*?^$.+])/g,l=/^;|;$/g,o=/([\[\]\(\)?^$.+])/g;function c(e){return";"+e.replace(o,"\\$&").replace(i,"[^;]*")+";"}function d(e,t){return e.length-t.length}function u(e,t){return t&&-1!==e?(1-e/t)*100:0}let h=/\./g;function m(e){return";"+e.replace(h,"[^;]")+";"}let x=/^.*[/\\]/;function p(e){return e.replace(x,"")}},46531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e_}});var s=n(57437),r=n(94444),i=n(81705),a=n(20124),l=n(2265),o=n(93853),c=n(54964),d=n(17872),u=n(17671),h=n(62197),m=n(91326),x=n(32261),p=n(53346),f=n(84311),g=n(71733),y=n(79806),j=n(88929),b=n(85140),Z=n(23983),v=n(31655),C=n(60335),w=n(76548),_=n(39169),k=n(23471),S=n(71268),E=n(6760),O=n(19337),N=n(7547),z=n(57300),P=n(47905),I=n(80511),M=n(58438),T=n(70270),A=n(27573),F=n(28549),D=n(67351),W=n(46849),L=n(11656),R=n(94696),q=n(32184),K=n(82879),B=n(47810),H=n(22960),$=n(61096),V=n(80824),G=n(66124),J=n(18409),U=n(98784),X=n(68038),Y=n(74583);let Q=/\.\w{3,4}$/i;function ee(){let e=(0,H.Z)(),t=(0,l.useContext)(c.J6),n=(0,l.useContext)(c.Z7),[r,i]=(0,l.useState)(!1),a=()=>i(!r),[o,d]=(0,l.useState)("dic"),[u,h]=(0,l.useState)("csv"),[m,x]=(0,l.useState)(t.selected),[p,f]=(0,l.useState)("unweighted"),[g,y]=(0,l.useState)(!1),b=(0,l.useMemo)(()=>r?function(e,t,n,s,r){switch(t){case"tabular":let i=function(e){switch(e){case"csv":return",";case"tsv":return"	";default:return"  "}}(n),a=new Set;Object.values(e).forEach(e=>{let t=e.categories;t&&Object.keys(t).forEach(e=>a.add(e))});let l=Array.from(a),o=new Map(l.map((e,t)=>[t,e]));return'"term"'+i+'"'+(r?'term_sense"'+i+'"':"")+l.join('"'+i+'"')+'"\n'+Object.keys(e).map(t=>{let n=e[t],s=n.categories,a='"'+(n.term||t)+'"';return r&&(a+=i+n.sense),o.forEach(e=>{a+=i+(e in s?s[e]:"")}),a}).join("\n");case"dic":let c={},d=0,u="";return Object.keys(e).forEach(t=>{let n=e[t],s=n.categories;if(s){let e=[n.term||t];r&&n.sense&&(e[0]+="@"+n.sense),Object.keys(s).forEach(t=>{t in c||(c[t]=++d),e.push(c[t])}),u+="\n"+e.join("	")}}),"%\n"+Object.keys(c).map(e=>c[e]+"	"+e).join("\n")+"\n%"+u;case"json":if("full"===s)return JSON.stringify(e,void 0,2);let h={};if(Object.keys(e).forEach(t=>{let n=e[t],s=n.categories;if(s){let e=n.term||t;r&&n.sense&&(e+="@"+n.sense),Object.keys(s).forEach(t=>{t in h||(h[t]={}),h[t][e]=s[t]})}}),"weighted"===s)return JSON.stringify(h,void 0,2);let m={};return Object.keys(h).forEach(e=>{m[e]=Object.keys(h[e])}),JSON.stringify(m,void 0,2);default:return""}}(n,o,u,p,g):"",[r,n,o,u,p,g]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{variant:"outlined",onClick:a,children:"Export"}),r&&(0,s.jsxs)($.Z,{open:r,onClose:a,children:[(0,s.jsx)(V.Z,{children:"Export Dictionary"}),(0,s.jsx)(C.Z,{"aria-label":"close export menu",onClick:a,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsx)(G.Z,{sx:{p:1},children:(0,s.jsxs)(j.Z,{spacing:1,children:[(0,s.jsx)(Z.Z,{size:"small",label:"Filename",value:m,onChange:e=>{x(e.target.value)}}),(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(J.Z,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,s.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:b,readOnly:!0})]})]})}),(0,s.jsxs)(U.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(j.Z,{direction:"row",spacing:1,children:["json"!==o||"full"!==p?(0,s.jsx)(X.Z,{sx:{transform:"translate(0, -10px)"},control:(0,s.jsx)(Y.Z,{size:"small",checked:g,onChange:()=>y(!g)}),label:(0,s.jsx)(I.Z,{variant:"caption",children:"Senses"}),labelPlacement:"top"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(D.Z,{id:"export_format",children:"Format"}),(0,s.jsxs)(W.Z,{labelId:"export_format",label:"Format",size:"small",value:o,onChange:e=>{d(e.target.value)},children:[(0,s.jsx)(L.Z,{value:"dic",children:"DIC"}),(0,s.jsx)(L.Z,{value:"json",children:"JSON"}),(0,s.jsx)(L.Z,{value:"tabular",children:"Tabular"})]})]}),"tabular"===o?(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(D.Z,{id:"export_separator",children:"Type"}),(0,s.jsxs)(W.Z,{labelId:"export_separator",label:"Type",size:"small",value:u,onChange:e=>{h(e.target.value)},children:[(0,s.jsx)(L.Z,{value:"csv",children:"CSV"}),(0,s.jsx)(L.Z,{value:"tsv",children:"TSV"}),(0,s.jsx)(L.Z,{value:"dat",children:"DAT"})]})]}):(0,s.jsx)(s.Fragment,{})," ","json"===o?(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(D.Z,{id:"export_json_type",children:"Type"}),(0,s.jsxs)(W.Z,{labelId:"export_json_type",label:"Type",size:"small",value:p,onChange:e=>{f(e.target.value)},children:[(0,s.jsx)(L.Z,{value:"weighted",children:"Weighted"}),(0,s.jsx)(L.Z,{value:"unweighted",children:"Unweighted"}),(0,s.jsx)(L.Z,{value:"full",children:"Full"})]})]}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsx)(w.Z,{variant:"contained",onClick:()=>{if(m&&b){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([b],{type:"text/plain"}))),e.setAttribute("download",m.replace(Q,"")+"."+("tabular"===o?u:o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var et=n(87470),en=n(60460),es=n(64817);function er(){let e=(0,l.useContext)(c.J6),[t,n]=(0,l.useState)(!1),r=()=>n(!t),[i,a]=(0,l.useState)(""),o=(0,l.useContext)(c.Hm),d=(0,l.useContext)(c.SZ),u=(0,l.useContext)(c._r),h=(0,l.useContext)(c.EN),[m,x]=(0,l.useState)(""),p=()=>{m&&-1===d.indexOf(m)&&(u({type:"add",cat:m}),x(""))},f=(0,l.useMemo)(()=>d.map(e=>(0,s.jsx)(N.ZP,{disablePadding:!0,disableGutters:!0,secondaryAction:(0,s.jsx)(C.Z,{"aria-label":"delete category",sx:{opacity:.5},onClick:()=>{h({type:"remove_category",name:e}),u({type:"remove",cat:e})},children:(0,s.jsx)(S.Z,{})}),children:(0,s.jsx)(z.Z,{dense:!0,onClick:()=>a(e),children:(0,s.jsx)(P.Z,{primary:e})})},e)),[d,h,u]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.Z,{direction:"row",children:[(0,s.jsx)(C.Z,{onClick:r,"aria-label":"open dictionary menu",children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)(I.Z,{sx:{display:{sm:"block",xs:"none"},fontSize:{md:"1.2em",sm:".8em"},maxWidth:{md:"285px",sm:"150px"},overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center"},noWrap:!0,children:e.selected})]}),t&&(0,s.jsx)(M.ZP,{anchor:"left",open:t,onClose:r,children:(0,s.jsxs)(T.Z,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(A.Z,{title:(0,s.jsx)(I.Z,{fontWeight:"bold",children:"Dictionary Menu"}),action:(0,s.jsx)(C.Z,{onClick:r,"aria-label":"close dictionary menu",className:"close-button",children:(0,s.jsx)(O.Z,{})})}),(0,s.jsxs)(j.Z,{direction:"row",sx:{mb:2},children:[(0,s.jsxs)(F.Z,{fullWidth:!0,children:[(0,s.jsx)(D.Z,{id:"dictionary_select",children:"Current"}),(0,s.jsx)(W.Z,{labelId:"dictionary_select",label:"Current",size:"small",value:e.selected,onChange:e=>{o({type:"set",name:e.target.value})},children:e.dictionary_names.map(e=>(0,s.jsx)(L.Z,{value:e,children:e},e))})]}),(0,s.jsx)(B.g,{children:"New"})]}),(0,s.jsx)(R.Z,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,s.jsxs)(j.Z,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,s.jsxs)(T.Z,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(A.Z,{title:(0,s.jsx)(I.Z,{fontWeight:"bold",children:"Categories"}),sx:{pb:0}}),(0,s.jsx)(R.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(q.Z,{dense:!0,children:f})}),(0,s.jsx)(K.Z,{children:(0,s.jsxs)(j.Z,{direction:"row",children:[(0,s.jsx)(Z.Z,{label:"New Category Name",size:"small",value:m,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,s.jsx)(w.Z,{variant:"contained",onClick:p,children:"Add"})]})})]}),(0,s.jsx)(et.A,{})]})}),(0,s.jsx)(K.Z,{children:(0,s.jsxs)(j.Z,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,s.jsx)(ee,{}),(0,s.jsx)(en.I,{label:"Delete",message:"Delete the "+e.selected+" dictionary?",onConfirm:()=>{o({type:"delete",name:e.selected})}})]})})]})}),(0,s.jsx)(es.Q,{category:i,onClose:()=>a("")})]})}var ei=n(87339),ea=n(56002);function el(e){let{terms:t,asTable:n,setAsTable:r,add:i}=e,[a,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[x,S]=(0,l.useState)(!1),[E,O]=(0,l.useState)([]),[N,z]=(0,l.useState)(!1),P=(0,l.useContext)(d.l0),{collapsedTerms:I}=(0,l.useContext)(o.IO),M=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:a:a;if(t){if(N){let e=t;try{e=new RegExp(e)}catch(e){}i(e,"regex")}else i(t,"fixed");O([]),u("")}},T=e=>{let t=e.target;if(t&&"value"in t&&"innerText"in t){let e=t["string"==typeof t.value?"value":"innerText"].toLowerCase();S((0,c.cl)(e)),u(e)}else u("")};return(0,s.jsx)(g.Z,{component:"nav",children:(0,s.jsxs)(y.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,s.jsx)(er,{}),(0,s.jsxs)(j.Z,{direction:"row",sx:{width:{sm:"calc(min(500px, 50%))",xs:"100%"}},spacing:{md:1,sm:0},children:[(0,s.jsx)(b.Z,{options:E,value:a,onHighlightChange:(e,t)=>m(t||""),onKeyUp:e=>{if(("Enter"===e.code||"NumpadEnter"===e.code)&&(!h||h===a))return M(a);h!==a&&T(e)},onChange:T,renderInput:e=>(0,s.jsx)(Z.Z,{...e,size:"small",placeholder:"Term Search",value:a,onChange:e=>{T(e);let n=e.target.value;if(t){let e=[];if(n&&I){let t;try{t=RegExp(N?(0,_.OX)(n):_.AL.test(n)?(0,_.ZC)(n):";"+n.replace(_.mi,"\\$&")+"[^;]*;","g")}catch(e){t=RegExp(";"+n.replace(_.mi,"\\$&")+";","g")}(0,ei.gD)("",t,I,e,100)}O(e)}},color:x?"warning":"primary"}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,s.jsx)(v.Z,{title:"regular expression characters are "+(N?"active":"escaped"),children:(0,s.jsx)(C.Z,{"aria-label":"toggle regular expression",onClick:()=>z(!N),children:N?(0,s.jsx)(p.Z,{}):(0,s.jsx)(f.Z,{})})}),(0,s.jsx)(w.Z,{sx:{width:"6.7em",display:{sm:"block",xs:"none"}},variant:"outlined",disabled:!a,onClick:()=>{a&&(P({type:"add",state:{type:"term",value:a}}),x&&(0,ea.l$)(a))},children:"View"}),(0,s.jsx)(w.Z,{variant:"contained",onClick:()=>M(),disabled:!a,children:"Add"})]}),(0,s.jsxs)(j.Z,{direction:"row",children:[(0,s.jsx)(w.Z,{variant:"outlined",sx:{width:{md:100,sm:70},p:{md:1,sm:0},display:{sm:"block",xs:"none"}},onClick:()=>r(!n),children:n?"Analyze":"Edit"}),(0,s.jsx)(k.T,{})]})]})})}var eo=n(60692),ec=n(83607);function ed(){let e=(0,l.useContext)(c.C4),t=(0,l.useContext)(c.p3),n=(0,l.useContext)(c.dg),r=(0,l.useContext)(c.Hm),[i,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!0),u=!1,h=()=>{a(!1),x(""),n(""),!u&&e&&"coarse_sense_map"!==e&&r({type:"set",name:"default"}),t("")},[m,x]=(0,l.useState)(""),p=()=>{m&&(a(!1),t(m).then(()=>{u=!0,n(""),x("")}).catch(()=>{x(""),a(!0)}))};return(0,s.jsxs)($.Z,{open:!!e,onClose:h,children:[(0,s.jsx)(V.Z,{children:"Encrypted Resource"}),(0,s.jsx)(C.Z,{"aria-label":"close export menu",onClick:h,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsxs)(G.Z,{sx:{p:1},children:[(0,s.jsxs)(I.Z,{sx:{mb:2},children:["The ",(0,s.jsx)("span",{className:"number",children:e})," resource is encrypted."]}),(0,s.jsx)(Z.Z,{fullWidth:!0,label:"Password",size:"small",type:o?"password":"text",value:m,error:i,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,s.jsx)(C.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>d(!o),children:o?(0,s.jsx)(eo.Z,{}):(0,s.jsx)(ec.Z,{})})]}),(0,s.jsxs)(U.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(w.Z,{onClick:h,children:"Cancel"}),(0,s.jsx)(w.Z,{variant:"contained",onClick:p,disabled:!m,children:"Decrypt"})]})]})}var eu=n(86917),eh=n(11929),em=n(45133),ex=n(28443);let ep={type:"graph",layout:"force",size_by_value:!0,hide_zeros:!1,label_threshold:0,repulsion:100,gravity:.1,edge_length:40},ef={include_fuzzy:!1,dense:!1,min_sim:.001};function eg(e,t){return{...e,[t.key]:t.value}}function ey(){let e=(0,l.useContext)(c.Z7),t=(0,l.useContext)(c.SZ),[n,r]=(0,l.useReducer)(eg,ep),[i,a]=(0,l.useReducer)(eg,ef),[o,d]=(0,l.useState)([]),{allTerms:u,catCounts:h}=(0,l.useMemo)(()=>{let t={},n=new Map(Object.keys(e).map(n=>{let s=Object.keys(e[n].categories);return(s.length?s:["no categories"]).forEach(e=>{e in t?t[e]++:t[e]=1}),[e[n].term||n,e[n]]}));return{catCounts:t,allTerms:n}},[e]),x=(0,l.useMemo)(()=>{let e=[...t];return"no categories"in h&&!e.includes("no categories")&&e.push("no categories"),e},[t,h]);return(0,l.useEffect)(()=>{d(o.filter(e=>x.includes(e)))},[x]),(0,s.jsxs)(j.Z,{direction:"row",sx:{height:"100%"},children:[(0,s.jsx)(m.Z,{sx:{height:"100%",minWidth:"250px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,s.jsxs)(m.Z,{sx:{pl:1,pr:1,height:"100%",display:"flex",flexDirection:"column"},children:[(0,s.jsxs)(m.Z,{sx:{overflowY:"auto"},children:[(0,s.jsx)(I.Z,{variant:"h6",children:"Terms"}),(0,s.jsx)(q.Z,{dense:!0,sx:{overflowY:"auto",overflowX:"hidden",maxHeight:"300px",p:0},children:Object.keys(h).map(e=>(0,s.jsx)(N.ZP,{disablePadding:!0,disableGutters:!0,children:(0,s.jsxs)(z.Z,{disableGutters:!0,"aria-label":"toggle category",onClick:()=>{let t=[...o],n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),d(t)},children:[(0,s.jsx)(eu.Z,{sx:{minWidth:"35px"},children:(0,s.jsx)(eh.Z,{sx:{p:0},checked:o.includes(e)})}),(0,s.jsx)(P.Z,{sx:{m:0},primary:e,secondary:h[e]+" terms"})]})},e))}),(0,s.jsxs)(y.Z,{sx:{justifyContent:"space-between"},variant:"dense",disableGutters:!0,children:[(0,s.jsxs)(j.Z,{direction:"row",children:[(0,s.jsx)(w.Z,{size:"small",sx:{minWidth:"1px"},onClick:()=>{d([...x])},children:"All"}),(0,s.jsx)(w.Z,{size:"small",sx:{minWidth:"1px"},onClick:()=>{d([])},children:"None"})]}),(0,s.jsx)(I.Z,{sx:{pr:1,whiteSpace:"nowrap"},children:o.length+" / "+x.length+" selected"})]}),(0,s.jsxs)(j.Z,{spacing:2,children:[(0,s.jsx)(v.Z,{title:"Include all matches to fuzzy terms in the comparison.",placement:"right",children:(0,s.jsx)(X.Z,{label:"Fuzzy Matches",labelPlacement:"start",control:(0,s.jsx)(Y.Z,{size:"small",checked:i.include_fuzzy,onChange:()=>a({key:"include_fuzzy",value:!i.include_fuzzy})})})}),(0,s.jsx)(v.Z,{title:"Include second-order term relationships in similarity calculations, resulting in a denser network.",placement:"right",children:(0,s.jsx)(X.Z,{label:"Secondary Connections",labelPlacement:"start",control:(0,s.jsx)(Y.Z,{size:"small",checked:i.dense,onChange:()=>a({key:"dense",value:!i.dense})})})}),(0,s.jsx)(v.Z,{title:"Will consider nodes with similarity equal to or less than this as unconnected.",placement:"right",children:(0,s.jsx)(Z.Z,{value:i.min_sim,type:"number",size:"small",inputProps:{min:0,max:1,step:.01},label:"Similarity Threshold",onChange:e=>a({key:"min_sim",value:e.target.value})})})]})]}),(0,s.jsxs)(m.Z,{sx:{overflowY:"auto"},children:[(0,s.jsx)(I.Z,{variant:"h6",sx:{mt:2},children:"Plot Options"}),(0,s.jsxs)(j.Z,{spacing:2,children:[(0,s.jsx)(X.Z,{label:"Hide Zeros",labelPlacement:"start",control:(0,s.jsx)(Y.Z,{size:"small",checked:n.hide_zeros,onChange:()=>r({key:"hide_zeros",value:!n.hide_zeros})})}),(0,s.jsx)(X.Z,{label:"Size By Value",labelPlacement:"start",control:(0,s.jsx)(Y.Z,{size:"small",checked:n.size_by_value,onChange:()=>r({key:"size_by_value",value:!n.size_by_value})})}),(0,s.jsx)(v.Z,{title:"Will not show labels for nodes with values lower than this.",placement:"right",children:(0,s.jsx)(Z.Z,{value:n.label_threshold,type:"number",size:"small",label:"Label Threshold",inputProps:{min:0,step:.5},onChange:e=>r({key:"label_threshold",value:e.target.value})})}),(0,s.jsxs)(F.Z,{fullWidth:!0,children:[(0,s.jsx)(D.Z,{id:"graph_layout_select",children:"Layout"}),(0,s.jsxs)(W.Z,{labelId:"graph_layout_select",label:"Layout",size:"small",value:n.layout||"force",onChange:e=>{r({key:"layout",value:e.target.value})},children:[(0,s.jsx)(em.Z,{children:"Canvas"}),(0,s.jsx)(L.Z,{value:"none",children:"Random"}),(0,s.jsx)(L.Z,{value:"circular",children:"Circular"}),(0,s.jsx)(L.Z,{value:"force",children:"Force"}),(0,s.jsx)(em.Z,{children:"WebGL"}),(0,s.jsx)(L.Z,{value:"forceAtlas2",children:"ForceAtlas2"})]})]}),"force"===n.layout&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{title:"Repulsion factor between nodes.",placement:"right",children:(0,s.jsx)(Z.Z,{value:n.repulsion,type:"number",size:"small",label:"Repulsion",inputProps:{min:0},onChange:e=>r({key:"repulsion",value:e.target.value})})}),(0,s.jsx)(v.Z,{title:"Nodes' strength of attraction to the center.",placement:"right",children:(0,s.jsx)(Z.Z,{value:n.gravity,type:"number",size:"small",label:"Gravity",inputProps:{min:0,step:.1},onChange:e=>r({key:"gravity",value:e.target.value})})}),(0,s.jsx)(v.Z,{title:"Base distance between nodes.",placement:"right",children:(0,s.jsx)(Z.Z,{value:n.edge_length,type:"number",size:"small",label:"Edge Length",inputProps:{min:0},onChange:e=>r({key:"edge_length",value:e.target.value})})})]})]})]})]})}),(0,s.jsx)(ex.Z,{allTerms:u,catCounts:h,selectedCategories:o,options:i,plotOptions:n})]})}let ej=/^category_/;function eb(){let[e,t]=(0,l.useState)(!0),n=(0,l.useContext)(c.Z7),r=(0,l.useContext)(c.SZ),{terms:i}=(0,l.useContext)(o.IO),a=(0,l.useContext)(c.EN),p=(0,l.useCallback)((e,t)=>{let{field:n,processed:s,dictEntry:r}=t,i="from_term_editor"===n;if(r&&(i||n.startsWith("category_"))){let l={...r.categories},o=i?t.id:n.replace(ej,"");o in l&&!e?delete l[o]:e&&(l[o]=+e),a({type:"update",term_id:t[i?"term_id":"id"],term:s.term,term_type:s.term_type,categories:l,sense:r.sense})}},[a]),f=(0,l.useContext)(u.du),g=(0,l.useContext)(d.qm),y=f in n,j=(0,l.useContext)(c.J6),[b,Z]=(0,l.useState)(j.info_drawer_height||30),v=g.length?b:0;return(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(el,{terms:i,asTable:e,setAsTable:t,add:(e,t)=>{a({type:"add",term:e,term_type:t})}}),(0,s.jsxs)(m.Z,{sx:{position:"absolute",top:0,left:0,bottom:0,right:(y?j.term_editor_width||200:0)+"px",mt:"3em",mb:v+"vh"},children:[e?(0,s.jsx)(x.Z,{editFromEvent:p}):(0,s.jsx)(ey,{}),y&&(0,s.jsx)(u.iC,{categories:r,editor:p,width:j.term_editor_width||200}),(0,s.jsx)(d.VZ,{height:b,setHeight:Z})]}),(0,s.jsx)(ed,{})]})}let eZ=(0,r.Z)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}}),ev=-1;function eC(){window.dispatchEvent(new Event("resize"))}let ew=(e,t)=>{switch("reset"!==t.type&&e.length||(cancelAnimationFrame(ev),ev=requestAnimationFrame(eC)),t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function e_(){let[e,t]=(0,l.useReducer)(ew,[]),[n,r]=(0,l.useState)("");return(0,s.jsx)(l.StrictMode,{children:(0,s.jsxs)(i.Z,{theme:eZ,children:[(0,s.jsx)(a.ZP,{}),(0,s.jsx)(o._B,{children:(0,s.jsx)(c.Nc,{children:(0,s.jsx)(d.qm.Provider,{value:e,children:(0,s.jsx)(d.l0.Provider,{value:e=>requestAnimationFrame(()=>t(e)),children:(0,s.jsx)(u.du.Provider,{value:n,children:(0,s.jsx)(u.Pq.Provider,{value:(e,t)=>{requestAnimationFrame(()=>{(n||t)&&e||(cancelAnimationFrame(ev),ev=requestAnimationFrame(eC)),(0,ea.l$)(e),r(e)})},children:(0,s.jsx)(eb,{})})})})})})})]})})}},87339:function(e,t,n){"use strict";n.d(t,{Ao:function(){return p},fE:function(){return c},gD:function(){return o},tt:function(){return m}});var s=n(32261),r=n(56522),i=n(39169);let a={},l={};async function o(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=n[t.source[1]in n?t.source[1]:"all"];for(let n,o="";s.length<r&&(n=t.exec(a));)(o=n[0].replace(i.WR,""))&&(s.push(o),!e||o in l||(l[o]=e))}function c(e){return e in l?l[e]:""}async function d(e,t,n){n.forEach((n,s)=>{e[s]=!0,t[s]=!0})}async function u(e,t){let n=e.lookup,s=n.any;e.lemma.forEach(e=>{let r=m(e,t).lookup;d(s,n.lemma_related,r.related_map),d(s,n.lemma_synset,r.synset_map)}),e.related.forEach(e=>{let r=m(e,t).lookup;d(s,n.related_lemma,r.lemma_map),d(s,n.related_related,r.related_map),d(s,n.related_synset,r.synset_map)}),e.synset_terms.forEach(e=>{let r=m(e,t).lookup;d(s,n.synset_lemma,r.lemma_map),d(s,n.synset_related,r.related_map),d(s,n.synset_synset,r.synset_map)}),n.expanded=!0,n.map=new Map(Object.keys(s).map(e=>[e,!0]))}function h(e,t){try{return new RegExp(e,t)}catch(t){return e}}function m(e,t,n,s){let l="string"==typeof e&&n&&e in n,c=l&&n[e].term?n[e].term:e,d=l&&"regex"===n[e].type?"regex":"fixed",m=c+"_"+d;m in a||(a[m]=function(e,t){let n="string"==typeof e;if(n&&!i.ks.test(e))return function(e,t){let{terms:n,lemmas:s,termLookup:i,termAssociations:a,synsetInfo:l}=t,o={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&i&&i[e]||-1,lemma:[],related:[],synsets:[],synset_terms:[],lookup:{expanded:!1,map:new Map,any:{},lemma:{},lemma_map:new Map,lemma_related:{},lemma_synset:{},related:{},related_map:new Map,related_lemma:{},related_related:{},related_synset:{},synset:{},synset_map:new Map,synset_lemma:{},synset_related:{},synset_synset:{}}};if(a&&l&&s&&n&&-1!==o.index){o.recognized=!0;let t=a[o.index];o.related=t&&t[0]&&Array.isArray(t[0])?t[0].filter((e,t)=>!!t).map(e=>n[e-1]):[],o.synsets=t&&t[1]?(Array.isArray(t[1])?t[1]:[t[1]]).map(e=>l[e-1]):[];let i=new Set;o.synsets.forEach(e=>{(0,r.uz)(e,n,l).forEach(e=>{e!==o.term&&i.add(e)})}),o.synset_terms=Array.from(i);let c=n&&s&&e in s?s["number"==typeof s[e]?n[s[e]]:e]:[];o.lemma="number"==typeof c?[n[c]]:c.map(e=>n[e]),function(e){let{lemma:t,related:n,synset_terms:s,lookup:r}=e;t.forEach(e=>{r.any[e]=!0,r.lemma[e]=!0,r.lemma_map.set(e,!0)}),n.forEach(e=>{r.any[e]=!0,r.related[e]=!0,r.related_map.set(e,!0)}),s.forEach(e=>{r.any[e]=!0,r.synset[e]=!0,r.synset_map.set(e,!0)})}(o)}return o}(e,t);{let s=n?(0,i.ZC)(e):e.source,r={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:h(n?s:(0,i.OX)(s),"g"),matches:[]};return t.collapsedTerms&&o(r.term,r.regex,t.collapsedTerms,r.matches),r.recognized=!!r.matches.length,r}}("regex"===d?h(c):c,t));let x=a[m];return s&&"fixed"===x.type&&!x.lookup.expanded&&u(x,t),x}async function x(e,t,n,s,r){let a=m(n,r,s),l=s[n],o="fixed"===a.type?{processed:a,dictEntry:l,id:n,term:l.term||n,sense:l.sense,matches:a.recognized?1:0,ncats:Object.keys(l.categories).length,frequency:(0,i.O$)(a.index,r.terms&&r.terms.length).toFixed(2),senses:a.synsets.length,related:a.related.length}:{processed:a,dictEntry:l,id:n,term:l.term||n,sense:l.sense,matches:a.matches.length,ncats:Object.keys(l.categories).length};if(l.categories){let e=l.categories;Object.keys(e).forEach(t=>{o["category_"+t]=e[t]})}e[t]=o}async function p(e,t,n){return clearTimeout(s.V.dictionary),new Promise(r=>{let i=Object.freeze(Object.keys(e)),a=i.length,l=Array(a),o=0,c=0,d=()=>{for(clearTimeout(s.V.dictionary);o<a&&c<1e3;o++,c++)x(l,o,i[o],e,t);o!==a?(c=0,n&&n(o/a),s.V.dictionary=setTimeout(d,0)):(n&&n(1),r(l))};s.V.dictionary=setTimeout(d,0)})}},93853:function(e,t,n){"use strict";n.d(t,{D4:function(){return g},IO:function(){return f},_B:function(){return Z}});var s=n(57437),r=n(11205),i=n(81115),a=n(88929),l=n(80511),o=n(32184),c=n(7547),d=n(86917),u=n(40468),h=n(2265),m=n(39169),x=n(77129),p=n(40340);let f=(0,h.createContext)({senseMap:{},senseMapOptions:{store:!0},SenseLookup:{},NLTKLookup:{},collapsedSenses:"",collapsedNLTK:""}),g=(0,h.createContext)((e,t,n)=>{}),y=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"conceptNet",label:"ConceptNet"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}];function j(e,t,n,s){if(e in n){let r=n[e];("number"==typeof r?[r]:r).forEach(e=>{let r=s[e],i=r[t];i?i.push(n.index+1):r[t]=[n.index+1]})}}let b=/[\s-]+/g;function Z(e){let{children:t}=e,[n,Z]=(0,h.useState)(),[v,C]=(0,h.useState)(),[w,_]=(0,h.useState)(),[k,S]=(0,h.useState)(),[E,O]=(0,h.useState)(),[N,z]=(0,h.useState)(),[P,I]=(0,h.useState)(),[M,T]=(0,h.useState)(),[A,F]=(0,h.useState)({}),[D,W]=(0,h.useState)({store:!0}),[L,R]=(0,h.useState)({}),[q,K]=(0,h.useState)({}),[B,H]=(0,h.useState)(""),[$,V]=(0,h.useState)(""),[G,J]=(0,h.useState)(!0),[U,X]=(0,h.useState)(!0),[Y,Q]=(0,h.useState)(!0),[ee,et]=(0,h.useState)(!0),[en,es]=(0,h.useState)(!0);(0,h.useEffect)(()=>{(0,x.XR)("terms").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{Z(Object.freeze(e.arr)),_(Object.freeze(e.obj)),S(Object.freeze(e.collapsed)),J(!1)}):fetch("/dictionary_builder/data/terms.txt").then(async e=>{if(!e.ok)throw"failed to fetch terms: "+e.status+" ("+e.statusText+")";let t=Object.freeze((await e.text()).split(m.SP));Z(t);let n={all:";;"+t.join(";;")+";;"},s={};t.forEach((e,t)=>{s[e]=t;let r=e[0];r&&(r in n?n[r]+=e+";;":n[r]=";;"+e+";;")}),_(Object.freeze(s)),S(Object.freeze(n)),(0,x.L$)("terms",{arr:t,obj:s,collapsed:n})}).finally(()=>J(!1))})},[J]),(0,h.useEffect)(()=>{(0,x.XR)("term_associations").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{O(e),X(!1)}):fetch("/dictionary_builder/data/term_associations.json").then(async e=>{if(!e.ok)throw"failed to fetch term associations: "+e.status+" ("+e.statusText+")";let t=await e.json();O(t),(0,x.L$)("term_associations",t)}).finally(()=>X(!1))})},[X]),(0,h.useEffect)(()=>{(0,x.XR)("conceptnet").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{z(e),Q(!1)}):fetch("/dictionary_builder/data/conceptnet.json").then(async e=>{if(!e.ok)throw"failed to fetch ConceptNet: "+e.status+" ("+e.statusText+")";let t=await e.json();z(t),(0,x.L$)("conceptnet",t)}).finally(()=>Q(!1))})},[X]),(0,h.useEffect)(()=>{(0,x.XR)("sense_keys").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{I(Object.freeze(e)),et(!1)}):fetch("/dictionary_builder/data/sense_keys.txt").then(async e=>{if(!e.ok)throw"failed to fetch sense keys: "+e.status+" ("+e.statusText+")";let t=(await e.text()).split(m.SP);I(Object.freeze(t)),(0,x.L$)("sense_keys",t)}).finally(()=>et(!1))})},[et]),(0,h.useEffect)(()=>{(0,x.XR)("synset_info").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{T(e),es(!1)}):fetch("/dictionary_builder/data/synset_info.json").then(async e=>{if(!e.ok)throw"failed to fetch synsets: "+e.status+" ("+e.statusText+")";let t=await e.json(),n=t.map((e,n)=>(e.index=n,j("hypernym","hyponym",e,t),j("instance_hypernym","instance_hyponym",e,t),j("domain_topic","domain_topic_members",e,t),e));T(n),(0,x.L$)("synset_info",n)}).finally(()=>es(!1))})},[es]),(0,h.useEffect)(()=>{if(n&&E){let e={};E.forEach((t,s)=>{if(t.length){let r=t[0],i="number"==typeof r?r:r.length?r[0]:0;if(i){let t=n[s],r=n[i-1],a=e[r];a&&"function"!=typeof a?"number"==typeof a?e[r]=[i-1,a,s]:a.push(s):e[r]=[i-1,s],e[t]=i-1}}}),C(e)}},[n,E]),(0,h.useEffect)(()=>{if(n&&P&&M){let e={},t={};M.forEach((s,r)=>{if(e[P[r]]=r,s.sense_index&&s.members){let e=s.sense_index+"",i="number"==typeof s.members?s.members:s.members[0];if(i){let a=n[i-1].replace(b,"_")+"."+s.id.substring(s.id.length-1)+"."+(1===e.length?"0":"")+e;t[a]=r,s.nltk_id=a}}}),R(e),K(t),H(";;"+P.join(";;")+";;"),V(";;"+Object.keys(t).join(";;")+";;")}},[n,P,M]);let er=(0,h.useMemo)(()=>({terms:n,lemmas:v,termLookup:w,collapsedTerms:k,termAssociations:E,conceptNet:N,sense_keys:P,synsetInfo:M,senseMap:A,senseMapOptions:D,NLTKLookup:q,SenseLookup:L,collapsedSenses:B,collapsedNLTK:$}),[n,v,w,k,E,N,P,M,A,D,q,L,B,$]),ei={terms:G,termAssociations:U,conceptNet:Y,sense_keys:ee,synsetInfo:en};return(0,s.jsx)(f.Provider,{value:er,children:v&&M?(0,s.jsx)(g.Provider,{value:(e,t,n)=>{F(e),t.store&&(0,x.po)("coarse_sense_map","",e,!0,n),t.rawMap&&(W(t),t.store&&(0,x.po)("coarse_sense_map","original_",t.rawMap,!0,n))},children:t}):(0,s.jsxs)(a.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,s.jsx)(l.Z,{variant:"h4",children:"Loading Resources..."}),(0,s.jsx)(o.Z,{children:y.map(e=>{let{key:t,label:n}=e;return(0,s.jsxs)(c.ZP,{dense:!0,children:[(0,s.jsx)(d.Z,{sx:{minWidth:"35px",mb:1},children:er[t]?(0,s.jsx)(r.Z,{color:"success"}):ei[t]?(0,s.jsx)(u.Z,{size:"1.5rem"}):(0,s.jsx)(i.Z,{color:"error",sx:{marginBottom:-.8}})}),(0,s.jsxs)(l.Z,{children:[er[t]||ei[t]?"":"Failed to load ",n]})]},t)})})]})})}},23471:function(e,t,n){"use strict";n.d(t,{T:function(){return ea},r:function(){return ei}});var s=n(57437),r=n(37642),i=n(19337),a=n(60335),l=n(58438),o=n(70270),c=n(27573),d=n(80511),u=n(94696),h=n(34990),m=n(88929),x=n(68038),p=n(74583),f=n(31655),g=n(91326),y=n(23983),j=n(82879),b=n(76548),Z=n(2265),v=n(54964),C=n(60460),w=n(77129),_=n(60692),k=n(83607),S=n(48024),E=n(61096),O=n(80824),N=n(66124),z=n(28549),P=n(67351),I=n(46849),M=n(11656),T=n(98784),A=n(93853);let F=(0,S.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),D=/^"|"$/g,W=/"*,"*/,L=/[\r\n]+/,R=/%/;function q(){let{sense_keys:e,SenseLookup:t,NLTKLookup:n}=(0,Z.useContext)(A.IO),[r,l]=(0,Z.useState)(!1),o=()=>l(!r),[c,u]=(0,Z.useState)(!0),[h,j]=(0,Z.useState)(!1),[v,C]=(0,Z.useState)([]),[w,S]=(0,Z.useState)([]),[q,K]=(0,Z.useState)(["",""]),[B,H]=(0,Z.useState)(!1),[$,V]=(0,Z.useState)([0,0,0]),[G,J]=(0,Z.useState)({}),[U,X]=(0,Z.useState)(""),[Y,Q]=(0,Z.useState)(!0),ee=(0,Z.useContext)(A.D4),et=()=>{C([]),S([]),X("")},en=(s,r,i)=>{let a=function(e,t,n){let s={};if(e&&-1!==t&&-1!==n)try{e.forEach(e=>{let r=e[t],i=e[n];if(r&&i&&i.length){if(r in s){let e=s[r];e.includes(i)||e.push(i)}else s[r]=[i]}})}catch(e){}return s}(s,r,i),l={},o=Object.keys(a);if(o.length&&e){let s=!R.test(o[0]);H(s);let r=s?n:t,i=new Set,c=0;o.forEach(t=>{let o=a[t];"string"==typeof o?i.add(o):o.forEach(e=>i.add(e)),t in r&&(c++,l[s?e[n[t]]:t]=o)}),V([o.length,c,i.size])}J(l)},es=e=>{if(e.length>1){let t=e.splice(0,1)[0].replace(D,"").split(W),n=e.map(e=>e.replace(D,"").split(W));S(Object.freeze(n)),C(t),t.length>1&&(K([t[0],t[1]]),en(n,0,1))}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined","aria-label":"import coarse sense map",onClick:o,children:"Import"}),(0,s.jsxs)(E.Z,{open:r,onClose:o,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],n=new FileReader;n.onload=()=>{es(n.result.split(L))},n.readAsText(t)}},children:[(0,s.jsx)(O.Z,{children:"Import Coarse Sense Mappings"}),(0,s.jsx)(a.Z,{"aria-label":"close coarse sense import menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsxs)(N.Z,{sx:{p:1,minWidth:"400px"},children:[w.length>1?(0,s.jsxs)(m.Z,{spacing:1,direction:"row",children:[(0,s.jsxs)(g.Z,{sx:{width:"50%"},children:[(0,s.jsx)(f.Z,{title:"Name of the column containing fine-grained sense labels (such as sense keys).",placement:"left",children:(0,s.jsxs)(z.Z,{fullWidth:!0,children:[(0,s.jsx)(P.Z,{id:"fine_sense_select",children:"Fine Senses"}),(0,s.jsx)(I.Z,{labelId:"fine_sense_select",label:"Fine Senses",size:"small",value:q[0],onChange:e=>{let t=e.target.value,n=[t,q[q[1]===t?0:1]];en(w,v.indexOf(n[0]),v.indexOf(n[1])),K(n)},children:v.map((e,t)=>(0,s.jsx)(M.Z,{value:e,children:e},e+t))})]})}),(0,s.jsxs)(d.Z,{sx:{pl:2},variant:"caption",children:[(0,s.jsxs)("span",{className:"number",children:[$[1]," "]}),"of",(0,s.jsxs)("span",{className:"number",children:[" ",$[0]," "]}),"recognized"]})]}),(0,s.jsxs)(g.Z,{sx:{width:"50%"},children:[(0,s.jsx)(f.Z,{title:"Name of the column containing coarse-grained sense labels (such as sense clusters).",placement:"right",children:(0,s.jsxs)(z.Z,{fullWidth:!0,children:[(0,s.jsx)(P.Z,{id:"coarse_sense_select",children:"Coarse Senses"}),(0,s.jsx)(I.Z,{labelId:"coarse_sense_select",label:"Coarse Senses",size:"small",value:q[1],onChange:e=>{let t=e.target.value,n=[q[q[0]===t?1:0],t];en(w,v.indexOf(n[0]),v.indexOf(n[1])),K(n)},children:v.map((e,t)=>(0,s.jsx)(M.Z,{value:e,children:e},e+t))})]})}),(0,s.jsxs)(d.Z,{sx:{pl:2},variant:"caption",children:[(0,s.jsxs)("span",{className:"number",children:[" ",$[2]," "]}),"unique labels"]})]})]}):(0,s.jsx)(d.Z,{sx:{p:2},children:"Select a CSV file with columns containing fine- and coarse-gained sense labels."}),(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsxs)(m.Z,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:[(0,s.jsx)(f.Z,{title:"Store the imported map locally.",placement:"top",children:(0,s.jsx)(x.Z,{label:"Store",labelPlacement:"start",control:(0,s.jsx)(p.Z,{checked:c,onChange:()=>u(!c)})})}),c?(0,s.jsx)(f.Z,{title:"Encrypt the sense map when being stored.",placement:"right",children:(0,s.jsx)(x.Z,{label:"Encrypt",labelPlacement:"start",control:(0,s.jsx)(p.Z,{checked:h,onChange:()=>j(!h)})})}):(0,s.jsx)(s.Fragment,{})]}),c&&h?(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(y.Z,{fullWidth:!0,size:"small",label:"Password",type:Y?"password":"text",value:U,onChange:e=>X(e.target.value)}),(0,s.jsx)(a.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>Q(!Y),children:Y?(0,s.jsx)(_.Z,{}):(0,s.jsx)(k.Z,{})})]}):(0,s.jsx)(s.Fragment,{})]})]}),(0,s.jsxs)(T.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(m.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(f.Z,{title:"select a file to import a coarse sense map from",children:(0,s.jsxs)(b.Z,{variant:"outlined",component:"label",children:["File",(0,s.jsx)(F,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],n=new FileReader;n.onload=()=>{es(n.result.split(L)),e.target.value=""},n.readAsText(t)}}})]})}),(0,s.jsx)(f.Z,{title:"clear any loaded content",children:(0,s.jsx)(b.Z,{onClick:et,children:"clear"})})]}),(0,s.jsx)(b.Z,{variant:"contained",disabled:!!h&&!U,onClick:()=>{ee(G,{rawMap:{header:v,selectedCols:q,rows:w,NLTKLabels:B},store:c},U),et(),l(!1)},children:"Set"})]})]})]})}var K=n(22960),B=n(18409);function H(){let e=(0,K.Z)(),{senseMap:t,senseMapOptions:n,synsetInfo:r,sense_keys:l,SenseLookup:o,NLTKLookup:c}=(0,Z.useContext)(A.IO),u=n.rawMap,[h,f]=(0,Z.useState)(!1),g=()=>f(!h),[j,v]=(0,Z.useState)("coarse_sense_map"),[C,w]=(0,Z.useState)(!!u&&u.NLTKLabels),[_,k]=(0,Z.useState)(!!u),S=(0,Z.useMemo)(()=>{let e=[_&&u?u.header.join(","):'"fine_sense","coarse_sense"'],n=Object.keys(t);if(n.length&&l&&r){if(_&&u){let{header:s,selectedCols:i,rows:a,NLTKLabels:d}=u,h=s.indexOf(i[0]),m=s.indexOf(i[1]);if(-1!==h&&-1!==m){let i={};a.forEach(n=>{let s=d?l[c[n[h]]]:n[h],a=n[m];if(s in t&&-1!==t[s].indexOf(a)){let t=[...n];d&&!C?t[h]=l[c[n[h]]]:!d&&C&&s in o&&(t[h]=r[o[s]].nltk_id),e.push(t.join(",")),i[t[h]+a]=!0}}),n.forEach(n=>{let a=t[n];if(C&&n in o){let{nltk_id:e}=r[o[n]];n=e}let l=s.length;a.forEach(t=>{let s=n+t;if(n&&t&&!(s in i)){let s=Array(l);s[h]=n,s[m]=t,e.push(s.join(","))}})})}}else n.forEach(n=>{let s=t[n];if(C&&n in o){let{nltk_id:e}=r[o[n]];n=e}n&&s&&s.forEach(t=>e.push('"'+n+'","'+t+'"'))})}return e.length>1?e.join("\n"):""},[h,C,_]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined",onClick:g,children:"Export"}),h&&(0,s.jsxs)(E.Z,{open:h,onClose:g,children:[(0,s.jsx)(O.Z,{children:"Export Coarse Sense Map"}),(0,s.jsx)(a.Z,{"aria-label":"close export menu",onClick:g,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(y.Z,{size:"small",label:"Filename",value:j,onChange:e=>{v(e.target.value)}}),(0,s.jsxs)(z.Z,{children:[(0,s.jsx)(B.Z,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,s.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:S,readOnly:!0})]})]})}),(0,s.jsxs)(T.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:C,onChange:()=>w(!C)}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"top"}),(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:_,onChange:()=>k(!_),disabled:!u}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"Match Import Format"}),labelPlacement:"top"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{if(j&&S){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([S],{type:"text/plain"}))),e.setAttribute("download",j+".csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var $=n(71268),V=n(85140),G=n(63742),J=n(92966),U=n(88857),X=n(23269);function Y(e){let{coarseLabels:t,useNLTK:n}=e,[r,l]=(0,Z.useState)(!1),o=()=>l(!r),{senseMap:c,senseMapOptions:d}=(0,Z.useContext)(A.IO),u=(0,Z.useContext)(A.D4),[h,x]=(0,Z.useState)([]),[p,f]=(0,Z.useState)(""),[g,j]=(0,Z.useState)([]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{sx:{position:"absolute",left:16,bottom:16},onClick:o,children:"New Pairs"}),(0,s.jsxs)(E.Z,{open:r,onClose:o,children:[(0,s.jsx)(O.Z,{children:"Sense Mappings"}),(0,s.jsx)(a.Z,{"aria-label":"close sense map editor",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsxs)(N.Z,{sx:{p:1,minWidth:"500px"},children:[(0,s.jsx)(X.Z,{sx:{mb:1},children:"Define fine to coarse sense mappings:"}),(0,s.jsxs)(m.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(et,{selected:h,setSelected:x,multi:!0,useNLTK:n}),(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},multiple:!0,disableCloseOnSelect:!0,options:t,value:g,onChange:(e,t)=>j([...t]),renderTags:(e,t)=>e.map((e,n)=>(0,Z.createElement)(G.Z,{label:e,...t({index:n}),key:e})),inputValue:p,onInputChange:(e,t)=>f(t),renderInput:e=>(0,s.jsx)(y.Z,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})]})]}),(0,s.jsxs)(T.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(b.Z,{onClick:o,children:"Cancel"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{let e={...c};h.forEach(t=>{if(t in c){let n=[...e[t]];g.forEach(e=>{n.includes(e)||n.push(e)}),e[t]=n}else e[t]=g}),u(e,{store:d.store}),x([]),j([]),o()},children:"Add"})]})]})]})}var Q=n(87339),ee=n(39169);function et(e){let{selected:t,setSelected:n,multi:r,useNLTK:i,editCell:a,params:l}=e,{synsetInfo:o,SenseLookup:c,collapsedSenses:u,NLTKLookup:h,collapsedNLTK:m}=(0,Z.useContext)(A.IO),[x,p]=(0,Z.useState)([]),[g,j]=(0,Z.useState)(""),b=i?h:c;return o?(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},multiple:r,autoSelect:!0,options:x,onKeyUp:e=>{let n=("value"in e.target?e.target.value:"").toLowerCase(),s=[];if(n){let e;try{e=RegExp(ee.AL.test(n)?(0,ee.ZC)(n):";"+n+"[^;]*;","g")}catch(t){e=RegExp(";"+n.replace(ee.mi,"\\%&")+";","g")}(0,Q.gD)("",e,{all:i?m:u},s,100)}t.forEach(e=>{s.includes(e)||s.push(e)}),p(s)},value:r?t:t[0],onChange:(e,t)=>{if(t){let e="string"==typeof t?[t]:[...t];a&&l&&a({...l,newValue:e}),n(e)}},renderTags:(e,t)=>e.map((e,n)=>(0,Z.createElement)(G.Z,{label:e,...t({index:n}),key:e})),renderInput:e=>(0,s.jsx)(y.Z,{...e,size:"small",label:"Fine Senses",value:g,onChange:e=>{t.includes(e.target.value)||j(e.target.value)}}),renderOption:(e,t)=>{if(t in b){delete e.key;let{definition:n}=o[(i?h:c)[t]];return(0,Z.createElement)(M.Z,{...e,value:t,key:t},(0,s.jsx)(f.Z,{title:n,placement:"right",children:(0,s.jsx)(d.Z,{sx:{width:"100%"},children:t})}))}},noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}):(0,s.jsx)(s.Fragment,{})}function en(e,t){let n=e.split("||"),s=n[0],r={...t},i=r[s];return 1===i.length?delete r[s]:(i.splice(+n[2],1),r[s]=[...i]),{newMap:r,fine:n[0],coarse:n[1],index:n[2]}}function es(e){let{params:t,labels:n,senseMap:r,senseMapStore:i,updateSenseMap:a}=e,[l,o]=(0,Z.useState)("");return(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},disableCloseOnSelect:!0,options:n,value:t.value,onChange:(e,n)=>{let{newMap:s,fine:l}=en(t.id,r);l in s?s[l].push(n):s[l]=[n],a(s,{store:i}),t.api.setEditCellValue({...t,value:n})},inputValue:l,onInputChange:(e,t)=>o(t),renderInput:e=>(0,s.jsx)(y.Z,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})}function er(){let[e,t]=(0,Z.useState)(!1),n=()=>t(!e),{senseMap:r,senseMapOptions:l,synsetInfo:o,SenseLookup:c}=(0,Z.useContext)(A.IO),u={store:l.store},h=(0,Z.useContext)(A.D4),f=(0,Z.useMemo)(()=>{let e=new Set;return Object.values(r).forEach(t=>t.forEach(t=>t&&e.add(t))),Object.freeze(Array.from(e))},[r]),[g,y]=(0,Z.useState)(!1),j=(0,Z.useMemo)(()=>[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsx)(a.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{let{newMap:t}=en(e.id,r);h(t,u)},children:(0,s.jsx)($.Z,{sx:{fontSize:".9em"}})})},{field:"fine",headerName:"Fine",width:180,hideable:!1,editable:!0,renderEditCell:e=>(0,s.jsx)(et,{selected:[e.value],setSelected:t=>{let{newMap:n,coarse:s}=en(e.id,r),i=t[0];i in n?n[i].push(s):n[i]=[s],h(n,u)},multi:!1,useNLTK:g,editCell:e.api.setEditCellValue,params:e})},{field:"coarse",headerName:"Coarse",width:125,hideable:!1,editable:!0,renderEditCell:e=>(0,s.jsx)(es,{params:e,labels:f,senseMap:r,senseMapStore:l.store,updateSenseMap:h})},{field:"definition",headerName:"Fine Definition",width:210}],[r]),v=(0,Z.useMemo)(()=>{let e=[];return o&&Object.keys(r).forEach((t,n)=>{let s=r[t],i=o[c[t]];i&&s.forEach(s=>{e.push({id:t+"||"+s+"||"+n,fine:g?i.nltk_id:t,definition:i.definition,coarse:s,info:i})})}),e},[r,o,g]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined","aria-label":"edit coarse sense map",onClick:n,children:"Edit"}),(0,s.jsxs)(E.Z,{open:e,onClose:n,children:[(0,s.jsx)(O.Z,{children:"Sense Map Editor"}),(0,s.jsx)(a.Z,{"aria-label":"close sense map editor",onClick:n,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(m.Z,{sx:{height:"500px"},spacing:1,children:[(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:g,onChange:()=>y(!g)}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"start"}),(0,s.jsx)(J._,{className:"datagrid-vertical",rows:v,columns:j,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnSelector:!0,pageSizeOptions:[100],density:"compact",editMode:"row",slots:{toolbar:()=>(0,s.jsx)(U.T,{})}}),(0,s.jsx)(Y,{coarseLabels:f,useNLTK:g})]})})]})]})}function ei(){let e=localStorage.getItem("dictionary_builder_settings"),t=e?JSON.parse(e):{dictionary_names:["default"],selected:"default",use_db:!0};return t.dictionary_names||(t.dictionary_names=["default"]),t.selected&&t.dictionary_names.includes(t.selected)||(t.selected="default"),"use_db"in t||(t.use_db=!0),t}function ea(){let e=(0,Z.useContext)(v.uj),t=(0,Z.useContext)(v.J6),n=(0,Z.useContext)(A.D4),{senseMap:_,senseMapOptions:k}=(0,Z.useContext)(A.IO),[S,E]=(0,Z.useState)(!1),O=()=>E(!S),N=(0,Z.useContext)(v.v$),[z,P]=(0,Z.useState)(t.undo||"z"),[I,M]=(0,Z.useState)(t.redo||"x"),[T,F]=(0,Z.useState)(!!t.disable_storage),[D,W]=(0,Z.useState)(!!t.use_db),L={undo:P,redo:M},R=(0,Z.useCallback)(e=>{if((e.ctrlKey||e.metaKey)&&(!e.target||!("tagName"in e.target)||"INPUT"!==e.target.tagName))switch(e.key){case I:N(-1);break;case z:N(1)}},[z,I,N]);(0,Z.useEffect)(()=>(window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}),[R]);let K=n=>{let s=n.target.name;if(s&&s in L){let r=n.target.value;window.removeEventListener("keydown",R),t[s]=r,L[s](r),e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t))}},B=Object.keys(_).length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{onClick:O,"aria-label":"toggle settings menu",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(l.ZP,{anchor:"right",open:S,onClose:O,children:(0,s.jsxs)(o.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(c.Z,{title:(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Settings"}),action:(0,s.jsx)(a.Z,{onClick:O,"aria-label":"close settings menu",className:"close-button",children:(0,s.jsx)(i.Z,{})}),sx:{p:1}}),(0,s.jsxs)(u.Z,{sx:{alignContent:"left",mb:"auto",p:0,overflowY:"auto","& .MuiPaper-root":{ml:.5,mr:.5,mb:1,p:.5}},children:[(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Storage"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(x.Z,{label:"Disable","aria-label":"disable storage",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,s.jsx)(p.Z,{checked:T,size:"small",onChange:n=>{t.disable_storage=!T,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),F(!T)}})}),T?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(f.Z,{title:"IndexedDB can store larger dictionaries, but it may be a bit slower.",children:(0,s.jsx)(x.Z,{label:"IndexedDB",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,s.jsx)(p.Z,{checked:D,size:"small",onChange:n=>{t.use_db=!D,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),W(!D)}})})})]})}),(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Keybinds"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(d.Z,{variant:"caption",children:"CTRL + "}),(0,s.jsxs)(m.Z,{spacing:2,children:[(0,s.jsx)(y.Z,{size:"small",label:"Undo",name:"undo",value:z,onChange:K}),(0,s.jsx)(y.Z,{size:"small",label:"Redo",name:"redo",value:I,onChange:K})]})]})}),(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Coarse Senses"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(q,{}),(0,s.jsx)(er,{}),B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Z,{children:["Mapped senses: ",(0,s.jsxs)("span",{className:"number",children:[B," "]})]}),(0,s.jsx)(H,{}),(0,s.jsx)(C.I,{label:"Remove",message:"The stored coarse sense map will be deleted.",onConfirm:()=>{indexedDB.deleteDatabase("dictionary_builder_coarse_sense_map"),n({},{store:k.store})}})]}):(0,s.jsx)(s.Fragment,{})]})})]}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(m.Z,{spacing:2,children:[(0,s.jsx)(b.Z,{variant:"contained",color:"warning",onClick:()=>{indexedDB.deleteDatabase("dictionary_builder_resources"),location.reload()},children:"Refresh Resources"}),(0,s.jsx)(C.I,{label:"Clear Storage",message:"Clearing storage will delete all settings, dictionaries, and edit history.",onConfirm:()=>{t.dictionary_names&&t.dictionary_names.forEach(e=>{(0,w.Li)(e,"dict_"),(0,w.Li)(e,"dict_history_")}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()}})]})})]})})]})}},77129:function(e,t,n){"use strict";n.d(t,{c:function(){return v},x0:function(){return w},td:function(){return Z},XR:function(){return m},Vt:function(){return _},Li:function(){return p},GM:function(){return C},L$:function(){return x},po:function(){return f}});let s={resources:7,building:1,coarse_sense_map:1};function r(e){return new Promise(t=>{let n=indexedDB.open("dictionary_builder_"+e,s[e]);n.onupgradeneeded=()=>{let t=n.result;t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e,{keyPath:"name"})},n.onsuccess=()=>{t(n.result)}})}let i={setItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).put(e);r.onerror=t=>{throw Error("failed to store item "+e.name)},r.onsuccess=()=>s(!0)}else throw Error})},getItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readonly",{durability:"relaxed"}).objectStore(t).get(e);r.onerror=()=>s(null),r.onsuccess=()=>{s(r.result)}}else s(null)})},removeItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).delete(e);r.onerror=()=>s(!1),r.onsuccess=()=>s(!0)}else s(!1)})}};var a=n(40340);let l={},o=new TextEncoder;async function c(e,t,n){if(!(e in l)){let s=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);l[e]={salt:n,key:await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e6,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}return l[e]}async function d(e,t,n){let s=!n||e in l?l[e]:await c(e,n,crypto.getRandomValues(new Uint8Array(16)));if(s)try{let e=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:e},s.key,new Uint8Array(await (await (0,a.n)(t)).arrayBuffer()));return new Blob([e,s.salt,n])}catch(t){console.error("failed to encrypt "+e+": "+t)}}function u(e){return new Promise(async t=>{t(await fetch("data:application/octet-stream;base64,"+e.substring(1)).then(e=>e.blob()))})}async function h(e,t,n){let s=await ("string"==typeof t?(await u(t)).arrayBuffer():t.arrayBuffer()),r=n?await c(e,n,new Uint8Array(s,12,16)):l[e];if(r)try{let e=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(s,0,12)},r.key,new Uint8Array(s,28));return(0,a.L)(new Blob([e]))}catch(t){console.error("failed to decrypt "+e+": "+t)}}async function m(e){return await i.getItem(e,"resources")}async function x(e,t){i.setItem({name:e,encrypted:!1,content:await (0,a.n)(t)},"resources")}async function p(e,t){delete l[e],i.removeItem(t+e,"coarse_sense_map"===e?e:"building"),localStorage.removeItem(t+e)}async function f(e,t,n,s,r){let o=!!r||e in l,c=await (o?d(e,n,r):(0,a.n)(n));if(c)try{s?i.setItem({name:t+e,encrypted:o,content:c},"coarse_sense_map"===e?e:"building"):localStorage.setItem(t+e,await new Promise(e=>{let t=new FileReader;t.readAsDataURL(c),t.onloadend=async()=>{e((o?"e":"c")+t.result.split(";base64,")[1])}}))}catch(t){console.error("failed to store "+e)}}let g=new Map,y={running:""};async function j(e,t,n,s,r,o){let c=t+e;if(!g.has(c)){g.set(c,[...arguments]);let t=e=>{g.delete(c),n(e);let t=g.keys().next();if(t.value){y.running=t.value;let e=g.get(t.value);e&&(g.delete(t.value),j.apply(void 0,e))}};if(1===g.size&&(y.running=c),c===y.running){let n="coarse_sense_map"===e?e:"building",d=s?await i.getItem(c,"coarse_sense_map"===c?c:n):localStorage.getItem(c);if(d||(d=s?localStorage.getItem(c):await i.getItem(c,n)),d){if("string"==typeof d&&("{"===d[0]||"c"===d[0]))t("{"===d[0]?JSON.parse(d):await (0,a.L)(await u(d)));else if("string"==typeof d||d.encrypted){let n="string"==typeof d?d:d.content;e in l?t(await h(e,n)):r(e,()=>async s=>{if(s){let r=await h(e,n,s);if(r)t(r);else throw g.delete(c),delete l[e],Error}else t()})}else t(await (0,a.L)(d.content))}else t(o)}}}let b={};async function Z(e,t,n,s){j(e,"dict_history_",e=>{e&&t(e)},s,n,{edits:[],position:-1})}function v(e){delete b[e]}function C(e,t,n,s){b[e]=t,f(e,"dict_",t,n,s)}async function w(e,t,n,s){e in b?t(b[e]):j(e,"dict_",n=>{n&&(b[e]=n,t(n))},s,n,{})}async function _(e,t){j("coarse_sense_map","original_",n=>{n&&j("coarse_sense_map","",t=>t?e(t,{rawMap:n,store:!0}):void 0,!0,t,{})},!0,t,void 0)}},56522:function(e,t,n){"use strict";n.d(t,{Te:function(){return p},gA:function(){return v},uz:function(){return y}});var s=n(57437),r=n(31655),i=n(80511),a=n(41665),l=n(91326),o=n(32184),c=n(88929),d=n(2265),u=n(93853),h=n(17872),m=n(53355),x=n(54964);function p(e){let{senseKey:t,info:n}=e,l=(0,d.useContext)(h.l0);return(0,s.jsx)(r.Z,{title:n.definition,placement:"right",children:(0,s.jsxs)(i.Z,{sx:{display:"flex","& span":{pl:.5}},children:[(0,s.jsx)(a.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer"},onClick:()=>l({type:"add",state:{type:"synset",value:t,info:n}}),children:t}),n.count&&(0,s.jsx)("span",{className:"number-annotation",children:" "+n.count})]})})}function f(e,t){return Array.isArray(e)?e.map(e=>t[e-1]):[t[e-1]]}let g={attribute:!0,domain_topic:!0,similar:!0,also:!0,domain_region:!0,exemplifies:!0,mero_part:!0,hypernym:!0,instance_hypernym:!0,mero_member:!0,mero_substance:!0,entails:!0,causes:!0,derivation:!0,pertainym:!0,agent:!0,antonym:!0,body_part:!0,by_means_of:!0,destination:!0,event:!0,instrument:!0,location:!0,material:!0,participle:!0,property:!0,result:!0,state:!0,undergoer:!0,uses:!0,vehicle:!0,hyponym:!0,instance_hyponym:!0,domain_topic_members:!0};function y(e,t,n){let s=new Set(f(e.members,t));return Object.keys(e).forEach(r=>{if(r in g){var i;(Array.isArray(i=e[r])?"number"==typeof i[0]?i.map(e=>n[e-1]):[]:"number"==typeof i?[n[i-1]]:[]).forEach(e=>f(e.members,t).forEach(e=>s.add(e)))}}),Array.from(s)}function j(e){let{name:t,info:n}=e,r=n[t],a=(0,d.useContext)(x.Z7),c=(0,d.useContext)(x.EN),f=(0,d.useContext)(h.l0),{terms:g,sense_keys:y,synsetInfo:j}=(0,d.useContext)(u.IO);return g&&y&&j?(0,s.jsxs)(l.Z,{sx:{m:1},children:[(0,s.jsx)(i.Z,{variant:"h5",children:t}),(0,s.jsx)(o.Z,{children:"string"==typeof r?r:"members"===t?g&&(Array.isArray(r)?r.map(e=>(0,m.bj)(g[e-1],a,c,f)):(0,m.bj)(g[r-1],a,c,f)):Array.isArray(r)?r.map(e=>{let t=j[e-1];return(0,s.jsx)(p,{senseKey:y[e-1],info:t},e)}):(0,s.jsx)(p,{senseKey:y[r-1],info:j[r-1]})})]},t):(0,s.jsx)(s.Fragment,{})}let b={id:0,index:0,count:0,ili:0,definition:0,topic:0,csi_labels:0,wikidata:0,source:0,sense_index:0,nltk_id:0,babelnet:0},Z={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function v(e){let{info:t}=e,{sense_keys:n,senseMap:o}=(0,d.useContext)(u.IO),h=n?n[t.index]:"",m=h&&h in o?o[h]:t.csi_labels;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{variant:"h6",children:t.definition}),(0,s.jsxs)(c.Z,{direction:"row",spacing:2,children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID:"," ",(0,s.jsx)(a.Z,{href:"https://en-word.net/id/oewn-"+t.id,rel:"noreferrer",target:"_blank",children:t.id})]}),t.ili&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,s.jsx)("span",{className:"number",children:t.ili})]}),t.nltk_id&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Natural Language Toolkit ID: ",(0,s.jsx)("span",{className:"number",children:t.nltk_id})]}),t.babelnet&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["BabelNet ID:"," ",(0,s.jsx)(a.Z,{href:"https://babelnet.org/synset?lang=EN&id="+t.babelnet,rel:"noreferrer",target:"_blank",children:t.babelnet})]})]}),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,s.jsx)("span",{className:"number",children:Z[t.id.substring(t.id.length-1)]})]}),(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,s.jsx)("span",{className:"number",children:t.topic})]}),m&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Coarse Labels: ",(0,s.jsx)("span",{className:"number",children:"string"==typeof m?m:m.join(", ")})]}),t.count&&(0,s.jsx)(r.Z,{title:"frequency within the combined SemCor and One Million Sense-Tagged Instances training data",children:(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["SemCor+OMSTI Count: ",(0,s.jsx)("span",{className:"number",children:t.count})]})})]}),(t.wikidata||t.source)&&(0,s.jsxs)(l.Z,{children:[t.source&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Source: ",(0,s.jsx)("span",{className:"number",children:t.source})]}),t.wikidata&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Wikidata:"," ",(0,s.jsx)(a.Z,{href:"https://www.wikidata.org/wiki/"+t.wikidata,rel:"noreferrer",target:"_blank",children:t.wikidata})]})]})]}),(0,s.jsx)(c.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in b)).map(e=>(0,s.jsx)(j,{name:e,info:t},e))})]})}},56002:function(e,t,n){"use strict";n.d(t,{iA:function(){return M},l$:function(){return P}});var s=n(57437),r=n(88929),i=n(60335),a=n(11656),l=n(86917),o=n(47905),c=n(2265),d=n(86739),u=n(21662),h=n(57079),m=n(24834),x=n(87070),p=n(51744),f=n(92966),g=n(88857),y=n(5123),j=n(17671),b=n(20016),Z=n(19337),v=n(31655),C=n(61096),w=n(80824),_=n(66124),k=n(23983),S=n(76548),E=n(54964),O=n(64817);function N(){let[e,t]=(0,c.useState)(!1),n=()=>t(!e),a=(0,c.useContext)(E.SZ),l=(0,c.useContext)(E._r),[o,d]=(0,c.useState)(""),[u,h]=(0,c.useState)(""),m=()=>{o&&-1===a.indexOf(o)&&(l({type:"add",cat:o}),h(o),d(""),t(!1))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{title:"add category",children:(0,s.jsx)(i.Z,{size:"small","aria-label":"add category",sx:{position:"absolute",right:"-42px",top:"-4px",zIndex:1},onClick:n,children:(0,s.jsx)(b.Z,{})})}),e&&(0,s.jsxs)(C.Z,{open:e,onClose:()=>t(!1),children:[(0,s.jsx)(w.Z,{children:"Add Category"}),(0,s.jsx)(i.Z,{"aria-label":"close category adder",onClick:n,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(Z.Z,{})}),(0,s.jsx)(_.Z,{children:(0,s.jsxs)(r.Z,{direction:"row",children:[(0,s.jsx)(k.Z,{label:"New Category Name",size:"small",value:o,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&m()},onChange:e=>d(e.target.value)}),(0,s.jsx)(S.Z,{variant:"contained",onClick:m,children:"Add"})]})})]}),u&&(0,s.jsx)(O.Q,{category:u,onClose:()=>h("")})]})}let z={ref:void 0};function P(e){if(z.ref&&z.ref.current){let t=z.ref.current.state.sorting.sortedRows.indexOf(e);z.ref.current.setPage(Math.floor(t/100)),z.ref.current.selectRow(e,!0,!0),requestAnimationFrame(()=>{z.ref&&z.ref.current&&z.ref.current.scrollToIndexes({rowIndex:t})})}}function I(e){let{count:t,page:n,onPageChange:a}=e,l=Math.ceil(t/100)-1,o=0===n,c=n===l;return(0,s.jsxs)(r.Z,{direction:"row",children:[(0,s.jsx)(i.Z,{"aria-label":"Go to first page",disabled:o,onClick:e=>a(e,0),children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to previous page",disabled:o,onClick:e=>a(e,n-1),children:(0,s.jsx)(u.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to next page",disabled:c,onClick:e=>a(e,n+1),children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to last page",disabled:c,onClick:e=>a(e,l),children:(0,s.jsx)(m.Z,{})})]})}function M(e){let{rows:t,columns:n,isCategory:r,setEditCategory:i,editFromEvent:d}=e,u=(0,c.useContext)(j.Pq),h=(0,p.A)();z.ref=h;let m=(0,c.useMemo)(()=>{let e=[];return n.forEach(t=>{let{field:n}=t;"category_"===n.substring(0,9)&&e.push({field:n})}),[{groupId:"term",headerName:"Entry",description:"Term definition.",headerClassName:"column-group",children:[{field:"remove"},{field:"term"},{field:"sense"}]},{groupId:"descriptives",headerName:"Statistics",description:"Term descriptive statistics.",headerClassName:"column-group",renderHeaderGroup:()=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:"Statistics"}),(0,s.jsx)(N,{})]}),children:[{field:"frequency"},{field:"matches"},{field:"senses"},{field:"related"},{field:"ncats"}]},{groupId:"categories",headerName:"Categories",description:"Added dictionary categories.",headerClassName:"column-group categories-column",children:e}]},[n]);return(0,s.jsx)(f._,{apiRef:h,className:"bottom-search",rows:t,columns:n,columnGroupingModel:m,showCellVerticalBorder:!0,disableDensitySelector:!0,pageSizeOptions:[100],density:"compact",sx:{"& .MuiDataGrid-columnHeaderTitleContainer":{overflow:"visible"},"& .column-group":{backgroundColor:"#1f1f1f",maxHeight:"2em"},"& .categories-column .MuiDataGrid-columnHeaderTitleContainerContent":{pl:2.3}},slots:{toolbar:()=>(0,s.jsx)(g.T,{sx:{width:"200px"}}),columnMenu:e=>{let t=e.colDef.headerName||"";return r(t)?(0,s.jsx)(y.hh,{...e,slots:{columnMenuUserItem:()=>(0,s.jsxs)(a.Z,{onClick:()=>{i(t)},children:[(0,s.jsx)(l.Z,{children:(0,s.jsx)(x.Z,{fontSize:"small"})}),(0,s.jsx)(o.Z,{children:"Edit category"})]})},slotProps:{columnMenuIserItem:{displayOrder:15}}}):(0,s.jsx)(y.hh,{...e})}},slotProps:{pagination:{ActionsComponent:I}},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&d(0,{...e.row,field:e.field})},onRowClick:e=>{let{row:t}=e;u(t.id)}})}},53355:function(e,t,n){"use strict";n.d(t,{m7:function(){return X},IJ:function(){return U},m1:function(){return R},bj:function(){return $}});var s=n(57437),r=n(2265),i=n(85140),a=n(11656),l=n(31655),o=n(80511),c=n(23983),d=n(40468),u=n(16351),h=n(92674),m=n(86645),x=n(74691),p=n(87116),f=n(68884),g=n(60335),y=n(78),j=n(7547),b=n(86917),Z=n(88929),v=n(91326),C=n(32184),w=n(41665),_=n(45133),k=n(76548),S=n(39169),E=n(93853),O=n(54964),N=n(17872),z=n(56522);let P=/[aeiouy]$/;function I(e,t){let n,s;let r=new Set,i=(e=e.replace(S.mi,"\\$&")).length;try{n=i>4?RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?"+e+(P.test(e)?"*":"+")+"-?(?:'|ac|age|al|alize|ance|ancy|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|ence|ency|ent|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|n|nce|ness|ng|nt|or|on|ous|r|s|ship|st|t|th|ties|ty|ur|ward|wise|y|z)?(?:'|al|alize|alization|ate|ation|ble|d|ed|er|es|ility|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?;","g"):RegExp(";(?:de|un|re)?-?"+(i>2?e.replace(P,"[aeiouy]"):e)+"+-?(?:'|d|ed|er|en|ing|n|r|s|y)?;","g")}catch(e){}if(n)for(;s=n.exec(t);){let t=s[0];t&&t.length-1>i&&";"+e+";"!==t&&r.add(t.replace(S.WR,""))}return Array.from(r)}var M=n(87339),T=n(62900),A=n(17260),F=n(24439),D=n(20016),W=n(44228),L=n(36807);function R(e){let{id:t,field:n,processed:u,label:h,editCell:m}=e,x=(0,r.useContext)(O.Z7),p=(0,r.useContext)(O.EN),f=x[t||u.term],g=(0,r.useContext)(E.IO),{terms:y,senseMap:j,sense_keys:b,synsetInfo:Z}=g,v=(e,t)=>{let n=e in j?j[e]:t.csi_labels;return"string"==typeof n?n:n[0]},[C,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)([]),S=C&&!_.length;return((0,r.useEffect)(()=>{C&&y&&b&&Z&&"fixed"===u.type&&u.synsets.length?setTimeout(async()=>{let e=(0,O.u_)(Object.keys(f.categories),x),t={};Object.keys(e).forEach(e=>{let n=(0,M.tt)(e,g,x,!0);n.lookup&&n.lookup.map.forEach((e,n)=>t[n]=!0)});let n={},s=u.synsets.map(s=>{let r=0;(0,z.uz)(s,y,Z).forEach(n=>{n in e&&r++,n in t&&(r+=.01)}),s.count&&(r+=.001*s.count),s.csi_labels||(s.csi_labels="no category");let i=b[s.index],a=v(i,s);return a in n&&!(n[a]<r)||(n[a]=r),{key:i,score:r,synset:s}}),r=s.map(e=>{let{key:t,synset:n}=e;return v(t,n)}).sort();k(s.sort((e,t)=>{let s=v(e.key,e.synset),i=n[s],a=-r.indexOf(s),l=v(t.key,t.synset);return 100*n[l]+-(.1*r.indexOf(l))+.01*t.score-(100*i+.1*a+.01*e.score)}))},150):k([])},[C,y,j,b,Z,u,x,g,f]),y&&b&&Z&&"fixed"===u.type&&u.synsets.length)?(0,s.jsx)(i.Z,{size:"small",componentsProps:{popper:{className:"synset-select"}},options:_,loading:S,open:C,onOpen:()=>w(!0),onClose:()=>w(!1),value:f.sense,groupBy:e=>v(e.key,e.synset),getOptionLabel:e=>"string"==typeof e?e:e.key,renderOption:(e,t)=>{let{key:n,synset:i,score:c}=t;return delete e.key,(0,r.createElement)(a.Z,{...e,key:n,value:n},(0,s.jsx)(l.Z,{title:i.definition,placement:"right",children:(0,s.jsxs)(o.Z,{sx:{width:"100%"},children:[(0,s.jsx)("span",{className:"number-annotation",children:"("+c.toFixed(2)+") "}),b[i.index],i.count&&(0,s.jsx)("span",{className:"number-annotation",children:" "+i.count})]})}))},renderInput:e=>(0,s.jsx)(c.Z,{label:h,...e,InputProps:{...e.InputProps,endAdornment:(0,s.jsxs)(r.Fragment,{children:[S&&(0,s.jsx)(d.Z,{size:20}),e.InputProps.endAdornment]})}}),ListboxProps:{style:{cursor:"pointer"},onClick:e=>{let s=e.target;if("tagName"in s&&"innerText"in s&&"DIV"===s.tagName){let e=s.innerText;m&&m({id:t,field:n,value:e}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:e})}}},onChange:(e,s)=>{let r=s&&"object"==typeof s&&s.key||"";m&&m({id:t,field:n,value:r}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:r})},autoSelect:!0,blurOnSelect:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}):(0,s.jsx)(c.Z,{size:"small",value:f.sense,onChange:e=>{m&&m({id:t,field:n,value:e.target.value}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:e.target.value})},label:h})}let q=["Match","Frequency","Senses","Related","In Dictionary"],K={position:"absolute",fontSize:"1.5em",height:"1.2em",opacity:.4};function B(e){let{processed:t}=e,n=(0,r.useContext)(O.Z7),i=(0,r.useContext)(O.EN),a=(0,r.useContext)(E.IO),[l,c]=(0,r.useState)(0),[d,j]=(0,r.useState)(10),[b,Z]=(0,r.useState)({column:"Frequency",asc:!1}),v=(0,r.useMemo)(()=>[(0,s.jsx)(u.Z,{width:1},"term_action"),...q.map(e=>(0,s.jsxs)(u.Z,{width:"Match"===e?999:1,component:"th",align:"Match"===e?"left":"right",sx:{cursor:"pointer",pr:3},onClick:()=>{Z(b.column===e&&b.asc?{column:"Frequency",asc:!1}:{column:e,asc:b.column===e})},children:[e,b.column===e?b.asc?(0,s.jsx)(T.Z,{sx:K}):(0,s.jsx)(A.Z,{sx:K}):(0,s.jsx)(s.Fragment,{})]},e))],[Z,b]),C=t.matches.length,w=(0,r.useMemo)(()=>t.matches.map(e=>{let t=(0,M.tt)(e,a);return t.frequency=(0,S.O$)(t.index,a.terms&&a.terms.length),t.in_dict=t.term in n,t}),[t,a,n]);if(l>C/d)return c(0),(0,s.jsx)(s.Fragment,{});w.sort(function(e){let{column:t,asc:n}=e;switch(t){case"Match":return n?(e,t)=>e.term>t.term?-1:1:(e,t)=>t.term>e.term?-1:1;case"Frequency":return n?(e,t)=>(e.frequency||0)-(t.frequency||0):(e,t)=>(t.frequency||0)-(e.frequency||0);case"Senses":return n?(e,t)=>e.synsets.length-t.synsets.length:(e,t)=>t.synsets.length-e.synsets.length;case"Related":return n?(e,t)=>e.related.length-t.related.length:(e,t)=>t.related.length-e.related.length;case"In Dictionary":return n?(e,t)=>(e.in_dict||0)>(t.in_dict||0)?-1:1:(e,t)=>(t.in_dict||0)>(e.in_dict||0)?-1:1}}(b));let _=[];if(C)for(let e=l*d,t=Math.min(w.length,e+d);e<t;e++)_.push(w[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=I(e,";;"+t.matches.join(";;")+";;")}return C?(0,s.jsxs)(h.Z,{sx:{height:"100%",position:"relative"},children:[(0,s.jsxs)(m.Z,{stickyHeader:!0,size:"small",children:[(0,s.jsx)(x.Z,{children:(0,s.jsx)(p.Z,{children:v})}),(0,s.jsx)(f.Z,{children:_.map((e,t)=>{let n=e.term;return(0,s.jsxs)(p.Z,{sx:{height:33},hover:!0,children:[(0,s.jsx)(u.Z,{sx:{p:0},children:e.in_dict?(0,s.jsx)(g.Z,{"aria-label":"remove",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{i({type:"remove",term_id:n})},children:(0,s.jsx)(F.Z,{})}):(0,s.jsx)(g.Z,{"aria-label":"add",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{i({type:"add",term_id:n,term:n,term_type:"fixed"})},children:(0,s.jsx)(D.Z,{})})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(U,{term:n})}),(0,s.jsx)(u.Z,{align:"right",children:e.frequency&&e.frequency.toFixed(2)||"0.00"}),(0,s.jsx)(u.Z,{align:"right",children:e.synsets.length}),(0,s.jsx)(u.Z,{align:"right",children:e.related.length}),(0,s.jsx)(u.Z,{align:"right",children:e.in_dict?"yes":"no"})]},n+t)})})]}),(0,s.jsx)(y.Z,{sx:{width:"100%",bottom:"-1px",position:"sticky",backgroundColor:"#1e1e1e"},component:"div",rowsPerPageOptions:[10,20,50,100,1e3],count:C,rowsPerPage:d,page:l,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{j(parseInt(e.target.value)),c(0)}})]}):(0,s.jsx)(o.Z,{children:"No matches"})}let H={minWidth:"20px",opacity:.9,"& .MuiSvgIcon-root":{fontSize:"1em"}};function $(e,t,n,r){let i=(0,M.fE)(e),a=e in t,o=a&&t[e].term||e;return(0,s.jsxs)(j.ZP,{disableGutters:!0,disablePadding:!0,sx:{pr:3},secondaryAction:a?(0,s.jsx)(g.Z,{"aria-label":"remove",size:"small",edge:"end",sx:H,onClick:()=>{n({type:"remove",term_id:e})},children:(0,s.jsx)(F.Z,{})}):(0,s.jsx)(g.Z,{"aria-label":"add",size:"small",edge:"end",sx:H,onClick:()=>{n({type:"add",term_id:e,term:o,term_type:"fixed"})},children:(0,s.jsx)(D.Z,{})}),children:[(0,s.jsx)(b.Z,{sx:H,children:a?(0,s.jsx)(l.Z,{title:"in current dictionary",placement:"left",children:(0,s.jsx)(W.Z,{color:"success"})}):i&&i in t?(0,s.jsx)(l.Z,{title:"captured by "+i+" in current dictionary",placement:"left",children:(0,s.jsx)(g.Z,{sx:{p:0,"& .MuiSvgIcon-root":{fontSize:".7em"}},onClick:()=>{r({type:"add",state:{type:"term",value:i}})},children:(0,s.jsx)(L.Z,{color:"secondary"})})}):(0,s.jsx)(s.Fragment,{})}),(0,s.jsx)(U,{term:o})]},e)}let V={d:"Wikidata",p:"DBpedia",w:"Wiktionary"},G=/([A-Z])/g;function J(e){let{processed:t}=e,n={p:1,pl:0,maxHeight:"100%",overflowY:"auto",overflowX:"hidden",whiteSpace:"nowrap"},i=(0,r.useContext)(O.Z7),a=(0,r.useContext)(O.EN),c=(0,r.useContext)(N.l0),{terms:d,senseMap:u,conceptNet:h,termLookup:m,collapsedTerms:x,sense_keys:p}=(0,r.useContext)(E.IO),f=(0,r.useCallback)(m?(e,t)=>m[e]-m[t]:()=>0,[m]);t.forms||(t.forms=I(t.term,x?x.all:""),t.forms.sort(S.tO));let g={},y={};t.synsets&&t.synsets.map(e=>{let t=p?p[e.index]:"",n=t in u?u[t]:e.csi_labels||"no category",s="string"==typeof n?n:n[0],r=e.count||0;s in g?(g[s].push(e),r>y[s]&&(y[s]=r)):(g[s]=[e],y[s]=r)});let b=h&&h.terms[""+(t.index+1)],k=h&&h.links[""+(t.index+1)];return(0,s.jsxs)(Z.Z,{direction:"row",spacing:2,sx:{height:"100%",pb:1},children:[(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(l.Z,{title:"100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage",children:(0,s.jsx)(o.Z,{children:"Frequency"})}),(0,s.jsx)(v.Z,{sx:{p:1},children:(0,s.jsx)("span",{className:"number",children:(0,S.O$)(t.index,d&&d.length).toFixed(2)})}),(!!b||!!t.synsets.length||!!k)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{children:"Sources"}),(0,s.jsx)(v.Z,{sx:{p:1},children:(0,s.jsxs)(C.Z,{sx:{p:0,fontSize:".8em",whiteSpace:"nowrap","& a":{cursor:"pointer"}},children:[!!b&&(0,s.jsx)(j.ZP,{disableGutters:!0,disablePadding:!0,children:(0,s.jsx)(w.Z,{href:"https://conceptnet.io/c/en/"+t.term.replace(" ","_"),target:"_blank",rel:"noreferrer",children:"ConceptNet"})}),!!t.synsets.length&&(0,s.jsx)(j.ZP,{disableGutters:!0,disablePadding:!0,children:(0,s.jsx)(w.Z,{href:"https://en-word.net/lemma/"+t.term,target:"_blank",rel:"noreferrer",children:"OEWordNet"})}),k&&("string"==typeof k?[k]:k).map(e=>(0,s.jsx)(j.ZP,{disableGutters:!0,disablePadding:!0,children:(0,s.jsx)(w.Z,{href:function(e){switch(e.substring(0,1)){case"d":return"https://wikidata.org/wiki/"+e.substring(2);case"p":return"https://dbpedia.org/resource/"+e.substring(2);case"w":return"https://en.wiktionary.org/wiki/"+e.substring(2)}}(e),target:"_blank",rel:"noreferrer",children:V[e.substring(0,1)]+": "+e.substring(2)})},e))]})})]})]}),d&&!!t.lemma.length&&(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{children:"Lemmatizer"}),(0,s.jsx)(v.Z,{sx:n,children:(0,s.jsx)(C.Z,{disablePadding:!0,sx:{p:0},children:t.lemma.filter(e=>e!==t.term).map(e=>$(e,i,a,c))})})]}),!!t.forms.length&&(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{children:"Expansion"}),(0,s.jsx)(v.Z,{sx:n,children:(0,s.jsx)(C.Z,{disablePadding:!0,sx:{p:0},children:t.forms.map(e=>$(e,i,a,c))})})]}),!!t.related.length&&(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{children:"Related Terms"}),(0,s.jsx)(v.Z,{sx:n,children:(0,s.jsx)(C.Z,{disablePadding:!0,sx:{p:0},children:t.related.map(e=>$(e,i,a,c))})})]}),p&&!!t.synsets.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{children:"Senses"}),(0,s.jsx)(v.Z,{sx:{...n,p:0},children:(0,s.jsx)(C.Z,{subheader:(0,s.jsx)("li",{}),className:"term-sense-list",children:Object.keys(g).sort((e,t)=>y[t]-y[e]).map(e=>{let t=g[e];return(0,s.jsx)("li",{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)(_.Z,{children:e}),t.sort((e,t)=>(t.count||0)-(e.count||0)).map(e=>(0,s.jsx)(j.ZP,{disablePadding:!0,children:(0,s.jsx)(z.Te,{senseKey:p[e.index],info:e})},e.index))]})},e)})})})]}),!!t.synset_terms.length&&(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{sx:{whiteSpace:"nowrap"},children:"Extended Synset Members"}),(0,s.jsx)(v.Z,{sx:n,children:(0,s.jsx)(C.Z,{disablePadding:!0,sx:{p:0},children:t.synset_terms.sort(f).map(e=>$(e,i,a,c))})})]})]}),b&&d&&(0,s.jsx)(Z.Z,{direction:"row",spacing:2,children:Object.keys(b).sort((e,t)=>{let n=b[e],s=b[t];return("number"==typeof s?1:s.length)-("number"==typeof n?1:n.length)}).map(e=>{let t=b[e];return(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(o.Z,{sx:{whiteSpace:"nowrap"},children:e.replace(G," $&").trimStart()}),(0,s.jsx)(v.Z,{sx:n,children:(0,s.jsx)(C.Z,{disablePadding:!0,sx:{p:0},children:("number"==typeof t?[t]:t).map(e=>$(d[e-1],i,a,c))})})]},e)})})]})}function U(e){let{term:t}=e,n=(0,r.useContext)(N.l0);return(0,s.jsx)(k.Z,{fullWidth:!0,variant:"text",sx:{p:0,justifyContent:"flex-start",textTransform:"none",whiteSpace:"nowrap"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function X(e){let{term:t}=e,n=(0,r.useContext)(E.IO),i=(0,r.useContext)(O.Z7),a=(0,M.tt)(t,n,i);return"fixed"===a.type?(0,s.jsx)(J,{processed:a}):(0,s.jsx)(B,{processed:a})}},17671:function(e,t,n){"use strict";n.d(t,{Pq:function(){return v},du:function(){return Z},iC:function(){return C}});var s=n(57437),r=n(91326),i=n(70270),a=n(27573),l=n(60335),o=n(80511),c=n(94696),d=n(88929),u=n(68038),h=n(74583),m=n(76548),x=n(19337),p=n(53355),f=n(2265),g=n(92966),y=n(54964),j=n(87339),b=n(93853);let Z=(0,f.createContext)(""),v=(0,f.createContext)((e,t)=>{});function C(e){let{categories:t,editor:n,width:C}=e,w=(0,f.useContext)(b.IO),_=(0,f.useContext)(y.Z7),k=(0,f.useContext)(Z),S=(0,f.useContext)(v),E=(0,f.useContext)(y.EN),[O,N]=(0,f.useState)(!1);if(!k||!(k in _))return(0,s.jsx)(s.Fragment,{});let z=(0,j.tt)(k,w,_),P=_[k],I=(0,f.useMemo)(()=>[{field:"id",headerName:"Name",width:108},{field:"from_term_editor",headerName:"Weight",width:65,editable:!0,hideable:!1,valueParser:(e,t,s)=>{let r=+e||"";return s&&n(r,{...t,field:s.field}),r}}],[]),M=P.categories,T=[];return t.forEach(e=>{(O||e in M)&&T.push({id:e,term_id:k,from_term_editor:M[e]||"",dictEntry:P,processed:z})}),(0,s.jsx)(r.Z,{sx:{position:"absolute",top:0,right:"-"+C+"px",height:"100%",width:C+"px"},children:(0,s.jsxs)(i.Z,{sx:{height:"100%",pb:"1em"},elevation:1,children:[(0,s.jsx)(a.Z,{sx:{p:.5},action:(0,s.jsx)(l.Z,{"aria-label":"Close term editor",onClick:()=>S(""),className:"close-button",children:(0,s.jsx)(x.Z,{})}),title:(0,s.jsx)(o.Z,{sx:{whiteSpace:"nowrap","& .MuiButtonBase-root":{fontWeight:"bold",fontSize:"1.1em"}},children:(0,s.jsx)(p.IJ,{term:z.term})})}),(0,s.jsx)(c.Z,{sx:{p:.5,height:"100%"},children:(0,s.jsxs)(d.Z,{direction:"column",sx:{pb:1,pt:1,height:"100%",overflowY:"auto"},spacing:2,children:[(0,s.jsx)(p.m1,{label:"Sense",id:k,field:"",processed:z}),(0,s.jsxs)(d.Z,{direction:"column",spacing:1,sx:{height:"100%"},children:[(0,s.jsx)(o.Z,{fontWeight:"bold",children:"Category Weights"}),(0,s.jsx)(u.Z,{control:(0,s.jsx)(h.Z,{size:"small",checked:O,onChange:()=>N(!O)}),label:(0,s.jsx)(o.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,s.jsx)(g._,{sx:{minHeight:"140px"},className:"bottom-search datagrid-vertical",rows:T,columns:I,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",onCellKeyDown:(e,t)=>{if("Delete"===t.key||"Backspace"===t.key){let s=""+e.value,r="view"===e.cellMode?0:+s.substring(0,s.length-1);n(r,{...e.row,field:e.field}),r||t.preventDefault()}}}),(0,s.jsx)(m.Z,{fullWidth:!0,variant:"contained",onClick:()=>{E({type:"add",term:P.term||k,term_type:P.type,sense:P.sense,categories:{...P.categories},added:P.added})},children:"Duplicate"})]})]})})]})})}}},function(e){e.O(0,[114,971,23,744],function(){return e(e.s=88284)}),_N_E=e.O()}]);