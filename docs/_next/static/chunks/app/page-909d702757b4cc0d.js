(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{91572:(e,t,s)=>{Promise.resolve().then(s.bind(s,66647))},50839:(e,t,s)=>{"use strict";s.d(t,{A:()=>b,d:()=>j});var n=s(95155),r=s(894),i=s(68998),a=s(10979),l=s(9561),o=s(44522),c=s(54255),d=s(12115),u=s(74781),h=s(7529),m=s(9375),x=s(16756),p=s(70648),g=s(24529),y=s(74668),f=s(54766);let j={dictionary:0,comparisons:0};function A(e,t){return t.dictEntry.added-e.dictEntry.added}function b(e){let{editFromEvent:t}=e,s=(0,d.useContext)(m.GU),j=(0,d.useContext)(x.CB),b=(0,d.useContext)(x.Md),v=(0,d.useCallback)(e=>b.includes(e),[b]),C=(0,d.useContext)(x.W7),w=(0,d.useMemo)(()=>Object.freeze(Object.keys(j).map(e=>j[e].term||e).sort()),[j]),_=(0,d.useMemo)(()=>{let e=[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,n.jsx)(r.A,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{C({type:"remove",term_id:e.id})},children:(0,n.jsx)(u.A,{sx:{fontSize:".9em"}})})},{field:"term",headerName:"Term",renderCell:e=>(0,n.jsx)(h.$I,{term:e.value})},{field:"sense",headerName:"Sense",description:"assigned sense key",editable:!0,renderEditCell:e=>(0,n.jsx)(h.rQ,{id:e.id,field:e.field,processed:e.row.processed,editCell:e.api.setEditCellValue})},{field:"frequency",headerName:"Frequency",description:"relative frequency; 100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage"},{field:"matches",headerName:"Matches",description:"number of matches found in the full term list"},{field:"senses",headerName:"Senses",description:"number of directly associated senses"},{field:"related",headerName:"Related",description:"number of similar terms on record, based on agreement between embeddings spaces"},{field:"ncats",headerName:"Categories",description:"number of categories the term has weight in"}];return b.forEach(s=>e.push({field:"category_"+s,headerName:s,editable:!0,valueParser:(e,s,n)=>{let r=+e||"";return n&&t(r,{...s,field:n.field}),r}})),e},[b,t]),[k,S]=(0,d.useState)([]),[E,N]=(0,d.useState)(0),O=(0,d.useMemo)(()=>{if(w.length<1e3)return!1;let e=k.map(e=>{let{id:t}=e;return t}).sort();return!(2>Math.abs(e.length-w.length))&&e.join()!==w.join()},[k,w]);(0,d.useEffect)(()=>{s.termAssociations&&s.synsetInfo&&(0,p.GL)(j,s,O?N:void 0).then(e=>{S(e.sort(A)),O&&N(0)})},[j,s,O]);let[z,M]=(0,d.useState)("");return(0,n.jsxs)(i.A,{component:"main",sx:{height:"100%"},children:[w.length&&(O||k.length)?O?(0,n.jsx)(o.A,{open:O,sx:{alignItems:"baseline"},children:(0,n.jsxs)(a.A,{sx:{textAlign:"center",mt:12},children:[(0,n.jsx)(l.A,{variant:"h4",children:"Processing Dictionary"}),(0,n.jsx)(c.A,{variant:"determinate",value:100*E}),(0,n.jsx)(l.A,{variant:"caption",children:E?Math.round(100*E)+"%":"preparing..."})]})}):(0,n.jsx)(y.XI,{rows:k,columns:_,isCategory:v,setEditCategory:M,editFromEvent:t}):(0,n.jsxs)(a.A,{sx:{p:3},children:[(0,n.jsx)(l.A,{align:"center",children:"Add terms, or import an existing dictionary."}),(0,n.jsx)(i.A,{sx:{m:"auto",p:1},children:(0,n.jsx)(f.P,{children:"Import"})})]}),(0,n.jsx)(g.G,{category:z,onClose:()=>M("")})]})}},64604:(e,t,s)=>{"use strict";s.d(t,{A:()=>g,F:()=>x});var n=s(95155),r=s(68998),i=s(10979),a=s(9561),l=s(54255),o=s(12115),c=s(70648),d=s(9375),u=s(16756),h=s(50839);let m=(0,s(77711).default)(()=>Promise.all([s.e(445),s.e(304)]).then(s.bind(s,19304)),{loadableGenerated:{webpack:()=>[19304]}});function x(e,t){return{lemma:+(e in t.lemma),lemma_related:+(e in t.lemma_related),lemma_synset:+(e in t.lemma_synset),related:+(e in t.related),related_lemma:+(e in t.related_lemma),related_related:+(e in t.related_related),related_synset:+(e in t.related_synset),synset:+(e in t.synset),synset_lemma:+(e in t.synset_lemma),synset_related:+(e in t.synset_related),synset_synset:+(e in t.synset_synset)}}async function p(e,t,s,n,r,i,a,l){clearTimeout(h.d.comparisons);let o=Object.keys(t),c=o.length;for(let r=0;e<c&&r<100;r++,e++){let r=t[o[e]];r.processed.lookup.map.forEach((e,i)=>{let a=r.term+"."+i,o=i+"."+r.term;if(r.term!==i&&!(a in n)&&!(o in n)&&i in t){n[a]=n[o]=!0;let e=function(e,t,s){if(!t.processed)return 0;let n=x(e.term,t.processed.lookup);return s?.35*n.lemma+.1*n.lemma_related+.001*n.lemma_synset+.25*n.related+.1*n.related_lemma+.001*n.related_related+.001*n.related_synset+.001*n.synset+.001*n.synset_lemma+.001*n.synset_related+.001*n.synset_synset:.35*n.lemma+.25*n.related+.001*n.synset}(r,t[i],l.dense);e>l.min_sim&&s.push({source:r.term,target:i,value:e,lineStyle:{width:.3+2*e,opacity:.35}})}})}i([e,c]),e<c?h.d.comparisons=setTimeout(()=>p(e,t,s,n,r,i,a,l),0):setTimeout(()=>{let e={},n=Object.values(t).map((t,s)=>(e[t.term]=s,{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,host:t.host||"",category:Object.keys(t.categories).sort((e,t)=>r[e]-r[t]),name:t.term,prop:1,value:0,symbolSize:10,itemStyle:{opacity:1},label:{show:!0}}));s.forEach(t=>{n[e[t.source]].value+=t.value,n[e[t.target]].value+=t.value});let i=0;n.forEach(e=>{let{value:t}=e;t>i&&(i=t)}),a({edges:s,nodes:n.map(e=>(e.prop=e.value/i,e.itemStyle={opacity:.6+.4*e.prop},e))})},0)}function g(e){let{allTerms:t,catCounts:s,selectedCategories:h,options:x,plotOptions:g}=e,y=(0,o.useContext)(d.GU),f=(0,o.useContext)(u.CB),[j,A]=(0,o.useState)({edges:[],nodes:[]}),[b,v]=(0,o.useState)([0,0]);return(0,o.useEffect)(()=>{let e=new Map(h.map((e,t)=>[t,e])),n={};t.forEach((t,s)=>{let r=!1,i={};if(e.forEach(e=>{(e in t.categories||"no categories"===e&&!Object.keys(t.categories).length)&&(r=!0,i[e]=t.categories[e])}),r){let e=(0,c.Fr)(s,y,f,!0);"fixed"===e.type?s in n||(n[s]={term:s,categories:i,processed:e}):x.include_fuzzy&&e.matches.forEach(e=>{e in f||e in n||(n[e]={host:s,term:e,categories:i,processed:(0,c.Fr)(e,y,{},!0)})})}}),p(0,n,[],{},s,v,A,x)},[f,y,x,h]),b[0]<b[1]?(0,n.jsx)(r.A,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,n.jsx)(r.A,{sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0,alignItems:"center",justifyContent:"center",textAlign:"center"},children:(0,n.jsxs)(i.A,{children:[(0,n.jsx)(a.A,{variant:"h5",children:"Calculating Pairwise Similarities"}),(0,n.jsx)(l.A,{variant:"determinate",value:b[0]/b[1]*100}),(0,n.jsx)(a.A,{variant:"caption",children:b[0]+" / "+b[1]})]})})}):(0,n.jsx)(r.A,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,n.jsx)(m,{nodes:j.nodes,edges:j.edges,options:g})})}},16756:(e,t,s)=>{"use strict";s.d(t,{AA:()=>_,CB:()=>h,Fc:()=>b,KS:()=>v,Md:()=>x,No:()=>j,W7:()=>m,WZ:()=>y,Zj:()=>g,gE:()=>d,hC:()=>C,i6:()=>f,lj:()=>c,tI:()=>S,ux:()=>u,yI:()=>p});var n=s(95155),r=s(12115),i=s(90797),a=s(79224),l=s(93596),o=s(9375);let c=(0,r.createContext)({selected:"default",dictionary_names:["default"],info_drawer_height:30,term_editor_width:200,use_db:!0}),d=(0,r.createContext)(e=>{}),u=(0,r.createContext)(e=>{}),h=(0,r.createContext)({}),m=(0,r.createContext)(e=>{}),x=(0,r.createContext)([]),p=(0,r.createContext)(e=>{}),g=(0,r.createContext)({edits:[],position:-1}),y=(0,r.createContext)(e=>{}),f=(0,r.createContext)(e=>{}),j=(0,r.createContext)(""),A=()=>async e=>{},b=(0,r.createContext)((e,t)=>{}),v=(0,r.createContext)(async e=>{});function C(e,t){let s={};return Object.keys(t).forEach(n=>{let r=t[n];e.forEach(e=>{e in r.categories&&(s[n]=r)})}),s}let w={};function _(e){return e in w}function k(e,t){return e.toLowerCase()>t.toLowerCase()?1:-1}function S(e){let{children:t}=e,[s,C]=(0,r.useState)(""),[_,S]=(0,r.useState)(A),E=(e,t)=>{t?(C(e),S(t)):(C(""),S(A))},N=(0,r.useContext)(o.qJ);(0,r.useEffect)(()=>{(0,l.Rq)(N,E)},[]);let[O,z]=(0,r.useState)((0,i.M)()),M=!!O.use_db,F=e=>{(0,l.Dv)(e,t=>{L({type:"change_dict",name:e,dict:t})},E,M)},P=e=>{if("replace"===e.type){I(e.history);return}let t="clear"===e.type?[]:[...T.edits],s="clear"===e.type?-1:T.position;"remove"===e.type?t.pop():"clear"!==e.type&&(s>-1&&(t.splice(0,s+1),s=-1),e.entry.time||(e.entry.time=Date.now()),t.splice(0,0,e.entry)),t.length>1e3&&t.splice(1e3,t.length-999),O.disable_storage||(0,l.cT)(O.selected,"dict_history_",{edits:t,position:s},M),I({edits:t,position:s})},[T,I]=(0,r.useState)({edits:[],position:-1}),W=e=>{"delete"===e.type?("default"!==e.name&&O.dictionary_names.splice(O.dictionary_names.indexOf(e.name),1),O.selected="default",z({...O}),(0,l.Od)(e.name,"dict_"),(0,l.Od)(e.name,"dict_history_"),(0,l.Ym)(e.name),F("default")):(O.dictionary_names.includes(e.name)||O.dictionary_names.push(e.name),O.selected=e.name,"set"===e.type?F(e.name):(O.disable_storage||(0,l.ik)(e.name,e.dict,M,e.password),"add"===e.type&&L({type:"change_dict",name:e.name,dict:e.dict}))),localStorage.setItem("dictionary_builder_settings",JSON.stringify(O))},[D,R]=(0,r.useReducer)((e,t)=>{let s=e;if("collect"===t.type){let n=new Set(t.reset?[]:e);Object.keys(t.dictionary).forEach(e=>{let s=t.dictionary[e];s&&s.categories&&Object.keys(s.categories).forEach(e=>n.add(e))}),s=Array.from(n).sort(k)}else"add"===t.type?e.includes(t.cat)||(s=[...e,t.cat].sort(k)):s=e.filter(e=>e!==t.cat);return e.length!==s.length||e.join("")!==s.join("")?s:e},[]),[B,L]=(0,r.useReducer)((e,t)=>{if("history_bulk"===t.type)return R({type:"collect",dictionary:t.dict,reset:!0}),W({type:"save",name:O.selected,dict:t.dict}),t.dict;if("change_dict"===t.type){var s;return s=t.dict,w={},Object.keys(s).forEach(e=>{let t=s[e],n=t.term||e;t.term=n,n in w?e!==n&&w[n].add(e):w[n]=new Set}),(0,l.FB)(t.name,e=>P({type:"replace",history:e}),E,M),R({type:"collect",dictionary:t.dict,reset:!0}),t.dict}let n={...e};if("rename_category"===t.type){let e=0;Object.keys(n).forEach(s=>{let r=n[s];t.name in r.categories&&(e++,r.categories[t.name]&&(r.categories[t.newName]=r.categories[t.name]),delete r.categories[t.name])}),R({type:"remove",cat:t.name}),R({type:"add",cat:t.newName}),e&&P({type:"add",entry:{type:"rename_category",name:t.newName,originalName:t.name}})}else if("remove_category"===t.type){let e={},s=0;Object.keys(n).forEach(r=>{let i=n[r];t.name in i.categories&&(s++,i.categories[t.name]&&(e[r]=i.categories[t.name]),delete i.categories[t.name])}),s&&P({type:"add",entry:{type:"remove_category",name:t.name,weights:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in n&&(t.weights[e]?n[e].categories[t.name]=t.weights[e]:delete n[e].categories[t.name])}),P({type:"add",entry:t});else if("reweight_category"===t.type){let e={},s=0;Object.keys(n).forEach(r=>{let i=n[r];i.categories[t.name]!==t.weights[r]&&(s++,e[r]=i.categories[t.name]||0,t.weights[r]?i.categories[t.name]=t.weights[r]:delete i.categories[t.name])}),s&&P({type:"add",entry:{...t,originalWeights:e}})}else{if("remove"===t.type)delete n[t.term_id],P({type:"add",entry:{type:"remove_term",name:t.term_id,value:e[t.term_id]}});else{let s="string"==typeof t.term?t.term:t.term.source;t.term_id||("add"===t.type?s in w?(t.term_id=s+(w[s].size+1),w[s].add(t.term_id)):w[s]=new Set:t.term_id=s);let r=t.term_id||s,i=n[r]||{};if(n[r]={term:s,added:i.added||t.added||Date.now(),type:t.term_type||i.type||"fixed",categories:{...t.categories||i.categories||{}},sense:"sense"in t?t.sense||"":i.sense||""},"replace"===t.type){let s="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete n[s],P({type:"add",entry:{type:"replace_term",name:r,value:n[r],originalName:s,originalValue:e[s]}})}else if(r in e){let t;let s=e[r],i=n[r];if(s.sense&&i.sense!==s.sense)t={field:"sense",new:i.sense,original:s.sense};else{let e=[];Object.keys(i.categories).forEach(t=>{i.categories[t]!==s.categories[t]&&e.push({category:t,from:s.categories[t]||0,to:i.categories[t]||0})}),Object.keys(s.categories).forEach(t=>{t in i.categories||e.push({category:t,from:s.categories[t],to:0})}),e.length?t={field:"categories",edits:e}:i.sense!==s.sense&&(t={field:"sense",new:i.sense,original:s.sense})}t&&P({type:"add",entry:{type:"edit_term",name:r,value:t}})}else P({type:"add",entry:{type:"add_term",name:r,value:n[r]}})}R({type:"collect",dictionary:n})}return W({type:"save",name:O.selected,dict:n}),n},{});return(0,r.useEffect)(()=>{O.dictionary_names.includes(O.selected)||(O.selected="default"),F(O.selected)},[]),(0,n.jsx)(c.Provider,{value:O,children:(0,n.jsx)(d.Provider,{value:z,children:(0,n.jsx)(j.Provider,{value:s,children:(0,n.jsx)(b.Provider,{value:E,children:(0,n.jsx)(v.Provider,{value:_,children:(0,n.jsx)(g.Provider,{value:T,children:(0,n.jsx)(y.Provider,{value:P,children:(0,n.jsx)(u.Provider,{value:W,children:(0,n.jsx)(h.Provider,{value:B,children:(0,n.jsx)(x.Provider,{value:D,children:(0,n.jsx)(m.Provider,{value:L,children:(0,n.jsx)(p.Provider,{value:R,children:(0,n.jsx)(f.Provider,{value:e=>{let t=Math.min(Math.max(-1,T.position+e),T.edits.length-1);if(t!==T.position){let e={...B},s={...T};(0,a.d)(t,s,e),P({type:"replace",history:s}),O.disable_storage||(0,l.cT)(O.selected,"dict_history_",s,M),L({type:"history_bulk",dict:e})}},children:t})})})})})})})})})})})})})}},24529:(e,t,s)=>{"use strict";s.d(t,{G:()=>N});var n=s(95155),r=s(6327),i=s(78416),a=s(36417),l=s(894),o=s(27753),c=s(10979),d=s(70152),u=s(22282),h=s(9561),m=s(60615),x=s(99489),p=s(26214),g=s(36289),y=s(20236),f=s(12115),j=s(16756),A=s(70648),b=s(9375),v=s(72926),C=s(53275),w=s(49234),_=s(46805),k=s(76239),S=s(64604);function E(e){let{name:t,current:s,edit:g}=e,y=(0,f.useContext)(b.GU),{terms:E,collapsedTerms:N,termLookup:O}=y,z=(0,f.useContext)(j.CB),M=(0,f.useMemo)(()=>{let e={};return Object.keys(z).forEach(t=>e[z[t].term||t]=!0),e},[z]),F=(0,f.useMemo)(()=>({all:";;"+Object.keys(M).join(";;")+";;"}),[M]),[P,T]=(0,f.useState)(!1),I=()=>T(!P),[W,D]=(0,f.useState)(!0),[R,B]=(0,f.useState)(!0),[L,G]=(0,f.useState)(!0),[q,U]=(0,f.useState)(!0),[K,H]=(0,f.useState)("1"),[J,V]=(0,f.useState)(""),[$,Y]=(0,f.useState)([]),[Q,X]=(0,f.useState)([]),Z=q?e=>O&&e in O:e=>e in M,ee=e=>{e&&!Q.includes(e)&&Z(e)&&X([...Q,e])};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{onClick:I,children:"Fill Weights"}),P&&(0,n.jsxs)(i.A,{open:P,onClose:I,children:[(0,n.jsx)(a.A,{children:"Category Weight Filler"}),(0,n.jsx)(l.A,{"aria-label":"close category weight filler",onClick:I,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(o.A,{sx:{minWidth:"300px",minHeight:"300px",p:1},children:(0,n.jsxs)(c.A,{spacing:2,children:[(0,n.jsx)(v.A,{title:R?"Weights will be similarity to the specified core terms":"Will use the specified value as the weight of all terms",placement:"right",children:(0,n.jsx)(m.A,{control:(0,n.jsx)(x.A,{size:"small",checked:R,onChange:()=>B(!R)}),label:(0,n.jsx)(h.A,{variant:"caption",children:"Similarity-based"}),labelPlacement:"start"})}),R&&E?(0,n.jsxs)(c.A,{children:[(0,n.jsx)(C.A,{multiple:!0,disableCloseOnSelect:!0,options:$,onKeyUp:e=>{let t="value"in e.target?e.target.value:"";if(("Enter"===e.code||"NumpadEnter"===e.code)&&J&&(!t||t===J)){ee(t);return}if(E){let e=[];if(t&&N){let s;try{s=RegExp(k.S.test(t)?(0,k.NM)(t):";"+t+"[^;]*;","g")}catch(e){s=RegExp(";"+t.replace(k.i0,"\\%&")+";","g")}(0,A.fu)("",s,q?N:F,e,100)}Q.forEach(t=>{e.includes(t)||e.push(t)}),Y(e)}},value:Q,onChange:(e,t)=>{1===Math.abs(t.length-Q.length)&&X([...t])},renderTags:(e,t)=>e.map((e,s)=>(0,f.createElement)(w.A,{label:e,...t({index:s}),key:e})),renderInput:e=>(0,n.jsx)(d.A,{...e,size:"small",label:"Core Terms","aria-label":"category weight core terms",value:J,onChange:e=>{Q.includes(e.target.value)||V(e.target.value)}}),filterOptions:e=>e,noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}),(0,n.jsxs)(_.A,{sx:{m:0,justifyContent:"space-between"},children:[(0,n.jsx)(u.A,{onClick:()=>{Y([]),X([])},children:"Clear"}),(0,n.jsx)(v.A,{title:q?"Allowing any terms from the full list on record":"Allowing only terms included in the category",placement:"top",children:(0,n.jsx)(m.A,{control:(0,n.jsx)(x.A,{size:"small",checked:q,onChange:()=>{Y([]),U(!q)}}),label:(0,n.jsx)(h.A,{variant:"caption",children:"Allow any terms"}),labelPlacement:"top"})}),(0,n.jsx)(v.A,{title:L?"Will rescaling similarities to be between 0 and 1":"Will display raw similarity values",placement:"top",children:(0,n.jsx)(m.A,{control:(0,n.jsx)(x.A,{size:"small",checked:L,onChange:()=>G(!L)}),label:(0,n.jsx)(h.A,{variant:"caption",children:"Scale"}),labelPlacement:"top"})})]})]}):(0,n.jsx)(d.A,{fullWidth:!0,size:"small",label:"Value",id:"category_weight_filler_value",value:K,onChange:e=>H(e.target.value)}),(0,n.jsx)(v.A,{title:W?"Will apply weight to all terms in the dictionary":"Will apply weight only to terms with weight in the current category",placement:"right",children:(0,n.jsx)(m.A,{control:(0,n.jsx)(x.A,{size:"small",checked:W,onChange:()=>D(!W)}),label:(0,n.jsx)(h.A,{variant:"caption",children:"Apply to all terms"}),labelPlacement:"start"})})]})}),(0,n.jsxs)(p.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(u.A,{onClick:I,children:"Cancel"}),(0,n.jsx)(u.A,{variant:"contained",onClick:()=>{let e={};if(R){let t=new Map;Q.forEach(e=>{let s=(0,A.Fr)(e,y,z,!0);"fixed"===s.type?t.set(e,s.lookup):s.matches.forEach(e=>{t.set(e,(0,A.Fr)(e,y,z,!0).lookup)})});let n=[1/0,-1/0];if(Object.keys(W?M:s).forEach(s=>{let r=0;t.forEach(e=>{let t=(0,A.Fr)(s,y,z);if("fixed"===t.type){let t=(0,S.F)(s,e);r+=1*(t.lemma||t.related||t.synset)+.1*(t.lemma_related||t.lemma_synset)+.01*(t.related_lemma||t.related_related||t.related_synset)+.001*(t.synset_lemma||t.synset_related||t.synset_synset)}else t.matches.forEach(t=>{let s=(0,S.F)(t,e);r+=1*(s.lemma||s.related||s.synset)+.1*(s.lemma_related||s.lemma_synset)+.01*(s.related_lemma||s.related_related||s.related_synset)+.001*(s.synset_lemma||s.synset_related||s.synset_synset)})}),L&&(n[0]>r&&(n[0]=r),n[1]<r&&(n[1]=r)),r&&(e[s]=r)}),L){let t=n[1]-n[0];Object.keys(e).forEach(s=>{e[s]=Math.max((e[s]-n[0])/t,1e-4)})}}else W?Object.keys(z).forEach(t=>e[t]=+K):Object.keys(s).forEach(t=>{s[t]&&(e[t]=+K)});let n=W?z:s,r={};Object.keys(n).forEach(t=>{if(t in e)r[t]=e[t];else if(W){let{term:s}=n[t];s&&s in e&&(r[t]=e[s])}}),g({type:"reweight_category",name:t,weights:r}),I()},children:"Fill"})]})]})]})}function N(e){let{category:t,onClose:s}=e,[v,C]=(0,f.useState)(!1),w=(0,f.useContext)(j.Md),_=(0,f.useContext)(b.GU),k=(0,f.useContext)(j.CB),S=(0,f.useContext)(j.yI),[N,O]=(0,f.useState)(t),[z,M]=(0,f.useState)(t);(0,f.useEffect)(()=>{M(t)},[t,M]),(0,f.useEffect)(()=>{O(z)},[z,O]);let F=(0,f.useContext)(j.W7),P=(0,f.useCallback)((e,s)=>{let{field:n,processed:r,dictEntry:i}=s;if(n){let n={...i.categories};t in n&&!e?delete n[t]:e&&(n[t]=+e),F({type:"update",term_id:s.id,term:r.term,term_type:r.term_type,categories:n})}},[F,t]),T=(0,f.useMemo)(()=>new Map(Object.keys(k).map((e,t)=>[t,e])),[k]),I=(0,f.useMemo)(()=>{let e={};return T.forEach(s=>{let{categories:n}=k[s];t in n&&(e[s]=n[t])}),e},[k,T,t]),W=(0,f.useMemo)(()=>{let e=[];return T.forEach(t=>{if(v||t in I){let s=k[t];e.push({id:t,term:s.term?s.sense&&t!==s.term?s.term+"@"+s.sense:s.term:t,weight:I[t]||"",dictEntry:s,processed:(0,A.Fr)(t,_,k)})}}),e},[_,k,T,v,I]);if(!t||!w.includes(t))return(0,n.jsx)(n.Fragment,{});let D=[{field:"term",headerName:"Term"},{field:"weight",headerName:"Weight",editable:!0,hideable:!1,valueParser:(e,t,s)=>{let n=+e||"";return s&&P(n,{...t,field:s.field}),n}}];return(0,n.jsxs)(i.A,{open:!!t,onClose:s,children:[(0,n.jsx)(a.A,{children:"Category Editor"}),(0,n.jsx)(l.A,{"aria-label":"close category editor",onClick:s,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(o.A,{sx:{p:1,width:"400px",maxWidth:"100%",height:"500px"},children:(0,n.jsxs)(c.A,{sx:{height:"100%"},children:[(0,n.jsxs)(c.A,{direction:"row",children:[(0,n.jsx)(d.A,{label:"Name",fullWidth:!0,value:N,onChange:e=>O(e.target.value),size:"small"}),N!==t&&(0,n.jsx)(u.A,{variant:"contained",onClick:()=>{F({type:"rename_category",name:t,newName:N})},children:"Rename"})]}),(0,n.jsxs)(c.A,{direction:"column",spacing:1,sx:{mt:2,height:"100%"},children:[(0,n.jsx)(h.A,{fontWeight:"bold",children:"Term Weights"}),(0,n.jsx)(m.A,{control:(0,n.jsx)(x.A,{size:"small",checked:v,onChange:()=>C(!v)}),label:(0,n.jsx)(h.A,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,n.jsx)(g.z,{className:"bottom-search datagrid-vertical",rows:W,columns:D,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:()=>(0,n.jsx)(y.b,{sx:{width:"200px"}})},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&"view"===e.cellMode&&P(0,{...e.row,field:e.field})}})]})]})}),(0,n.jsx)(p.A,{children:(0,n.jsxs)(c.A,{direction:"row",sx:{justifyContent:"space-between",width:"100%"},children:[(0,n.jsx)(u.A,{color:"error",variant:"contained",onClick:()=>{F({type:"remove_category",name:t}),S({type:"remove",cat:t}),s()},children:"Delete"}),(0,n.jsx)(E,{name:t,current:I,edit:F})]})})]})}},75088:(e,t,s)=>{"use strict";s.d(t,{p:()=>m});var n=s(95155),r=s(6327),i=s(22282),a=s(78416),l=s(36417),o=s(894),c=s(27753),d=s(9561),u=s(26214),h=s(12115);function m(e){let{label:t,message:s,onConfirm:m}=e,[x,p]=(0,h.useState)(!1),g=()=>p(!x);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{fullWidth:!0,color:"error",onClick:g,children:t}),x&&(0,n.jsxs)(a.A,{open:x,onClose:g,children:[(0,n.jsx)(l.A,{children:"Confirm"}),(0,n.jsx)(o.A,{"aria-label":"close confirmation dialog",onClick:g,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(c.A,{children:(0,n.jsx)(d.A,{children:s})}),(0,n.jsxs)(u.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(i.A,{onClick:g,children:"Cancel"}),(0,n.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{m(),g()},children:t})]})]})]})}},79224:(e,t,s)=>{"use strict";s.d(t,{B:()=>v,d:()=>b});var n=s(95155),r=s(41983),i=s(36017),a=s(60391),l=s(9561),o=s(64665),c=s(63551),d=s(10979),u=s(894),h=s(42479),m=s(4918),x=s(69841),p=s(22282),g=s(12115),y=s(16756),f=s(31837),j=s(38974),A=s(91082);function b(e,t,s){let n=t.position;if(e>t.position)for(n=Math.max(0,n);n<e+1;n++)t.edits[n]&&function(e,t){switch(e.type){case"add_term":delete t[e.name];return;case"remove_term":t[e.name]=e.value;return;case"replace_term":delete t[e.name],t[e.originalName]=e.originalValue;return;case"edit_term":if("categories"===e.value.field){let s={...t[e.name]};e.value.edits.forEach(e=>{e.from?s.categories[e.category]=e.from:delete s.categories[e.category]})}else t[e.name][e.value.field]=e.value.original;return;case"add_category":Object.keys(t).forEach(s=>{let n=t[s];Object.keys(n.categories).forEach(t=>{t in e.weights&&delete n.categories[t]})});return;case"remove_category":Object.keys(t).forEach(s=>{s in e.weights&&(t[s].categories[e.name]=e.weights[s])});return;case"reweight_category":Object.keys(t).forEach(s=>{e.originalWeights[s]?t[s].categories[e.name]=e.originalWeights[s]:delete t[s].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(s=>{let n=t[s];e.name in n.categories&&(n.categories[e.name]&&(n.categories[e.originalName]=n.categories[e.name]),delete n.categories[e.name])});return}}(t.edits[n],s);else for(n=Math.min(t.edits.length-1,n);n>e;n--)t.edits[n]&&function(e,t){switch(e.type){case"add_term":t[e.name]=e.value;return;case"remove_term":delete t[e.name];return;case"replace_term":delete t[e.originalName],t[e.name]=e.value;return;case"edit_term":if("categories"===e.value.field){let s={...t[e.name]};e.value.edits.forEach(e=>{e.to?s.categories[e.category]=e.to:delete s.categories[e.category]})}else t[e.name][e.value.field]=e.value.new;return;case"add_category":Object.keys(t).forEach(s=>{s in e.weights&&(t[s].categories[e.name]=e.weights[s])});return;case"remove_category":Object.keys(t).forEach(s=>{let n=t[s];n&&n.categories&&e.name in n.categories&&delete n.categories[e.name]});return;case"reweight_category":Object.keys(t).forEach(s=>{e.weights[s]?t[s].categories[e.name]=e.weights[s]:delete t[s].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(s=>{let n=t[s];e.originalName in n.categories&&(n.categories[e.originalName]&&(n.categories[e.name]=n.categories[e.originalName]),delete n.categories[e.originalName])});return}}(t.edits[n],s);t.position=e}function v(){let e=(0,g.useContext)(y.Zj),t=(0,g.useContext)(y.WZ),s=(0,g.useContext)(y.i6),b=(0,g.useMemo)(()=>e.edits.map((t,o)=>(0,n.jsx)(r.Ay,{sx:{p:0},children:(0,n.jsx)(i.A,{sx:{borderLeft:e.position>=o?"2px solid #fff":""},onClick:()=>s(o-e.position),children:(0,n.jsx)(a.A,{sx:{m:0},primary:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.A,{children:[(0,n.jsx)("span",{style:{opacity:".75"},children:t.type+": "}),t.name]}),"edit_term"===t.type?(0,n.jsx)(l.A,{className:"code",sx:{wordBreak:"break-all"},children:"categories"===t.value.field?t.value.edits.map(e=>e.category+": "+e.from+" -> "+e.to).join("\n"):t.value.field+": "+t.value.original+" -> "+t.value.new}):"rename_category"===t.type?(0,n.jsxs)(l.A,{className:"code",children:["From ",t.originalName]}):(0,n.jsx)(n.Fragment,{})]}),secondary:(0,n.jsx)(l.A,{sx:{fontSize:".8em",opacity:.6},variant:"body2",children:t.time?new Date(t.time).toLocaleString():""})})})},o)),[e,s]);return(0,n.jsxs)(o.A,{elevation:5,sx:{height:"60%",minHeight:"300px",position:"relative",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(c.A,{title:(0,n.jsx)(l.A,{fontWeight:"bold",children:"Edit History"}),sx:{pb:0}}),(0,n.jsxs)(d.A,{direction:"row",sx:{position:"absolute",top:8,right:8},children:[(0,n.jsx)(u.A,{onClick:()=>s(1),"aria-label":"undo",children:(0,n.jsx)(f.A,{})}),(0,n.jsx)(u.A,{onClick:()=>s(-1),"aria-label":"redo",children:(0,n.jsx)(j.A,{})}),(0,n.jsx)(u.A,{onClick:()=>s(-1e3),"aria-label":"jump to current",children:(0,n.jsx)(A.A,{})})]}),(0,n.jsx)(h.A,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,n.jsx)(m.A,{sx:{overflowX:"hidden"},children:b})}),(0,n.jsx)(x.A,{children:(0,n.jsx)(p.A,{variant:"contained",color:"warning",fullWidth:!0,onClick:()=>{t({type:"clear"})},children:"Clear"})})]})}},54766:(e,t,s)=>{"use strict";s.d(t,{P:()=>L});var n=s(95155),r=s(6327),i=s(31798),a=s(9313),l=s(89142),o=s(35761),c=s(22282),d=s(78416),u=s(36417),h=s(894),m=s(27753),x=s(10979),p=s(70152),g=s(22678),y=s(96821),f=s(72926),j=s(60615),A=s(99489),b=s(68998),v=s(26214),C=s(12115),w=s(16756),_=s(76239),k=s(4918),S=s(41983),E=s(36017),N=s(93596);function O(e){let{setName:t,setContent:s}=e,i=(0,C.useContext)(w.Fc),a=(0,C.useContext)(w.lj),[l,o]=(0,C.useState)(!1),x=()=>o(!l);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.A,{title:"select an existing dictionary to import as a copy",children:(0,n.jsx)(c.A,{variant:"outlined",onClick:x,children:"Copy"})}),l&&(0,n.jsxs)(d.A,{open:l,onClose:x,children:[(0,n.jsx)(u.A,{children:"Copy Dictionary"}),(0,n.jsx)(h.A,{"aria-label":"close export menu",onClick:x,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(m.A,{sx:{p:0},children:(0,n.jsx)(k.A,{sx:{p:0,pb:2},children:a.dictionary_names.map(e=>(0,n.jsx)(S.Ay,{sx:{p:0},children:(0,n.jsx)(E.A,{onClick:()=>(0,N.Dv)(e,n=>{t(a.dictionary_names.includes(e+" Copy")?e+" Copy"+(1e4*Math.random()>>0):e+" Copy"),s(JSON.stringify(n,void 0,2)),x()},i,!!a.use_db),children:e})},e))})})]})]})}let z=(0,l.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),M=/\t/,F=/\s\s/,P=/^\s+|\s+$/g,T=/^["\s]+|["\s]+$/g,I=/\s{2,}|\t+/g,W=/[[({]/,D=/[\])}]/,R=/(?:\\{1,2}\w|[\[\]\(\)?^$.+])/;function B(e,t,s,n,r){return{added:n,type:r&&function(e){if(!R.test(e))return!1;let t=W.test(e),s=D.test(e);return t&&s||!t&&!s}(e)?"regex":"fixed",categories:t,sense:s||"",term:e}}function L(e){let{children:t}=e,s=(0,o.A)(),l=(0,C.useContext)(w.ux),[k,S]=(0,C.useState)(""),[E,N]=(0,C.useState)(!1),W=()=>N(!E),[D,R]=(0,C.useState)(!1),[L,G]=(0,C.useState)(!1),[q,U]=(0,C.useState)(""),[K,H]=(0,C.useState)(""),[J,V]=(0,C.useState)(!0),$=()=>{S(""),U(""),H("")},Y=()=>{k&&(l({type:"add",name:k,dict:function(e,t){let s=Date.now(),n={},r=e=>{let t=e;return e in n?(t+=n[e].size+1,n[e].add(t)):n[e]=new Set,t},i={};if(e)try{if("%"===e[0]){let n=e.split(_.NN),a={},l=n.length;if(l>1){let e=1;for(e=1;e<l;e++){let t=n[e].replace(P,"");if("%"===t)break;let s=t.split(I);s.length>1&&s[1]&&(a[s[0]]=s[1])}for(e++;e<l;e++){let o=n[e].replace(P,"").split(I);if(o.length>1){let n=o.splice(0,1)[0].toLowerCase();if(n){let c={};o.forEach(e=>{e in a&&(c[a[e]]=1)});let[d,u]=n.split("@");i[r(d)]=B(d,c,u,s+l-e,t)}}}}}else if("{"===e[0]){let n=JSON.parse(e),r=Object.keys(n);if(r.length&&"type"in n[r[0]]&&"string"==typeof n[r[0]].type)return n;let a=0;r.forEach(e=>{if(e){let r=n[e];Array.isArray(r)?(a+=r.length,r.forEach((n,r)=>{if(n){let[l,o]=n.toLowerCase().split("@");l in i?i[l].categories[e]=1:i[l]=B(l,{[e]:1},o,s+a-r,t)}})):Object.keys(r).forEach((n,l)=>{if(a++,n){let[o,c]=n.toLowerCase().split("@");o in i?i[o].categories[e]=r[n]:i[o]=B(o,{[e]:r[o]},c,s+a-l,t)}})}})}else{let n=e.split(_.NN),a=M.test(n[0])?"	":F.test(n[0])?"  ":",",l=n[0].split(a).length>1,o=l?n.splice(0,1)[0].split(a).map(e=>e.replace(T,"")):[];l&&o.splice(0,1);let c="term_sense"===o[0],d=n.length;n.forEach((e,n)=>{let l=e.split(a).map(e=>e.replace(T,"")),u=l.splice(0,1)[0].toLowerCase();if(u){let e="",a={};l.forEach((t,s)=>{if(t&&o[s]){let n=+t;!e&&(c&&0===s||isNaN(n))?e=t:a[o[s]]=+t}}),i[r(u)]=B(u,a,e,s+d-n,t)}})}}catch(e){}return i}(q,D),password:L?K:""}),$(),N(!1))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{variant:"outlined",onClick:W,children:t}),(0,n.jsxs)(d.A,{open:E,onClose:W,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],s=new FileReader;s.onload=()=>{S((0,_.bz)(t.name)),U(s.result)},s.readAsText(t)}},children:[(0,n.jsx)(u.A,{children:"Add Dictionary"}),(0,n.jsx)(h.A,{"aria-label":"close import menu",onClick:W,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(m.A,{sx:{p:1},children:(0,n.jsxs)(x.A,{spacing:1,children:[(0,n.jsx)(p.A,{size:"small",label:"Name",value:k,onKeyDown:e=>{(k&&"Enter"===e.code||"NumpadEnter"===e.code)&&Y()},onChange:e=>{S(e.target.value)}}),(0,n.jsxs)(g.A,{children:[(0,n.jsx)(y.A,{sx:{fontSize:".8em"},htmlFor:"import_content",children:"Import Content"}),(0,n.jsx)("textarea",{id:"import_content",style:{backgroundColor:s.palette.background.default,color:s.palette.text.primary,whiteSpace:q?"pre":"normal",minWidth:"30em",minHeight:"20em"},value:q,onChange:e=>{U(e.target.value)},placeholder:"drag and drop a file, or enter content directly; see export menu for format examples"})]}),(0,n.jsx)(f.A,{title:"Attempt to convert terms to regular expressions if they contain special RegEx characters.",placement:"top",children:(0,n.jsx)(j.A,{label:"Detect RegEx",labelPlacement:"start",control:(0,n.jsx)(A.A,{checked:D,onChange:()=>R(!D)})})}),(0,n.jsx)(f.A,{title:"Encrypt dictionary and history when being stored.",placement:"right",children:(0,n.jsx)(j.A,{label:"Encrypt",labelPlacement:"start",control:(0,n.jsx)(A.A,{checked:L,onChange:()=>G(!L)})})}),L?(0,n.jsxs)(b.A,{children:[(0,n.jsx)(p.A,{fullWidth:!0,size:"small",label:"Password",type:J?"password":"text",value:K,onChange:e=>H(e.target.value)}),(0,n.jsx)(h.A,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>V(!J),children:J?(0,n.jsx)(i.A,{}):(0,n.jsx)(a.A,{})})]}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsxs)(v.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsxs)(x.A,{direction:"row",spacing:1,children:[(0,n.jsx)(O,{setName:S,setContent:U}),(0,n.jsx)(f.A,{title:"select a file to import a dictionary from",children:(0,n.jsxs)(c.A,{variant:"outlined",component:"label",children:["File",(0,n.jsx)(z,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],s=new FileReader;s.onload=()=>{S((0,_.bz)(t.name)),U(s.result),e.target.value=""},s.readAsText(t)}}})]})}),(0,n.jsx)(f.A,{title:"clear current content",children:(0,n.jsx)(c.A,{onClick:$,children:"clear"})})]}),(0,n.jsx)(c.A,{variant:"contained",disabled:!!L&&!K||!k,onClick:Y,children:"Add"})]})]})]})}},76719:(e,t,s)=>{"use strict";s.d(t,{CM:()=>_,Nd:()=>A,bq:()=>b});var n=s(95155),r=s(42479),i=s(69841),a=s(22282),l=s(19579),o=s(64665),c=s(68998),d=s(63551),u=s(894),h=s(10979),m=s(9561),x=s(12115),p=s(16756),g=s(7529),y=s(6327),f=s(13418),j=s(69265);let A=(0,x.createContext)([]),b=(0,x.createContext)(e=>{});function v(e){let{term:t}=e,s=(0,x.useContext)(p.CB),l=(0,x.useContext)(p.W7),o=t in s;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.A,{sx:{overflowY:"auto",pb:0,pt:0,height:"100%"},children:(0,n.jsx)(g.Lu,{term:t})}),(0,n.jsx)(i.A,{sx:{justifyContent:"flex-end",p:0},children:(0,n.jsx)(a.A,{onClick:()=>{l(o?{type:"remove",term_id:t}:{type:"add",term:t,term_type:"fixed"})},children:o?"Remove":"Add"})})]})}function C(e){let{info:t}=e;return(0,n.jsx)(r.A,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,n.jsx)(f.Np,{info:t})})}let w=-1;function _(e){let{height:t,setHeight:s}=e,r=(0,x.useContext)(p.CB),i=(0,x.useContext)(b),g=(0,x.useContext)(p.lj),f=(0,x.useContext)(p.gE),_=(0,x.useContext)(j.zn),k=(0,x.useContext)(A),S=(0,x.useCallback)(e=>{let n=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));n!==t&&(cancelAnimationFrame(w),w=requestAnimationFrame(()=>{s(n),window.dispatchEvent(new Event("resize"))}))},[s]),[E,N]=(0,x.useState)(!1),O=(0,x.useCallback)(e=>{N(!0),e.preventDefault(),document.body.style.cursor="ns-resize",window.addEventListener("mousemove",S)},[S]);if((0,x.useEffect)(()=>{let e=e=>{if(-1!==w){cancelAnimationFrame(w),N(!1),w=-1,document.body.style.cursor="default",window.removeEventListener("mousemove",S);let t=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));s(t),g.info_drawer_height=t,f({...g}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(g)),window.dispatchEvent(new Event("resize"))}};return window.addEventListener("mouseup",e),()=>window.removeEventListener("mouseup",e)},[S,g,f,s]),!k.length)return;let z=()=>{i({type:"reset"})},M=k[0];return M.value&&(0,n.jsx)(l.Ay,{open:!0,onClose:z,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:t+"vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,n.jsxs)(o.A,{children:[(0,n.jsx)(c.A,{sx:{width:"100%",backgroundColor:"#515151",height:"1px",position:"absolute",cursor:"ns-resize",border:E?"solid 2px #dab4ff":"","&:hover":{border:"solid 2px #dab4ff"}},onMouseDownCapture:O}),(0,n.jsx)(d.A,{sx:{p:1},action:(0,n.jsx)(u.A,{"aria-label":"Close info drawer",onClick:z,className:"close-button",children:(0,n.jsx)(y.A,{})}),title:(0,n.jsxs)(h.A,{direction:"row",children:[k.length>1?(0,n.jsx)(a.A,{onClick:()=>i({type:"back"}),sx:{opacity:.8},children:k[1].value}):(0,n.jsx)(n.Fragment,{}),M.value in r?(0,n.jsx)(a.A,{sx:{textTransform:"none",p:0},onClick:()=>_(M.value),children:(0,n.jsx)(m.A,{variant:"h3",children:M.value})}):(0,n.jsx)(m.A,{variant:"h3",children:M.value})]})}),"term"===M.type?(0,n.jsx)(v,{term:M.value}):(0,n.jsx)(C,{info:M.info})]})})}},66884:(e,t,s)=>{"use strict";async function n(e){let t=new Blob([JSON.stringify(e)]).stream().pipeThrough(new CompressionStream("gzip")).getReader(),s=[];for(;;){let{done:e,value:n}=await t.read();if(e)break;s.push(n)}return new Blob(s)}async function r(e){let t=e.stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(t).json()}s.d(t,{B:()=>n,m:()=>r})},76239:(e,t,s)=>{"use strict";s.d(t,{NM:()=>c,NN:()=>n,S:()=>i,To:()=>m,XQ:()=>r,bz:()=>p,i0:()=>a,ic:()=>d,qr:()=>l,tC:()=>u});let n=/[\r\n]+/,r=/\*/,i=/\*/g,a=/([\[\]\(\)*?^$.+])/g,l=/^;|;$/g,o=/([\[\]\(\)?^$.+])/g;function c(e){return";"+e.replace(o,"\\$&").replace(i,"[^;]*")+";"}function d(e,t){return e.length-t.length}function u(e,t){return t&&-1!==e?(1-e/t)*100:0}let h=/\./g;function m(e){return";"+e.replace(h,"[^;]")+";"}let x=/^.*[/\\]/;function p(e){return e.replace(x,"")}},66647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>e_});var n=s(95155),r=s(14826),i=s(35060),a=s(20457),l=s(12115),o=s(9375),c=s(16756),d=s(76719),u=s(69265),h=s(9552),m=s(68998),x=s(50839),p=s(10548),g=s(62434),y=s(11451),f=s(46805),j=s(10979),A=s(53275),b=s(70152),v=s(72926),C=s(894),w=s(22282),_=s(76239),k=s(90797),S=s(74781),E=s(71118),N=s(6327),O=s(41983),z=s(36017),M=s(60391),F=s(9561),P=s(19579),T=s(64665),I=s(63551),W=s(22678),D=s(43038),R=s(19212),B=s(91888),L=s(42479),G=s(4918),q=s(69841),U=s(54766),K=s(35761),H=s(78416),J=s(36417),V=s(27753),$=s(96821),Y=s(26214),Q=s(60615),X=s(99489);let Z=/\.\w{3,4}$/i;function ee(){let e=(0,K.A)(),t=(0,l.useContext)(c.lj),s=(0,l.useContext)(c.CB),[r,i]=(0,l.useState)(!1),a=()=>i(!r),[o,d]=(0,l.useState)("dic"),[u,h]=(0,l.useState)("csv"),[m,x]=(0,l.useState)(t.selected),[p,g]=(0,l.useState)("unweighted"),[y,f]=(0,l.useState)(!1),A=(0,l.useMemo)(()=>r?function(e,t,s,n,r){switch(t){case"tabular":let i=function(e){switch(e){case"csv":return",";case"tsv":return"	";default:return"  "}}(s),a=new Set;Object.values(e).forEach(e=>{let t=e.categories;t&&Object.keys(t).forEach(e=>a.add(e))});let l=Array.from(a),o=new Map(l.map((e,t)=>[t,e]));return'"term"'+i+'"'+(r?'term_sense"'+i+'"':"")+l.join('"'+i+'"')+'"\n'+Object.keys(e).map(t=>{let s=e[t],n=s.categories,a='"'+(s.term||t)+'"';return r&&(a+=i+s.sense),o.forEach(e=>{a+=i+(e in n?n[e]:"")}),a}).join("\n");case"dic":let c={},d=0,u="";return Object.keys(e).forEach(t=>{let s=e[t],n=s.categories;if(n){let e=[s.term||t];r&&s.sense&&(e[0]+="@"+s.sense),Object.keys(n).forEach(t=>{t in c||(c[t]=++d),e.push(c[t])}),u+="\n"+e.join("	")}}),"%\n"+Object.keys(c).map(e=>c[e]+"	"+e).join("\n")+"\n%"+u;case"json":if("full"===n)return JSON.stringify(e,void 0,2);let h={};if(Object.keys(e).forEach(t=>{let s=e[t],n=s.categories;if(n){let e=s.term||t;r&&s.sense&&(e+="@"+s.sense),Object.keys(n).forEach(t=>{t in h||(h[t]={}),h[t][e]=n[t]})}}),"weighted"===n)return JSON.stringify(h,void 0,2);let m={};return Object.keys(h).forEach(e=>{m[e]=Object.keys(h[e])}),JSON.stringify(m,void 0,2);default:return""}}(s,o,u,p,y):"",[r,s,o,u,p,y]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.A,{variant:"outlined",onClick:a,children:"Export"}),r&&(0,n.jsxs)(H.A,{open:r,onClose:a,children:[(0,n.jsx)(J.A,{children:"Export Dictionary"}),(0,n.jsx)(C.A,{"aria-label":"close export menu",onClick:a,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(N.A,{})}),(0,n.jsx)(V.A,{sx:{p:1},children:(0,n.jsxs)(j.A,{spacing:1,children:[(0,n.jsx)(b.A,{size:"small",label:"Filename",value:m,onChange:e=>{x(e.target.value)}}),(0,n.jsxs)(W.A,{children:[(0,n.jsx)($.A,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,n.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:A,readOnly:!0})]})]})}),(0,n.jsxs)(Y.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsxs)(j.A,{direction:"row",spacing:1,children:["json"!==o||"full"!==p?(0,n.jsx)(Q.A,{sx:{transform:"translate(0, -10px)"},control:(0,n.jsx)(X.A,{size:"small",checked:y,onChange:()=>f(!y)}),label:(0,n.jsx)(F.A,{variant:"caption",children:"Senses"}),labelPlacement:"top"}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(W.A,{children:[(0,n.jsx)(D.A,{id:"export_format",children:"Format"}),(0,n.jsxs)(R.A,{labelId:"export_format",label:"Format",size:"small",value:o,onChange:e=>{d(e.target.value)},children:[(0,n.jsx)(B.A,{value:"dic",children:"DIC"}),(0,n.jsx)(B.A,{value:"json",children:"JSON"}),(0,n.jsx)(B.A,{value:"tabular",children:"Tabular"})]})]}),"tabular"===o?(0,n.jsxs)(W.A,{children:[(0,n.jsx)(D.A,{id:"export_separator",children:"Type"}),(0,n.jsxs)(R.A,{labelId:"export_separator",label:"Type",size:"small",value:u,onChange:e=>{h(e.target.value)},children:[(0,n.jsx)(B.A,{value:"csv",children:"CSV"}),(0,n.jsx)(B.A,{value:"tsv",children:"TSV"}),(0,n.jsx)(B.A,{value:"dat",children:"DAT"})]})]}):(0,n.jsx)(n.Fragment,{})," ","json"===o?(0,n.jsxs)(W.A,{children:[(0,n.jsx)(D.A,{id:"export_json_type",children:"Type"}),(0,n.jsxs)(R.A,{labelId:"export_json_type",label:"Type",size:"small",value:p,onChange:e=>{g(e.target.value)},children:[(0,n.jsx)(B.A,{value:"weighted",children:"Weighted"}),(0,n.jsx)(B.A,{value:"unweighted",children:"Unweighted"}),(0,n.jsx)(B.A,{value:"full",children:"Full"})]})]}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)(w.A,{variant:"contained",onClick:()=>{if(m&&A){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([A],{type:"text/plain"}))),e.setAttribute("download",m.replace(Z,"")+"."+("tabular"===o?u:o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var et=s(79224),es=s(75088),en=s(24529);function er(){let e=(0,l.useContext)(c.lj),[t,s]=(0,l.useState)(!1),r=()=>s(!t),[i,a]=(0,l.useState)(""),o=(0,l.useContext)(c.ux),d=(0,l.useContext)(c.Md),u=(0,l.useContext)(c.yI),h=(0,l.useContext)(c.W7),[m,x]=(0,l.useState)(""),p=()=>{m&&-1===d.indexOf(m)&&(u({type:"add",cat:m}),x(""))},g=(0,l.useMemo)(()=>d.map(e=>(0,n.jsx)(O.Ay,{disablePadding:!0,disableGutters:!0,secondaryAction:(0,n.jsx)(C.A,{"aria-label":"delete category",sx:{opacity:.5},onClick:()=>{h({type:"remove_category",name:e}),u({type:"remove",cat:e})},children:(0,n.jsx)(S.A,{})}),children:(0,n.jsx)(z.A,{dense:!0,onClick:()=>a(e),children:(0,n.jsx)(M.A,{primary:e})})},e)),[d,h,u]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.A,{direction:"row",children:[(0,n.jsx)(C.A,{onClick:r,"aria-label":"open dictionary menu",children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(F.A,{sx:{display:{sm:"block",xs:"none"},fontSize:{md:"1.2em",sm:".8em"},maxWidth:{md:"285px",sm:"150px"},overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center"},noWrap:!0,children:e.selected})]}),t&&(0,n.jsx)(P.Ay,{anchor:"left",open:t,onClose:r,children:(0,n.jsxs)(T.A,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,n.jsx)(I.A,{title:(0,n.jsx)(F.A,{fontWeight:"bold",children:"Dictionary Menu"}),action:(0,n.jsx)(C.A,{onClick:r,"aria-label":"close dictionary menu",className:"close-button",children:(0,n.jsx)(N.A,{})})}),(0,n.jsxs)(j.A,{direction:"row",sx:{mb:2},children:[(0,n.jsxs)(W.A,{fullWidth:!0,children:[(0,n.jsx)(D.A,{id:"dictionary_select",children:"Current"}),(0,n.jsx)(R.A,{labelId:"dictionary_select",label:"Current",size:"small",value:e.selected,onChange:e=>{o({type:"set",name:e.target.value})},children:e.dictionary_names.map(e=>(0,n.jsx)(B.A,{value:e,children:e},e))})]}),(0,n.jsx)(U.P,{children:"New"})]}),(0,n.jsx)(L.A,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,n.jsxs)(j.A,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,n.jsxs)(T.A,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(I.A,{title:(0,n.jsx)(F.A,{fontWeight:"bold",children:"Categories"}),sx:{pb:0}}),(0,n.jsx)(L.A,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,n.jsx)(G.A,{dense:!0,children:g})}),(0,n.jsx)(q.A,{children:(0,n.jsxs)(j.A,{direction:"row",children:[(0,n.jsx)(b.A,{label:"New Category Name",size:"small",value:m,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,n.jsx)(w.A,{variant:"contained",onClick:p,children:"Add"})]})})]}),(0,n.jsx)(et.B,{})]})}),(0,n.jsx)(q.A,{children:(0,n.jsxs)(j.A,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,n.jsx)(ee,{}),(0,n.jsx)(es.p,{label:"Delete",message:"Delete the "+e.selected+" dictionary?",onConfirm:()=>{o({type:"delete",name:e.selected})}})]})})]})}),(0,n.jsx)(en.G,{category:i,onClose:()=>a("")})]})}var ei=s(70648),ea=s(74668);function el(e){let{terms:t,asTable:s,setAsTable:r,add:i}=e,[a,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[x,S]=(0,l.useState)(!1),[E,N]=(0,l.useState)([]),[O,z]=(0,l.useState)(!1),M=(0,l.useContext)(d.bq),{collapsedTerms:F}=(0,l.useContext)(o.GU),P=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:a:a;if(t){if(O){let e=t;try{e=new RegExp(e)}catch(e){}i(e,"regex")}else i(t,"fixed");N([]),u("")}},T=e=>{let t=e.target;if(t&&"value"in t&&"innerText"in t){let e=t["string"==typeof t.value?"value":"innerText"].toLowerCase();S((0,c.AA)(e)),u(e)}else u("")};return(0,n.jsx)(y.A,{component:"nav",children:(0,n.jsxs)(f.A,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,n.jsx)(er,{}),(0,n.jsxs)(j.A,{direction:"row",sx:{width:{sm:"calc(min(500px, 50%))",xs:"100%"}},spacing:{md:1,sm:0},children:[(0,n.jsx)(A.A,{options:E,value:a,onHighlightChange:(e,t)=>m(t||""),onKeyUp:e=>{if(("Enter"===e.code||"NumpadEnter"===e.code)&&(!h||h===a))return P(a);h!==a&&T(e)},onChange:T,renderInput:e=>(0,n.jsx)(b.A,{...e,size:"small",placeholder:"Term Search",value:a,onChange:e=>{T(e);let s=e.target.value;if(t){let e=[];if(s&&F){let t;try{t=RegExp(O?(0,_.To)(s):_.S.test(s)?(0,_.NM)(s):";"+s.replace(_.i0,"\\$&")+"[^;]*;","g")}catch(e){t=RegExp(";"+s.replace(_.i0,"\\$&")+";","g")}(0,ei.fu)("",t,F,e,100)}N(e)}},color:x?"warning":"primary"}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,n.jsx)(v.A,{title:"regular expression characters are "+(O?"active":"escaped"),children:(0,n.jsx)(C.A,{"aria-label":"toggle regular expression",onClick:()=>z(!O),children:O?(0,n.jsx)(p.A,{}):(0,n.jsx)(g.A,{})})}),(0,n.jsx)(w.A,{sx:{width:"6.7em",display:{sm:"block",xs:"none"}},variant:"outlined",disabled:!a,onClick:()=>{a&&(M({type:"add",state:{type:"term",value:a}}),x&&(0,ea.o8)(a))},children:"View"}),(0,n.jsx)(w.A,{variant:"contained",onClick:()=>P(),disabled:!a,children:"Add"})]}),(0,n.jsxs)(j.A,{direction:"row",children:[(0,n.jsx)(w.A,{variant:"outlined",sx:{width:{md:100,sm:70},p:{md:1,sm:0},display:{sm:"block",xs:"none"}},onClick:()=>r(!s),children:s?"Analyze":"Edit"}),(0,n.jsx)(k.J,{})]})]})})}var eo=s(31798),ec=s(9313);function ed(){let e=(0,l.useContext)(c.No),t=(0,l.useContext)(c.KS),s=(0,l.useContext)(c.Fc),r=(0,l.useContext)(c.ux),[i,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!0),u=!1,h=()=>{a(!1),x(""),s(""),!u&&e&&"coarse_sense_map"!==e&&r({type:"set",name:"default"}),t("")},[m,x]=(0,l.useState)(""),p=()=>{m&&(a(!1),t(m).then(()=>{u=!0,s(""),x("")}).catch(()=>{x(""),a(!0)}))};return(0,n.jsxs)(H.A,{open:!!e,onClose:h,children:[(0,n.jsx)(J.A,{children:"Encrypted Resource"}),(0,n.jsx)(C.A,{"aria-label":"close export menu",onClick:h,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(N.A,{})}),(0,n.jsxs)(V.A,{sx:{p:1},children:[(0,n.jsxs)(F.A,{sx:{mb:2},children:["The ",(0,n.jsx)("span",{className:"number",children:e})," resource is encrypted."]}),(0,n.jsx)(b.A,{fullWidth:!0,label:"Password",size:"small",type:o?"password":"text",value:m,error:i,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,n.jsx)(C.A,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>d(!o),children:o?(0,n.jsx)(eo.A,{}):(0,n.jsx)(ec.A,{})})]}),(0,n.jsxs)(Y.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(w.A,{onClick:h,children:"Cancel"}),(0,n.jsx)(w.A,{variant:"contained",onClick:p,disabled:!m,children:"Decrypt"})]})]})}var eu=s(2091),eh=s(83726),em=s(1396),ex=s(64604);let ep={type:"graph",layout:"force",size_by_value:!0,hide_zeros:!1,label_threshold:0,repulsion:100,gravity:.1,edge_length:40},eg={include_fuzzy:!1,dense:!1,min_sim:.001};function ey(e,t){return{...e,[t.key]:t.value}}function ef(){let e=(0,l.useContext)(c.CB),t=(0,l.useContext)(c.Md),[s,r]=(0,l.useReducer)(ey,ep),[i,a]=(0,l.useReducer)(ey,eg),[o,d]=(0,l.useState)([]),{allTerms:u,catCounts:h}=(0,l.useMemo)(()=>{let t={},s=new Map(Object.keys(e).map(s=>{let n=Object.keys(e[s].categories);return(n.length?n:["no categories"]).forEach(e=>{e in t?t[e]++:t[e]=1}),[e[s].term||s,e[s]]}));return{catCounts:t,allTerms:s}},[e]),x=(0,l.useMemo)(()=>{let e=[...t];return"no categories"in h&&!e.includes("no categories")&&e.push("no categories"),e},[t,h]);return(0,l.useEffect)(()=>{d(o.filter(e=>x.includes(e)))},[x]),(0,n.jsxs)(j.A,{direction:"row",sx:{height:"100%"},children:[(0,n.jsx)(m.A,{sx:{height:"100%",minWidth:"250px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,n.jsxs)(m.A,{sx:{pl:1,pr:1,height:"100%",display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(m.A,{sx:{overflowY:"auto"},children:[(0,n.jsx)(F.A,{variant:"h6",children:"Terms"}),(0,n.jsx)(G.A,{dense:!0,sx:{overflowY:"auto",overflowX:"hidden",maxHeight:"300px",p:0},children:Object.keys(h).map(e=>(0,n.jsx)(O.Ay,{disablePadding:!0,disableGutters:!0,children:(0,n.jsxs)(z.A,{disableGutters:!0,"aria-label":"toggle category",onClick:()=>{let t=[...o],s=t.indexOf(e);-1===s?t.push(e):t.splice(s,1),d(t)},children:[(0,n.jsx)(eu.A,{sx:{minWidth:"35px"},children:(0,n.jsx)(eh.A,{sx:{p:0},checked:o.includes(e)})}),(0,n.jsx)(M.A,{sx:{m:0},primary:e,secondary:h[e]+" terms"})]})},e))}),(0,n.jsxs)(f.A,{sx:{justifyContent:"space-between"},variant:"dense",disableGutters:!0,children:[(0,n.jsxs)(j.A,{direction:"row",children:[(0,n.jsx)(w.A,{size:"small",sx:{minWidth:"1px"},onClick:()=>{d([...x])},children:"All"}),(0,n.jsx)(w.A,{size:"small",sx:{minWidth:"1px"},onClick:()=>{d([])},children:"None"})]}),(0,n.jsx)(F.A,{sx:{pr:1,whiteSpace:"nowrap"},children:o.length+" / "+x.length+" selected"})]}),(0,n.jsxs)(j.A,{spacing:2,children:[(0,n.jsx)(v.A,{title:"Include all matches to fuzzy terms in the comparison.",placement:"right",children:(0,n.jsx)(Q.A,{label:"Fuzzy Matches",labelPlacement:"start",control:(0,n.jsx)(X.A,{size:"small",checked:i.include_fuzzy,onChange:()=>a({key:"include_fuzzy",value:!i.include_fuzzy})})})}),(0,n.jsx)(v.A,{title:"Include second-order term relationships in similarity calculations, resulting in a denser network.",placement:"right",children:(0,n.jsx)(Q.A,{label:"Secondary Connections",labelPlacement:"start",control:(0,n.jsx)(X.A,{size:"small",checked:i.dense,onChange:()=>a({key:"dense",value:!i.dense})})})}),(0,n.jsx)(v.A,{title:"Will consider nodes with similarity equal to or less than this as unconnected.",placement:"right",children:(0,n.jsx)(b.A,{value:i.min_sim,type:"number",size:"small",inputProps:{min:0,max:1,step:.01},label:"Similarity Threshold",onChange:e=>a({key:"min_sim",value:e.target.value})})})]})]}),(0,n.jsxs)(m.A,{sx:{overflowY:"auto"},children:[(0,n.jsx)(F.A,{variant:"h6",sx:{mt:2},children:"Plot Options"}),(0,n.jsxs)(j.A,{spacing:2,children:[(0,n.jsx)(Q.A,{label:"Hide Zeros",labelPlacement:"start",control:(0,n.jsx)(X.A,{size:"small",checked:s.hide_zeros,onChange:()=>r({key:"hide_zeros",value:!s.hide_zeros})})}),(0,n.jsx)(Q.A,{label:"Size By Value",labelPlacement:"start",control:(0,n.jsx)(X.A,{size:"small",checked:s.size_by_value,onChange:()=>r({key:"size_by_value",value:!s.size_by_value})})}),(0,n.jsx)(v.A,{title:"Will not show labels for nodes with values lower than this.",placement:"right",children:(0,n.jsx)(b.A,{value:s.label_threshold,type:"number",size:"small",label:"Label Threshold",inputProps:{min:0,step:.5},onChange:e=>r({key:"label_threshold",value:e.target.value})})}),(0,n.jsxs)(W.A,{fullWidth:!0,children:[(0,n.jsx)(D.A,{id:"graph_layout_select",children:"Layout"}),(0,n.jsxs)(R.A,{labelId:"graph_layout_select",label:"Layout",size:"small",value:s.layout||"force",onChange:e=>{r({key:"layout",value:e.target.value})},children:[(0,n.jsx)(em.A,{children:"Canvas"}),(0,n.jsx)(B.A,{value:"none",children:"Random"}),(0,n.jsx)(B.A,{value:"circular",children:"Circular"}),(0,n.jsx)(B.A,{value:"force",children:"Force"}),(0,n.jsx)(em.A,{children:"WebGL"}),(0,n.jsx)(B.A,{value:"forceAtlas2",children:"ForceAtlas2"})]})]}),"force"===s.layout&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.A,{title:"Repulsion factor between nodes.",placement:"right",children:(0,n.jsx)(b.A,{value:s.repulsion,type:"number",size:"small",label:"Repulsion",inputProps:{min:0},onChange:e=>r({key:"repulsion",value:e.target.value})})}),(0,n.jsx)(v.A,{title:"Nodes' strength of attraction to the center.",placement:"right",children:(0,n.jsx)(b.A,{value:s.gravity,type:"number",size:"small",label:"Gravity",inputProps:{min:0,step:.1},onChange:e=>r({key:"gravity",value:e.target.value})})}),(0,n.jsx)(v.A,{title:"Base distance between nodes.",placement:"right",children:(0,n.jsx)(b.A,{value:s.edge_length,type:"number",size:"small",label:"Edge Length",inputProps:{min:0},onChange:e=>r({key:"edge_length",value:e.target.value})})})]})]})]})]})}),(0,n.jsx)(ex.A,{allTerms:u,catCounts:h,selectedCategories:o,options:i,plotOptions:s})]})}let ej=/^category_/;function eA(){let[e,t]=(0,l.useState)(!0),s=(0,l.useContext)(c.CB),r=(0,l.useContext)(c.Md),{terms:i}=(0,l.useContext)(o.GU),a=(0,l.useContext)(c.W7),p=(0,l.useCallback)((e,t)=>{let{field:s,processed:n,dictEntry:r}=t,i="from_term_editor"===s;if(r&&(i||s.startsWith("category_"))){let l={...r.categories},o=i?t.id:s.replace(ej,"");o in l&&!e?delete l[o]:e&&(l[o]=+e),a({type:"update",term_id:t[i?"term_id":"id"],term:n.term,term_type:n.term_type,categories:l,sense:r.sense})}},[a]),g=(0,l.useContext)(u.kU),y=(0,l.useContext)(d.Nd),f=g in s,j=(0,l.useContext)(c.lj),[A,b]=(0,l.useState)(j.info_drawer_height||30),v=y.length?A:0;return(0,n.jsxs)(h.A,{children:[(0,n.jsx)(el,{terms:i,asTable:e,setAsTable:t,add:(e,t)=>{a({type:"add",term:e,term_type:t})}}),(0,n.jsxs)(m.A,{sx:{position:"absolute",top:0,left:0,bottom:0,right:(f?j.term_editor_width||200:0)+"px",mt:"3em",mb:v+"vh"},children:[e?(0,n.jsx)(x.A,{editFromEvent:p}):(0,n.jsx)(ef,{}),f&&(0,n.jsx)(u._h,{categories:r,editor:p,width:j.term_editor_width||200}),(0,n.jsx)(d.CM,{height:A,setHeight:b})]}),(0,n.jsx)(ed,{})]})}let eb=(0,r.A)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}}),ev=-1;function eC(){window.dispatchEvent(new Event("resize"))}let ew=(e,t)=>{switch("reset"!==t.type&&e.length||(cancelAnimationFrame(ev),ev=requestAnimationFrame(eC)),t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function e_(){let[e,t]=(0,l.useReducer)(ew,[]),[s,r]=(0,l.useState)("");return(0,n.jsx)(l.StrictMode,{children:(0,n.jsxs)(i.A,{theme:eb,children:[(0,n.jsx)(a.Ay,{}),(0,n.jsx)(o.EC,{children:(0,n.jsx)(c.tI,{children:(0,n.jsx)(d.Nd.Provider,{value:e,children:(0,n.jsx)(d.bq.Provider,{value:e=>requestAnimationFrame(()=>t(e)),children:(0,n.jsx)(u.kU.Provider,{value:s,children:(0,n.jsx)(u.zn.Provider,{value:(e,t)=>{requestAnimationFrame(()=>{(s||t)&&e||(cancelAnimationFrame(ev),ev=requestAnimationFrame(eC)),(0,ea.o8)(e),r(e)})},children:(0,n.jsx)(eA,{})})})})})})})]})})}},70648:(e,t,s)=>{"use strict";s.d(t,{Fr:()=>m,GL:()=>p,Jc:()=>c,fu:()=>o});var n=s(50839),r=s(13418),i=s(76239);let a={},l={};async function o(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=s[t.source[1]in s?t.source[1]:"all"];for(let s,o="";n.length<r&&(s=t.exec(a));)(o=s[0].replace(i.qr,""))&&(n.push(o),!e||o in l||(l[o]=e))}function c(e){return e in l?l[e]:""}async function d(e,t,s){s.forEach((s,n)=>{e[n]=!0,t[n]=!0})}async function u(e,t){let s=e.lookup,n=s.any;e.lemma.forEach(e=>{let r=m(e,t).lookup;d(n,s.lemma_related,r.related_map),d(n,s.lemma_synset,r.synset_map)}),e.related.forEach(e=>{let r=m(e,t).lookup;d(n,s.related_lemma,r.lemma_map),d(n,s.related_related,r.related_map),d(n,s.related_synset,r.synset_map)}),e.synset_terms.forEach(e=>{let r=m(e,t).lookup;d(n,s.synset_lemma,r.lemma_map),d(n,s.synset_related,r.related_map),d(n,s.synset_synset,r.synset_map)}),s.expanded=!0,s.map=new Map(Object.keys(n).map(e=>[e,!0]))}function h(e,t){try{return new RegExp(e,t)}catch(t){return e}}function m(e,t,s,n){let l="string"==typeof e&&s&&e in s,c=l&&s[e].term?s[e].term:e,d=l&&"regex"===s[e].type?"regex":"fixed",m=c+"_"+d;m in a||(a[m]=function(e,t){let s="string"==typeof e;if(s&&!i.XQ.test(e))return function(e,t){let{terms:s,lemmas:n,termLookup:i,termAssociations:a,synsetInfo:l}=t,o={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:s&&i&&i[e]||-1,lemma:[],related:[],synsets:[],synset_terms:[],lookup:{expanded:!1,map:new Map,any:{},lemma:{},lemma_map:new Map,lemma_related:{},lemma_synset:{},related:{},related_map:new Map,related_lemma:{},related_related:{},related_synset:{},synset:{},synset_map:new Map,synset_lemma:{},synset_related:{},synset_synset:{}}};if(a&&l&&n&&s&&-1!==o.index){o.recognized=!0;let t=a[o.index];o.related=t&&t[0]&&Array.isArray(t[0])?t[0].filter((e,t)=>!!t).map(e=>s[e-1]):[],o.synsets=t&&t[1]?(Array.isArray(t[1])?t[1]:[t[1]]).map(e=>l[e-1]):[];let i=new Set;o.synsets.forEach(e=>{(0,r.eY)(e,s,l).forEach(e=>{e!==o.term&&i.add(e)})}),o.synset_terms=Array.from(i);let c=s&&n&&e in n?n["number"==typeof n[e]?s[n[e]]:e]:[];o.lemma="number"==typeof c?[s[c]]:c.map(e=>s[e]),function(e){let{lemma:t,related:s,synset_terms:n,lookup:r}=e;t.forEach(e=>{r.any[e]=!0,r.lemma[e]=!0,r.lemma_map.set(e,!0)}),s.forEach(e=>{r.any[e]=!0,r.related[e]=!0,r.related_map.set(e,!0)}),n.forEach(e=>{r.any[e]=!0,r.synset[e]=!0,r.synset_map.set(e,!0)})}(o)}return o}(e,t);{let n=s?(0,i.NM)(e):e.source,r={type:"fuzzy",term_type:s?"glob":"regex",term:s?e:e.source,categories:{},recognized:!1,regex:h(s?n:(0,i.To)(n),"g"),matches:[]};return t.collapsedTerms&&o(r.term,r.regex,t.collapsedTerms,r.matches),r.recognized=!!r.matches.length,r}}("regex"===d?h(c):c,t));let x=a[m];return n&&"fixed"===x.type&&!x.lookup.expanded&&u(x,t),x}async function x(e,t,s,n,r){let a=m(s,r,n),l=n[s],o="fixed"===a.type?{processed:a,dictEntry:l,id:s,term:l.term||s,sense:l.sense,matches:a.recognized?1:0,ncats:Object.keys(l.categories).length,frequency:(0,i.tC)(a.index,r.terms&&r.terms.length).toFixed(2),senses:a.synsets.length,related:a.related.length}:{processed:a,dictEntry:l,id:s,term:l.term||s,sense:l.sense,matches:a.matches.length,ncats:Object.keys(l.categories).length};if(l.categories){let e=l.categories;Object.keys(e).forEach(t=>{o["category_"+t]=e[t]})}e[t]=o}async function p(e,t,s){return clearTimeout(n.d.dictionary),new Promise(r=>{let i=Object.freeze(Object.keys(e)),a=i.length,l=Array(a),o=0,c=0,d=()=>{for(clearTimeout(n.d.dictionary);o<a&&c<1e3;o++,c++)x(l,o,i[o],e,t);o!==a?(c=0,s&&s(o/a),n.d.dictionary=setTimeout(d,0)):(s&&s(1),r(l))};n.d.dictionary=setTimeout(d,0)})}},9375:(e,t,s)=>{"use strict";s.d(t,{EC:()=>b,GU:()=>g,qJ:()=>y});var n=s(95155),r=s(66257),i=s(51677),a=s(10979),l=s(9561),o=s(4918),c=s(41983),d=s(2091),u=s(96854),h=s(12115),m=s(76239),x=s(93596),p=s(66884);let g=(0,h.createContext)({senseMap:{},senseMapOptions:{store:!0},SenseLookup:{},NLTKLookup:{},collapsedSenses:"",collapsedNLTK:""}),y=(0,h.createContext)((e,t,s)=>{}),f=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"conceptNet",label:"ConceptNet"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}];function j(e,t,s,n){if(e in s){let r=s[e];("number"==typeof r?[r]:r).forEach(e=>{let r=n[e],i=r[t];i?i.push(s.index+1):r[t]=[s.index+1]})}}let A=/[\s-]+/g;function b(e){let{children:t}=e,[s,b]=(0,h.useState)(),[v,C]=(0,h.useState)(),[w,_]=(0,h.useState)(),[k,S]=(0,h.useState)(),[E,N]=(0,h.useState)(),[O,z]=(0,h.useState)(),[M,F]=(0,h.useState)(),[P,T]=(0,h.useState)(),[I,W]=(0,h.useState)({}),[D,R]=(0,h.useState)({store:!0}),[B,L]=(0,h.useState)({}),[G,q]=(0,h.useState)({}),[U,K]=(0,h.useState)(""),[H,J]=(0,h.useState)(""),[V,$]=(0,h.useState)(!0),[Y,Q]=(0,h.useState)(!0),[X,Z]=(0,h.useState)(!0),[ee,et]=(0,h.useState)(!0),[es,en]=(0,h.useState)(!0);(0,h.useEffect)(()=>{(0,x.VQ)("terms").then(e=>{e&&e.content?(0,p.m)(e.content).then(e=>{b(Object.freeze(e.arr)),_(Object.freeze(e.obj)),S(Object.freeze(e.collapsed)),$(!1)}):fetch("/dictionary_builder/data/terms.txt").then(async e=>{if(!e.ok)throw"failed to fetch terms: "+e.status+" ("+e.statusText+")";let t=Object.freeze((await e.text()).split(m.NN));b(t);let s={all:";;"+t.join(";;")+";;"},n={};t.forEach((e,t)=>{n[e]=t;let r=e[0];r&&(r in s?s[r]+=e+";;":s[r]=";;"+e+";;")}),_(Object.freeze(n)),S(Object.freeze(s)),(0,x.a_)("terms",{arr:t,obj:n,collapsed:s})}).finally(()=>$(!1))})},[$]),(0,h.useEffect)(()=>{(0,x.VQ)("term_associations").then(e=>{e&&e.content?(0,p.m)(e.content).then(e=>{N(e),Q(!1)}):fetch("/dictionary_builder/data/term_associations.json").then(async e=>{if(!e.ok)throw"failed to fetch term associations: "+e.status+" ("+e.statusText+")";let t=await e.json();N(t),(0,x.a_)("term_associations",t)}).finally(()=>Q(!1))})},[Q]),(0,h.useEffect)(()=>{(0,x.VQ)("conceptnet").then(e=>{e&&e.content?(0,p.m)(e.content).then(e=>{z(e),Z(!1)}):fetch("/dictionary_builder/data/conceptnet.json").then(async e=>{if(!e.ok)throw"failed to fetch ConceptNet: "+e.status+" ("+e.statusText+")";let t=await e.json();z(t),(0,x.a_)("conceptnet",t)}).finally(()=>Z(!1))})},[Q]),(0,h.useEffect)(()=>{(0,x.VQ)("sense_keys").then(e=>{e&&e.content?(0,p.m)(e.content).then(e=>{F(Object.freeze(e)),et(!1)}):fetch("/dictionary_builder/data/sense_keys.txt").then(async e=>{if(!e.ok)throw"failed to fetch sense keys: "+e.status+" ("+e.statusText+")";let t=(await e.text()).split(m.NN);F(Object.freeze(t)),(0,x.a_)("sense_keys",t)}).finally(()=>et(!1))})},[et]),(0,h.useEffect)(()=>{(0,x.VQ)("synset_info").then(e=>{e&&e.content?(0,p.m)(e.content).then(e=>{T(e),en(!1)}):fetch("/dictionary_builder/data/synset_info.json").then(async e=>{if(!e.ok)throw"failed to fetch synsets: "+e.status+" ("+e.statusText+")";let t=await e.json(),s=t.map((e,s)=>(e.index=s,j("hypernym","hyponym",e,t),j("instance_hypernym","instance_hyponym",e,t),j("domain_topic","domain_topic_members",e,t),e));T(s),(0,x.a_)("synset_info",s)}).finally(()=>en(!1))})},[en]),(0,h.useEffect)(()=>{if(s&&E){let e={};E.forEach((t,n)=>{if(t.length){let r=t[0],i="number"==typeof r?r:r.length?r[0]:0;if(i){let t=s[n],r=s[i-1],a=e[r];a&&"function"!=typeof a?"number"==typeof a?e[r]=[i-1,a,n]:a.push(n):e[r]=[i-1,n],e[t]=i-1}}}),C(e)}},[s,E]),(0,h.useEffect)(()=>{if(s&&M&&P){let e={},t={};P.forEach((n,r)=>{if(e[M[r]]=r,n.sense_index&&n.members){let e=n.sense_index+"",i="number"==typeof n.members?n.members:n.members[0];if(i){let a=s[i-1].replace(A,"_")+"."+n.id.substring(n.id.length-1)+"."+(1===e.length?"0":"")+e;t[a]=r,n.nltk_id=a}}}),L(e),q(t),K(";;"+M.join(";;")+";;"),J(";;"+Object.keys(t).join(";;")+";;")}},[s,M,P]);let er=(0,h.useMemo)(()=>({terms:s,lemmas:v,termLookup:w,collapsedTerms:k,termAssociations:E,conceptNet:O,sense_keys:M,synsetInfo:P,senseMap:I,senseMapOptions:D,NLTKLookup:G,SenseLookup:B,collapsedSenses:U,collapsedNLTK:H}),[s,v,w,k,E,O,M,P,I,D,G,B,U,H]),ei={terms:V,termAssociations:Y,conceptNet:X,sense_keys:ee,synsetInfo:es};return(0,n.jsx)(g.Provider,{value:er,children:v&&P?(0,n.jsx)(y.Provider,{value:(e,t,s)=>{W(e),t.store&&(0,x.cT)("coarse_sense_map","",e,!0,s),t.rawMap&&(R(t),t.store&&(0,x.cT)("coarse_sense_map","original_",t.rawMap,!0,s))},children:t}):(0,n.jsxs)(a.A,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,n.jsx)(l.A,{variant:"h4",children:"Loading Resources..."}),(0,n.jsx)(o.A,{children:f.map(e=>{let{key:t,label:s}=e;return(0,n.jsxs)(c.Ay,{dense:!0,children:[(0,n.jsx)(d.A,{sx:{minWidth:"35px",mb:1},children:er[t]?(0,n.jsx)(r.A,{color:"success"}):ei[t]?(0,n.jsx)(u.A,{size:"1.5rem"}):(0,n.jsx)(i.A,{color:"error",sx:{marginBottom:-.8}})}),(0,n.jsxs)(l.A,{children:[er[t]||ei[t]?"":"Failed to load ",s]})]},t)})})]})})}},90797:(e,t,s)=>{"use strict";s.d(t,{J:()=>ea,M:()=>ei});var n=s(95155),r=s(77159),i=s(6327),a=s(894),l=s(19579),o=s(64665),c=s(63551),d=s(9561),u=s(42479),h=s(78562),m=s(10979),x=s(60615),p=s(99489),g=s(72926),y=s(68998),f=s(70152),j=s(69841),A=s(22282),b=s(12115),v=s(16756),C=s(75088),w=s(93596),_=s(31798),k=s(9313),S=s(89142),E=s(78416),N=s(36417),O=s(27753),z=s(22678),M=s(43038),F=s(19212),P=s(91888),T=s(26214),I=s(9375);let W=(0,S.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),D=/^"|"$/g,R=/"*,"*/,B=/[\r\n]+/,L=/%/;function G(){let{sense_keys:e,SenseLookup:t,NLTKLookup:s}=(0,b.useContext)(I.GU),[r,l]=(0,b.useState)(!1),o=()=>l(!r),[c,u]=(0,b.useState)(!0),[h,j]=(0,b.useState)(!1),[v,C]=(0,b.useState)([]),[w,S]=(0,b.useState)([]),[G,q]=(0,b.useState)(["",""]),[U,K]=(0,b.useState)(!1),[H,J]=(0,b.useState)([0,0,0]),[V,$]=(0,b.useState)({}),[Y,Q]=(0,b.useState)(""),[X,Z]=(0,b.useState)(!0),ee=(0,b.useContext)(I.qJ),et=()=>{C([]),S([]),Q("")},es=(n,r,i)=>{let a=function(e,t,s){let n={};if(e&&-1!==t&&-1!==s)try{e.forEach(e=>{let r=e[t],i=e[s];if(r&&i&&i.length){if(r in n){let e=n[r];e.includes(i)||e.push(i)}else n[r]=[i]}})}catch(e){}return n}(n,r,i),l={},o=Object.keys(a);if(o.length&&e){let n=!L.test(o[0]);K(n);let r=n?s:t,i=new Set,c=0;o.forEach(t=>{let o=a[t];"string"==typeof o?i.add(o):o.forEach(e=>i.add(e)),t in r&&(c++,l[n?e[s[t]]:t]=o)}),J([o.length,c,i.size])}$(l)},en=e=>{if(e.length>1){let t=e.splice(0,1)[0].replace(D,"").split(R),s=e.map(e=>e.replace(D,"").split(R));S(Object.freeze(s)),C(t),t.length>1&&(q([t[0],t[1]]),es(s,0,1))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{variant:"outlined","aria-label":"import coarse sense map",onClick:o,children:"Import"}),(0,n.jsxs)(E.A,{open:r,onClose:o,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],s=new FileReader;s.onload=()=>{en(s.result.split(B))},s.readAsText(t)}},children:[(0,n.jsx)(N.A,{children:"Import Coarse Sense Mappings"}),(0,n.jsx)(a.A,{"aria-label":"close coarse sense import menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(i.A,{})}),(0,n.jsxs)(O.A,{sx:{p:1,minWidth:"400px"},children:[w.length>1?(0,n.jsxs)(m.A,{spacing:1,direction:"row",children:[(0,n.jsxs)(y.A,{sx:{width:"50%"},children:[(0,n.jsx)(g.A,{title:"Name of the column containing fine-grained sense labels (such as sense keys).",placement:"left",children:(0,n.jsxs)(z.A,{fullWidth:!0,children:[(0,n.jsx)(M.A,{id:"fine_sense_select",children:"Fine Senses"}),(0,n.jsx)(F.A,{labelId:"fine_sense_select",label:"Fine Senses",size:"small",value:G[0],onChange:e=>{let t=e.target.value,s=[t,G[G[1]===t?0:1]];es(w,v.indexOf(s[0]),v.indexOf(s[1])),q(s)},children:v.map((e,t)=>(0,n.jsx)(P.A,{value:e,children:e},e+t))})]})}),(0,n.jsxs)(d.A,{sx:{pl:2},variant:"caption",children:[(0,n.jsxs)("span",{className:"number",children:[H[1]," "]}),"of",(0,n.jsxs)("span",{className:"number",children:[" ",H[0]," "]}),"recognized"]})]}),(0,n.jsxs)(y.A,{sx:{width:"50%"},children:[(0,n.jsx)(g.A,{title:"Name of the column containing coarse-grained sense labels (such as sense clusters).",placement:"right",children:(0,n.jsxs)(z.A,{fullWidth:!0,children:[(0,n.jsx)(M.A,{id:"coarse_sense_select",children:"Coarse Senses"}),(0,n.jsx)(F.A,{labelId:"coarse_sense_select",label:"Coarse Senses",size:"small",value:G[1],onChange:e=>{let t=e.target.value,s=[G[G[0]===t?1:0],t];es(w,v.indexOf(s[0]),v.indexOf(s[1])),q(s)},children:v.map((e,t)=>(0,n.jsx)(P.A,{value:e,children:e},e+t))})]})}),(0,n.jsxs)(d.A,{sx:{pl:2},variant:"caption",children:[(0,n.jsxs)("span",{className:"number",children:[" ",H[2]," "]}),"unique labels"]})]})]}):(0,n.jsx)(d.A,{sx:{p:2},children:"Select a CSV file with columns containing fine- and coarse-gained sense labels."}),(0,n.jsxs)(m.A,{spacing:1,children:[(0,n.jsxs)(m.A,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:[(0,n.jsx)(g.A,{title:"Store the imported map locally.",placement:"top",children:(0,n.jsx)(x.A,{label:"Store",labelPlacement:"start",control:(0,n.jsx)(p.A,{checked:c,onChange:()=>u(!c)})})}),c?(0,n.jsx)(g.A,{title:"Encrypt the sense map when being stored.",placement:"right",children:(0,n.jsx)(x.A,{label:"Encrypt",labelPlacement:"start",control:(0,n.jsx)(p.A,{checked:h,onChange:()=>j(!h)})})}):(0,n.jsx)(n.Fragment,{})]}),c&&h?(0,n.jsxs)(y.A,{children:[(0,n.jsx)(f.A,{fullWidth:!0,size:"small",label:"Password",type:X?"password":"text",value:Y,onChange:e=>Q(e.target.value)}),(0,n.jsx)(a.A,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>Z(!X),children:X?(0,n.jsx)(_.A,{}):(0,n.jsx)(k.A,{})})]}):(0,n.jsx)(n.Fragment,{})]})]}),(0,n.jsxs)(T.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsxs)(m.A,{direction:"row",spacing:1,children:[(0,n.jsx)(g.A,{title:"select a file to import a coarse sense map from",children:(0,n.jsxs)(A.A,{variant:"outlined",component:"label",children:["File",(0,n.jsx)(W,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],s=new FileReader;s.onload=()=>{en(s.result.split(B)),e.target.value=""},s.readAsText(t)}}})]})}),(0,n.jsx)(g.A,{title:"clear any loaded content",children:(0,n.jsx)(A.A,{onClick:et,children:"clear"})})]}),(0,n.jsx)(A.A,{variant:"contained",disabled:!!h&&!Y,onClick:()=>{ee(V,{rawMap:{header:v,selectedCols:G,rows:w,NLTKLabels:U},store:c},Y),et(),l(!1)},children:"Set"})]})]})]})}var q=s(35761),U=s(96821);function K(){let e=(0,q.A)(),{senseMap:t,senseMapOptions:s,synsetInfo:r,sense_keys:l,SenseLookup:o,NLTKLookup:c}=(0,b.useContext)(I.GU),u=s.rawMap,[h,g]=(0,b.useState)(!1),y=()=>g(!h),[j,v]=(0,b.useState)("coarse_sense_map"),[C,w]=(0,b.useState)(!!u&&u.NLTKLabels),[_,k]=(0,b.useState)(!!u),S=(0,b.useMemo)(()=>{let e=[_&&u?u.header.join(","):'"fine_sense","coarse_sense"'],s=Object.keys(t);if(s.length&&l&&r){if(_&&u){let{header:n,selectedCols:i,rows:a,NLTKLabels:d}=u,h=n.indexOf(i[0]),m=n.indexOf(i[1]);if(-1!==h&&-1!==m){let i={};a.forEach(s=>{let n=d?l[c[s[h]]]:s[h],a=s[m];if(n in t&&-1!==t[n].indexOf(a)){let t=[...s];d&&!C?t[h]=l[c[s[h]]]:!d&&C&&n in o&&(t[h]=r[o[n]].nltk_id),e.push(t.join(",")),i[t[h]+a]=!0}}),s.forEach(s=>{let a=t[s];if(C&&s in o){let{nltk_id:e}=r[o[s]];s=e}let l=n.length;a.forEach(t=>{let n=s+t;if(s&&t&&!(n in i)){let n=Array(l);n[h]=s,n[m]=t,e.push(n.join(","))}})})}}else s.forEach(s=>{let n=t[s];if(C&&s in o){let{nltk_id:e}=r[o[s]];s=e}s&&n&&n.forEach(t=>e.push('"'+s+'","'+t+'"'))})}return e.length>1?e.join("\n"):""},[h,C,_]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{variant:"outlined",onClick:y,children:"Export"}),h&&(0,n.jsxs)(E.A,{open:h,onClose:y,children:[(0,n.jsx)(N.A,{children:"Export Coarse Sense Map"}),(0,n.jsx)(a.A,{"aria-label":"close export menu",onClick:y,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(i.A,{})}),(0,n.jsx)(O.A,{sx:{p:1},children:(0,n.jsxs)(m.A,{spacing:1,children:[(0,n.jsx)(f.A,{size:"small",label:"Filename",value:j,onChange:e=>{v(e.target.value)}}),(0,n.jsxs)(z.A,{children:[(0,n.jsx)(U.A,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,n.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:S,readOnly:!0})]})]})}),(0,n.jsxs)(T.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(x.A,{control:(0,n.jsx)(p.A,{size:"small",checked:C,onChange:()=>w(!C)}),label:(0,n.jsx)(d.A,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"top"}),(0,n.jsx)(x.A,{control:(0,n.jsx)(p.A,{size:"small",checked:_,onChange:()=>k(!_),disabled:!u}),label:(0,n.jsx)(d.A,{variant:"caption",children:"Match Import Format"}),labelPlacement:"top"}),(0,n.jsx)(A.A,{variant:"contained",onClick:()=>{if(j&&S){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([S],{type:"text/plain"}))),e.setAttribute("download",j+".csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var H=s(74781),J=s(53275),V=s(49234),$=s(36289),Y=s(20236),Q=s(75131);function X(e){let{coarseLabels:t,useNLTK:s}=e,[r,l]=(0,b.useState)(!1),o=()=>l(!r),{senseMap:c,senseMapOptions:d}=(0,b.useContext)(I.GU),u=(0,b.useContext)(I.qJ),[h,x]=(0,b.useState)([]),[p,g]=(0,b.useState)(""),[y,j]=(0,b.useState)([]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{sx:{position:"absolute",left:16,bottom:16},onClick:o,children:"New Pairs"}),(0,n.jsxs)(E.A,{open:r,onClose:o,children:[(0,n.jsx)(N.A,{children:"Sense Mappings"}),(0,n.jsx)(a.A,{"aria-label":"close sense map editor",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(i.A,{})}),(0,n.jsxs)(O.A,{sx:{p:1,minWidth:"500px"},children:[(0,n.jsx)(Q.A,{sx:{mb:1},children:"Define fine to coarse sense mappings:"}),(0,n.jsxs)(m.A,{direction:"row",spacing:1,children:[(0,n.jsx)(et,{selected:h,setSelected:x,multi:!0,useNLTK:s}),(0,n.jsx)(J.A,{componentsProps:{popper:{className:"synset-select"}},multiple:!0,disableCloseOnSelect:!0,options:t,value:y,onChange:(e,t)=>j([...t]),renderTags:(e,t)=>e.map((e,s)=>(0,b.createElement)(V.A,{label:e,...t({index:s}),key:e})),inputValue:p,onInputChange:(e,t)=>g(t),renderInput:e=>(0,n.jsx)(f.A,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})]})]}),(0,n.jsxs)(T.A,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(A.A,{onClick:o,children:"Cancel"}),(0,n.jsx)(A.A,{variant:"contained",onClick:()=>{let e={...c};h.forEach(t=>{if(t in c){let s=[...e[t]];y.forEach(e=>{s.includes(e)||s.push(e)}),e[t]=s}else e[t]=y}),u(e,{store:d.store}),x([]),j([]),o()},children:"Add"})]})]})]})}var Z=s(70648),ee=s(76239);function et(e){let{selected:t,setSelected:s,multi:r,useNLTK:i,editCell:a,params:l}=e,{synsetInfo:o,SenseLookup:c,collapsedSenses:u,NLTKLookup:h,collapsedNLTK:m}=(0,b.useContext)(I.GU),[x,p]=(0,b.useState)([]),[y,j]=(0,b.useState)(""),A=i?h:c;return o?(0,n.jsx)(J.A,{componentsProps:{popper:{className:"synset-select"}},multiple:r,autoSelect:!0,options:x,onKeyUp:e=>{let s=("value"in e.target?e.target.value:"").toLowerCase(),n=[];if(s){let e;try{e=RegExp(ee.S.test(s)?(0,ee.NM)(s):";"+s+"[^;]*;","g")}catch(t){e=RegExp(";"+s.replace(ee.i0,"\\%&")+";","g")}(0,Z.fu)("",e,{all:i?m:u},n,100)}t.forEach(e=>{n.includes(e)||n.push(e)}),p(n)},value:r?t:t[0],onChange:(e,t)=>{if(t){let e="string"==typeof t?[t]:[...t];a&&l&&a({...l,newValue:e}),s(e)}},renderTags:(e,t)=>e.map((e,s)=>(0,b.createElement)(V.A,{label:e,...t({index:s}),key:e})),renderInput:e=>(0,n.jsx)(f.A,{...e,size:"small",label:"Fine Senses",value:y,onChange:e=>{t.includes(e.target.value)||j(e.target.value)}}),renderOption:(e,t)=>{if(t in A){delete e.key;let{definition:s}=o[(i?h:c)[t]];return(0,b.createElement)(P.A,{...e,value:t,key:t},(0,n.jsx)(g.A,{title:s,placement:"right",children:(0,n.jsx)(d.A,{sx:{width:"100%"},children:t})}))}},noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}):(0,n.jsx)(n.Fragment,{})}function es(e,t){let s=e.split("||"),n=s[0],r={...t},i=r[n];return 1===i.length?delete r[n]:(i.splice(+s[2],1),r[n]=[...i]),{newMap:r,fine:s[0],coarse:s[1],index:s[2]}}function en(e){let{params:t,labels:s,senseMap:r,senseMapStore:i,updateSenseMap:a}=e,[l,o]=(0,b.useState)("");return(0,n.jsx)(J.A,{componentsProps:{popper:{className:"synset-select"}},disableCloseOnSelect:!0,options:s,value:t.value,onChange:(e,s)=>{let{newMap:n,fine:l}=es(t.id,r);l in n?n[l].push(s):n[l]=[s],a(n,{store:i}),t.api.setEditCellValue({...t,value:s})},inputValue:l,onInputChange:(e,t)=>o(t),renderInput:e=>(0,n.jsx)(f.A,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})}function er(){let[e,t]=(0,b.useState)(!1),s=()=>t(!e),{senseMap:r,senseMapOptions:l,synsetInfo:o,SenseLookup:c}=(0,b.useContext)(I.GU),u={store:l.store},h=(0,b.useContext)(I.qJ),g=(0,b.useMemo)(()=>{let e=new Set;return Object.values(r).forEach(t=>t.forEach(t=>t&&e.add(t))),Object.freeze(Array.from(e))},[r]),[y,f]=(0,b.useState)(!1),j=(0,b.useMemo)(()=>[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,n.jsx)(a.A,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{let{newMap:t}=es(e.id,r);h(t,u)},children:(0,n.jsx)(H.A,{sx:{fontSize:".9em"}})})},{field:"fine",headerName:"Fine",width:180,hideable:!1,editable:!0,renderEditCell:e=>(0,n.jsx)(et,{selected:[e.value],setSelected:t=>{let{newMap:s,coarse:n}=es(e.id,r),i=t[0];i in s?s[i].push(n):s[i]=[n],h(s,u)},multi:!1,useNLTK:y,editCell:e.api.setEditCellValue,params:e})},{field:"coarse",headerName:"Coarse",width:125,hideable:!1,editable:!0,renderEditCell:e=>(0,n.jsx)(en,{params:e,labels:g,senseMap:r,senseMapStore:l.store,updateSenseMap:h})},{field:"definition",headerName:"Fine Definition",width:210}],[r]),v=(0,b.useMemo)(()=>{let e=[];return o&&Object.keys(r).forEach((t,s)=>{let n=r[t],i=o[c[t]];i&&n.forEach(n=>{e.push({id:t+"||"+n+"||"+s,fine:y?i.nltk_id:t,definition:i.definition,coarse:n,info:i})})}),e},[r,o,y]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{variant:"outlined","aria-label":"edit coarse sense map",onClick:s,children:"Edit"}),(0,n.jsxs)(E.A,{open:e,onClose:s,children:[(0,n.jsx)(N.A,{children:"Sense Map Editor"}),(0,n.jsx)(a.A,{"aria-label":"close sense map editor",onClick:s,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(i.A,{})}),(0,n.jsx)(O.A,{sx:{p:1},children:(0,n.jsxs)(m.A,{sx:{height:"500px"},spacing:1,children:[(0,n.jsx)(x.A,{control:(0,n.jsx)(p.A,{size:"small",checked:y,onChange:()=>f(!y)}),label:(0,n.jsx)(d.A,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"start"}),(0,n.jsx)($.z,{className:"datagrid-vertical",rows:v,columns:j,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnSelector:!0,pageSizeOptions:[100],density:"compact",editMode:"row",slots:{toolbar:()=>(0,n.jsx)(Y.b,{})}}),(0,n.jsx)(X,{coarseLabels:g,useNLTK:y})]})})]})]})}function ei(){let e=localStorage.getItem("dictionary_builder_settings"),t=e?JSON.parse(e):{dictionary_names:["default"],selected:"default",use_db:!0};return t.dictionary_names||(t.dictionary_names=["default"]),t.selected&&t.dictionary_names.includes(t.selected)||(t.selected="default"),"use_db"in t||(t.use_db=!0),t}function ea(){let e=(0,b.useContext)(v.gE),t=(0,b.useContext)(v.lj),s=(0,b.useContext)(I.qJ),{senseMap:_,senseMapOptions:k}=(0,b.useContext)(I.GU),[S,E]=(0,b.useState)(!1),N=()=>E(!S),O=(0,b.useContext)(v.i6),[z,M]=(0,b.useState)(t.undo||"z"),[F,P]=(0,b.useState)(t.redo||"x"),[T,W]=(0,b.useState)(!!t.disable_storage),[D,R]=(0,b.useState)(!!t.use_db),B={undo:M,redo:P},L=(0,b.useCallback)(e=>{if((e.ctrlKey||e.metaKey)&&(!e.target||!("tagName"in e.target)||"INPUT"!==e.target.tagName))switch(e.key){case F:O(-1);break;case z:O(1)}},[z,F,O]);(0,b.useEffect)(()=>(window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}),[L]);let q=s=>{let n=s.target.name;if(n&&n in B){let r=s.target.value;window.removeEventListener("keydown",L),t[n]=r,B[n](r),e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t))}},U=Object.keys(_).length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{onClick:N,"aria-label":"toggle settings menu",children:(0,n.jsx)(r.A,{})}),(0,n.jsx)(l.Ay,{anchor:"right",open:S,onClose:N,children:(0,n.jsxs)(o.A,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,n.jsx)(c.A,{title:(0,n.jsx)(d.A,{fontWeight:"bold",children:"Settings"}),action:(0,n.jsx)(a.A,{onClick:N,"aria-label":"close settings menu",className:"close-button",children:(0,n.jsx)(i.A,{})}),sx:{p:1}}),(0,n.jsxs)(u.A,{sx:{alignContent:"left",mb:"auto",p:0,overflowY:"auto","& .MuiPaper-root":{ml:.5,mr:.5,mb:1,p:.5}},children:[(0,n.jsx)(d.A,{fontWeight:"bold",children:"Storage"}),(0,n.jsx)(h.A,{elevation:3,children:(0,n.jsxs)(m.A,{spacing:1,children:[(0,n.jsx)(x.A,{label:"Disable","aria-label":"disable storage",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,n.jsx)(p.A,{checked:T,size:"small",onChange:s=>{t.disable_storage=!T,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),W(!T)}})}),T?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(g.A,{title:"IndexedDB can store larger dictionaries, but it may be a bit slower.",children:(0,n.jsx)(x.A,{label:"IndexedDB",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,n.jsx)(p.A,{checked:D,size:"small",onChange:s=>{t.use_db=!D,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),R(!D)}})})})]})}),(0,n.jsx)(d.A,{fontWeight:"bold",children:"Keybinds"}),(0,n.jsx)(h.A,{elevation:3,children:(0,n.jsxs)(y.A,{children:[(0,n.jsx)(d.A,{variant:"caption",children:"CTRL + "}),(0,n.jsxs)(m.A,{spacing:2,children:[(0,n.jsx)(f.A,{size:"small",label:"Undo",name:"undo",value:z,onChange:q}),(0,n.jsx)(f.A,{size:"small",label:"Redo",name:"redo",value:F,onChange:q})]})]})}),(0,n.jsx)(d.A,{fontWeight:"bold",children:"Coarse Senses"}),(0,n.jsx)(h.A,{elevation:3,children:(0,n.jsxs)(m.A,{spacing:1,children:[(0,n.jsx)(G,{}),(0,n.jsx)(er,{}),U?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.A,{children:["Mapped senses: ",(0,n.jsxs)("span",{className:"number",children:[U," "]})]}),(0,n.jsx)(K,{}),(0,n.jsx)(C.p,{label:"Remove",message:"The stored coarse sense map will be deleted.",onConfirm:()=>{indexedDB.deleteDatabase("dictionary_builder_coarse_sense_map"),s({},{store:k.store})}})]}):(0,n.jsx)(n.Fragment,{})]})})]}),(0,n.jsx)(j.A,{children:(0,n.jsxs)(m.A,{spacing:2,children:[(0,n.jsx)(A.A,{variant:"contained",color:"warning",onClick:()=>{indexedDB.deleteDatabase("dictionary_builder_resources"),location.reload()},children:"Refresh Resources"}),(0,n.jsx)(C.p,{label:"Clear Storage",message:"Clearing storage will delete all settings, dictionaries, and edit history.",onConfirm:()=>{t.dictionary_names&&t.dictionary_names.forEach(e=>{(0,w.Od)(e,"dict_"),(0,w.Od)(e,"dict_history_")}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()}})]})})]})})]})}},93596:(e,t,s)=>{"use strict";s.d(t,{Ym:()=>v,Dv:()=>w,FB:()=>b,VQ:()=>m,Rq:()=>_,Od:()=>p,ik:()=>C,a_:()=>x,cT:()=>g});let n={resources:7,building:1,coarse_sense_map:1};function r(e){return new Promise(t=>{let s=indexedDB.open("dictionary_builder_"+e,n[e]);s.onupgradeneeded=()=>{let t=s.result;t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e,{keyPath:"name"})},s.onsuccess=()=>{t(s.result)}})}let i={setItem:async function(e,t){let s=await r(t);return new Promise(n=>{if(s){let r=s.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).put(e);r.onerror=t=>{throw Error("failed to store item "+e.name)},r.onsuccess=()=>n(!0)}else throw Error})},getItem:async function(e,t){let s=await r(t);return new Promise(n=>{if(s){let r=s.transaction([t],"readonly",{durability:"relaxed"}).objectStore(t).get(e);r.onerror=()=>n(null),r.onsuccess=()=>{n(r.result)}}else n(null)})},removeItem:async function(e,t){let s=await r(t);return new Promise(n=>{if(s){let r=s.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).delete(e);r.onerror=()=>n(!1),r.onsuccess=()=>n(!0)}else n(!1)})}};var a=s(66884);let l={},o=new TextEncoder;async function c(e,t,s){if(!(e in l)){let n=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);l[e]={salt:s,key:await crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:1e6,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}return l[e]}async function d(e,t,s){let n=!s||e in l?l[e]:await c(e,s,crypto.getRandomValues(new Uint8Array(16)));if(n)try{let e=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:e},n.key,new Uint8Array(await (await (0,a.B)(t)).arrayBuffer()));return new Blob([e,n.salt,s])}catch(t){console.error("failed to encrypt "+e+": "+t)}}function u(e){return new Promise(async t=>{t(await fetch("data:application/octet-stream;base64,"+e.substring(1)).then(e=>e.blob()))})}async function h(e,t,s){let n=await ("string"==typeof t?(await u(t)).arrayBuffer():t.arrayBuffer()),r=s?await c(e,s,new Uint8Array(n,12,16)):l[e];if(r)try{let e=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(n,0,12)},r.key,new Uint8Array(n,28));return(0,a.m)(new Blob([e]))}catch(t){console.error("failed to decrypt "+e+": "+t)}}async function m(e){return await i.getItem(e,"resources")}async function x(e,t){i.setItem({name:e,encrypted:!1,content:await (0,a.B)(t)},"resources")}async function p(e,t){delete l[e],i.removeItem(t+e,"coarse_sense_map"===e?e:"building"),localStorage.removeItem(t+e)}async function g(e,t,s,n,r){let o=!!r||e in l,c=await (o?d(e,s,r):(0,a.B)(s));if(c)try{n?i.setItem({name:t+e,encrypted:o,content:c},"coarse_sense_map"===e?e:"building"):localStorage.setItem(t+e,await new Promise(e=>{let t=new FileReader;t.readAsDataURL(c),t.onloadend=async()=>{e((o?"e":"c")+t.result.split(";base64,")[1])}}))}catch(t){console.error("failed to store "+e)}}let y=new Map,f={running:""};async function j(e,t,s,n,r,o){let c=t+e;if(!y.has(c)){y.set(c,[...arguments]);let t=e=>{y.delete(c),s(e);let t=y.keys().next();if(t.value){f.running=t.value;let e=y.get(t.value);e&&(y.delete(t.value),j.apply(void 0,e))}};if(1===y.size&&(f.running=c),c===f.running){let s="coarse_sense_map"===e?e:"building",d=n?await i.getItem(c,"coarse_sense_map"===c?c:s):localStorage.getItem(c);if(d||(d=n?localStorage.getItem(c):await i.getItem(c,s)),d){if("string"==typeof d&&("{"===d[0]||"c"===d[0]))t("{"===d[0]?JSON.parse(d):await (0,a.m)(await u(d)));else if("string"==typeof d||d.encrypted){let s="string"==typeof d?d:d.content;e in l?t(await h(e,s)):r(e,()=>async n=>{if(n){let r=await h(e,s,n);if(r)t(r);else throw y.delete(c),delete l[e],Error}else t()})}else t(await (0,a.m)(d.content))}else t(o)}}}let A={};async function b(e,t,s,n){j(e,"dict_history_",e=>{e&&t(e)},n,s,{edits:[],position:-1})}function v(e){delete A[e]}function C(e,t,s,n){A[e]=t,g(e,"dict_",t,s,n)}async function w(e,t,s,n){e in A?t(A[e]):j(e,"dict_",s=>{s&&(A[e]=s,t(s))},n,s,{})}async function _(e,t){j("coarse_sense_map","original_",s=>{s&&j("coarse_sense_map","",t=>t?e(t,{rawMap:s,store:!0}):void 0,!0,t,{})},!0,t,void 0)}},13418:(e,t,s)=>{"use strict";s.d(t,{Hs:()=>p,Np:()=>v,eY:()=>f});var n=s(95155),r=s(72926),i=s(9561),a=s(66656),l=s(68998),o=s(4918),c=s(10979),d=s(12115),u=s(9375),h=s(76719),m=s(7529),x=s(16756);function p(e){let{senseKey:t,info:s}=e,l=(0,d.useContext)(h.bq);return(0,n.jsx)(r.A,{title:s.definition,placement:"right",children:(0,n.jsxs)(i.A,{sx:{display:"flex","& span":{pl:.5}},children:[(0,n.jsx)(a.A,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer"},onClick:()=>l({type:"add",state:{type:"synset",value:t,info:s}}),children:t}),s.count&&(0,n.jsx)("span",{className:"number-annotation",children:" "+s.count})]})})}function g(e,t){return Array.isArray(e)?e.map(e=>t[e-1]):[t[e-1]]}let y={attribute:!0,domain_topic:!0,similar:!0,also:!0,domain_region:!0,exemplifies:!0,mero_part:!0,hypernym:!0,instance_hypernym:!0,mero_member:!0,mero_substance:!0,entails:!0,causes:!0,derivation:!0,pertainym:!0,agent:!0,antonym:!0,body_part:!0,by_means_of:!0,destination:!0,event:!0,instrument:!0,location:!0,material:!0,participle:!0,property:!0,result:!0,state:!0,undergoer:!0,uses:!0,vehicle:!0,hyponym:!0,instance_hyponym:!0,domain_topic_members:!0};function f(e,t,s){let n=new Set(g(e.members,t));return Object.keys(e).forEach(r=>{if(r in y){var i;(Array.isArray(i=e[r])?"number"==typeof i[0]?i.map(e=>s[e-1]):[]:"number"==typeof i?[s[i-1]]:[]).forEach(e=>g(e.members,t).forEach(e=>n.add(e)))}}),Array.from(n)}function j(e){let{name:t,info:s}=e,r=s[t],a=(0,d.useContext)(x.CB),c=(0,d.useContext)(x.W7),g=(0,d.useContext)(h.bq),{terms:y,sense_keys:f,synsetInfo:j}=(0,d.useContext)(u.GU);return y&&f&&j?(0,n.jsxs)(l.A,{sx:{m:1},children:[(0,n.jsx)(i.A,{variant:"h5",children:t}),(0,n.jsx)(o.A,{children:"string"==typeof r?r:"members"===t?y&&(Array.isArray(r)?r.map(e=>(0,m.yq)(y[e-1],a,c,g)):(0,m.yq)(y[r-1],a,c,g)):Array.isArray(r)?r.map(e=>{let t=j[e-1];return(0,n.jsx)(p,{senseKey:f[e-1],info:t},e)}):(0,n.jsx)(p,{senseKey:f[r-1],info:j[r-1]})})]},t):(0,n.jsx)(n.Fragment,{})}let A={id:0,index:0,count:0,ili:0,definition:0,topic:0,csi_labels:0,wikidata:0,source:0,sense_index:0,nltk_id:0,babelnet:0},b={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function v(e){let{info:t}=e,{sense_keys:s,senseMap:o}=(0,d.useContext)(u.GU),h=s?s[t.index]:"",m=h&&h in o?o[h]:t.csi_labels;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{variant:"h6",children:t.definition}),(0,n.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,n.jsxs)(l.A,{children:[(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID:"," ",(0,n.jsx)(a.A,{href:"https://en-word.net/id/oewn-"+t.id,rel:"noreferrer",target:"_blank",children:t.id})]}),t.ili&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,n.jsx)("span",{className:"number",children:t.ili})]}),t.nltk_id&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Natural Language Toolkit ID: ",(0,n.jsx)("span",{className:"number",children:t.nltk_id})]}),t.babelnet&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["BabelNet ID:"," ",(0,n.jsx)(a.A,{href:"https://babelnet.org/synset?lang=EN&id="+t.babelnet,rel:"noreferrer",target:"_blank",children:t.babelnet})]})]}),(0,n.jsxs)(l.A,{children:[(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,n.jsx)("span",{className:"number",children:b[t.id.substring(t.id.length-1)]})]}),(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,n.jsx)("span",{className:"number",children:t.topic})]}),m&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Coarse Labels: ",(0,n.jsx)("span",{className:"number",children:"string"==typeof m?m:m.join(", ")})]}),t.count&&(0,n.jsx)(r.A,{title:"frequency within the combined SemCor and One Million Sense-Tagged Instances training data",children:(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["SemCor+OMSTI Count: ",(0,n.jsx)("span",{className:"number",children:t.count})]})})]}),(t.wikidata||t.source)&&(0,n.jsxs)(l.A,{children:[t.source&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Source: ",(0,n.jsx)("span",{className:"number",children:t.source})]}),t.wikidata&&(0,n.jsxs)(i.A,{component:"p",variant:"caption",sx:{ml:1},children:["Wikidata:"," ",(0,n.jsx)(a.A,{href:"https://www.wikidata.org/wiki/"+t.wikidata,rel:"noreferrer",target:"_blank",children:t.wikidata})]})]})]}),(0,n.jsx)(c.A,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in A)).map(e=>(0,n.jsx)(j,{name:e,info:t},e))})]})}},74668:(e,t,s)=>{"use strict";s.d(t,{XI:()=>P,o8:()=>M});var n=s(95155),r=s(10979),i=s(894),a=s(91888),l=s(2091),o=s(60391),c=s(12115),d=s(11758),u=s(31837),h=s(38974),m=s(91082),x=s(79545),p=s(1178),g=s(36289),y=s(20236),f=s(2139),j=s(69265),A=s(77740),b=s(6327),v=s(72926),C=s(78416),w=s(36417),_=s(27753),k=s(70152),S=s(22282),E=s(16756),N=s(24529);function O(){let[e,t]=(0,c.useState)(!1),s=()=>t(!e),a=(0,c.useContext)(E.Md),l=(0,c.useContext)(E.yI),[o,d]=(0,c.useState)(""),[u,h]=(0,c.useState)(""),m=()=>{o&&-1===a.indexOf(o)&&(l({type:"add",cat:o}),h(o),d(""),t(!1))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.A,{title:"add category",children:(0,n.jsx)(i.A,{size:"small","aria-label":"add category",sx:{position:"absolute",right:"-42px",top:"-4px",zIndex:1},onClick:s,children:(0,n.jsx)(A.A,{})})}),e&&(0,n.jsxs)(C.A,{open:e,onClose:()=>t(!1),children:[(0,n.jsx)(w.A,{children:"Add Category"}),(0,n.jsx)(i.A,{"aria-label":"close category adder",onClick:s,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(b.A,{})}),(0,n.jsx)(_.A,{children:(0,n.jsxs)(r.A,{direction:"row",children:[(0,n.jsx)(k.A,{label:"New Category Name",size:"small",id:"category_adder_input",value:o,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&m()},onChange:e=>d(e.target.value)}),(0,n.jsx)(S.A,{variant:"contained",onClick:m,children:"Add"})]})})]}),u&&(0,n.jsx)(N.G,{category:u,onClose:()=>h("")})]})}let z={ref:void 0};function M(e){if(z.ref&&z.ref.current){let t=z.ref.current.state.sorting.sortedRows.indexOf(e);z.ref.current.setPage(Math.floor(t/100)),z.ref.current.selectRow(e,!0,!0),requestAnimationFrame(()=>{z.ref&&z.ref.current&&z.ref.current.scrollToIndexes({rowIndex:t})})}}function F(e){let{count:t,page:s,onPageChange:a}=e,l=Math.ceil(t/100)-1,o=0===s,c=s===l;return(0,n.jsxs)(r.A,{direction:"row",children:[(0,n.jsx)(i.A,{"aria-label":"Go to first page",disabled:o,onClick:e=>a(e,0),children:(0,n.jsx)(d.A,{})}),(0,n.jsx)(i.A,{"aria-label":"Go to previous page",disabled:o,onClick:e=>a(e,s-1),children:(0,n.jsx)(u.A,{})}),(0,n.jsx)(i.A,{"aria-label":"Go to next page",disabled:c,onClick:e=>a(e,s+1),children:(0,n.jsx)(h.A,{})}),(0,n.jsx)(i.A,{"aria-label":"Go to last page",disabled:c,onClick:e=>a(e,l),children:(0,n.jsx)(m.A,{})})]})}function P(e){let{rows:t,columns:s,isCategory:r,setEditCategory:i,editFromEvent:d}=e,u=(0,c.useContext)(j.zn),h=(0,p.b)();z.ref=h;let m=(0,c.useMemo)(()=>{let e=[];return s.forEach(t=>{let{field:s}=t;"category_"===s.substring(0,9)&&e.push({field:s})}),[{groupId:"term",headerName:"Entry",description:"Term definition.",headerClassName:"column-group",children:[{field:"remove"},{field:"term"},{field:"sense"}]},{groupId:"descriptives",headerName:"Statistics",description:"Term descriptive statistics.",headerClassName:"column-group",renderHeaderGroup:()=>(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"Statistics"}),(0,n.jsx)(O,{})]}),children:[{field:"frequency"},{field:"matches"},{field:"senses"},{field:"related"},{field:"ncats"}]},{groupId:"categories",headerName:"Categories",description:"Added dictionary categories.",headerClassName:"column-group categories-column",children:e}]},[s]);return(0,n.jsx)(g.z,{apiRef:h,className:"bottom-search",rows:t,columns:s,columnGroupingModel:m,showCellVerticalBorder:!0,disableDensitySelector:!0,pageSizeOptions:[100],density:"compact",sx:{"& .MuiDataGrid-columnHeader":{overflow:"visible"},"& .MuiDataGrid-columnHeaderTitleContainer":{overflow:"visible"},"& .column-group":{backgroundColor:"#1f1f1f",maxHeight:"2em"},"& .MuiDataGrid-columnHeader button":{mr:1.3},"& .categories-column .MuiDataGrid-columnHeaderTitleContainerContent":{pl:2.3}},slots:{toolbar:()=>(0,n.jsx)(y.b,{sx:{width:"200px",zIndex:1}}),columnMenu:e=>{let t=e.colDef.headerName||"";return r(t)?(0,n.jsx)(f.aU,{...e,slots:{columnMenuUserItem:()=>(0,n.jsxs)(a.A,{onClick:()=>{i(t)},children:[(0,n.jsx)(l.A,{children:(0,n.jsx)(x.A,{fontSize:"small"})}),(0,n.jsx)(o.A,{children:"Edit category"})]})},slotProps:{columnMenuIserItem:{displayOrder:15}}}):(0,n.jsx)(f.aU,{...e})}},slotProps:{pagination:{ActionsComponent:F}},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&d(0,{...e.row,field:e.field})},onRowClick:e=>{let{row:t}=e;u(t.id)}})}},7529:(e,t,s)=>{"use strict";s.d(t,{Lu:()=>Q,$I:()=>Y,rQ:()=>L,yq:()=>H});var n=s(95155),r=s(12115),i=s(53275),a=s(91888),l=s(72926),o=s(9561),c=s(70152),d=s(96854),u=s(48983),h=s(12406),m=s(47335),x=s(27315),p=s(18786),g=s(2432),y=s(894),f=s(95473),j=s(41983),A=s(2091),b=s(10979),v=s(68998),C=s(4918),w=s(66656),_=s(1396),k=s(22282),S=s(76239),E=s(9375),N=s(16756),O=s(76719),z=s(13418);let M=/[aeiouy]$/;function F(e,t){let s,n;let r=new Set,i=(e=e.replace(S.i0,"\\$&")).length;try{s=i>4?RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?"+e+(M.test(e)?"*":"+")+"-?(?:'|ac|age|al|alize|ance|ancy|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|ence|ency|ent|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|n|nce|ness|ng|nt|or|on|ous|r|s|ship|st|t|th|ties|ty|ur|ward|wise|y|z)?(?:'|al|alize|alization|ate|ation|ble|d|ed|er|es|ility|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?;","g"):RegExp(";(?:de|un|re)?-?"+(i>2?e.replace(M,"[aeiouy]"):e)+"+-?(?:'|d|ed|er|en|ing|n|r|s|y)?;","g")}catch(e){}if(s)for(;n=s.exec(t);){let t=n[0];t&&t.length-1>i&&";"+e+";"!==t&&r.add(t.replace(S.qr,""))}return Array.from(r)}var P=s(70648),T=s(45309),I=s(95140),W=s(27881),D=s(77740),R=s(8187),B=s(38484);function L(e){let{id:t,field:s,processed:u,label:h,editCell:m}=e,x=(0,r.useContext)(N.CB),p=(0,r.useContext)(N.W7),g=x[t||u.term],y=(0,r.useContext)(E.GU),{terms:f,senseMap:j,sense_keys:A,synsetInfo:b}=y,v=(e,t)=>{let s=e in j?j[e]:t.csi_labels;return"string"==typeof s?s:s[0]},[C,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)([]),S=C&&!_.length;return((0,r.useEffect)(()=>{C&&f&&A&&b&&"fixed"===u.type&&u.synsets.length?setTimeout(async()=>{let e=(0,N.hC)(Object.keys(g.categories),x),t={};Object.keys(e).forEach(e=>{let s=(0,P.Fr)(e,y,x,!0);s.lookup&&s.lookup.map.forEach((e,s)=>t[s]=!0)});let s={},n=u.synsets.map(n=>{let r=0;(0,z.eY)(n,f,b).forEach(s=>{s in e&&r++,s in t&&(r+=.01)}),n.count&&(r+=.001*n.count),n.csi_labels||(n.csi_labels="no category");let i=A[n.index],a=v(i,n);return a in s&&!(s[a]<r)||(s[a]=r),{key:i,score:r,synset:n}}),r=n.map(e=>{let{key:t,synset:s}=e;return v(t,s)}).sort();k(n.sort((e,t)=>{let n=v(e.key,e.synset),i=s[n],a=-r.indexOf(n),l=v(t.key,t.synset);return 100*s[l]+-(.1*r.indexOf(l))+.01*t.score-(100*i+.1*a+.01*e.score)}))},150):k([])},[C,f,j,A,b,u,x,y,g]),f&&A&&b&&"fixed"===u.type&&u.synsets.length)?(0,n.jsx)(i.A,{size:"small",componentsProps:{popper:{className:"synset-select"}},options:_,loading:S,open:C,onOpen:()=>w(!0),onClose:()=>w(!1),value:g.sense,groupBy:e=>v(e.key,e.synset),getOptionLabel:e=>"string"==typeof e?e:e.key,renderOption:(e,t)=>{let{key:s,synset:i,score:c}=t;return delete e.key,(0,r.createElement)(a.A,{...e,key:s,value:s},(0,n.jsx)(l.A,{title:i.definition,placement:"right",children:(0,n.jsxs)(o.A,{sx:{width:"100%"},children:[(0,n.jsx)("span",{className:"number-annotation",children:"("+c.toFixed(2)+") "}),A[i.index],i.count&&(0,n.jsx)("span",{className:"number-annotation",children:" "+i.count})]})}))},renderInput:e=>(0,n.jsx)(c.A,{label:h,...e,InputProps:{...e.InputProps,endAdornment:(0,n.jsxs)(r.Fragment,{children:[S&&(0,n.jsx)(d.A,{size:20}),e.InputProps.endAdornment]})}}),ListboxProps:{style:{cursor:"pointer"},onClick:e=>{let n=e.target;if("tagName"in n&&"innerText"in n&&"DIV"===n.tagName){let e=n.innerText;m&&m({id:t,field:s,value:e}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:e})}}},onChange:(e,n)=>{let r=n&&"object"==typeof n&&n.key||"";m&&m({id:t,field:s,value:r}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:r})},autoSelect:!0,blurOnSelect:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}):(0,n.jsx)(c.A,{size:"small",value:g.sense,onChange:e=>{m&&m({id:t,field:s,value:e.target.value}),p({type:"update",term_id:t,term:u.term,term_type:u.term_type,sense:e.target.value})},label:h})}let G=["Match","Frequency","Senses","Related","In Dictionary"],q={position:"absolute",fontSize:"1.5em",height:"1.2em",opacity:.4};function U(e){let{processed:t}=e,s=(0,r.useContext)(N.CB),i=(0,r.useContext)(N.W7),a=(0,r.useContext)(E.GU),[l,c]=(0,r.useState)(0),[d,j]=(0,r.useState)(10),[A,b]=(0,r.useState)({column:"Frequency",asc:!1}),v=(0,r.useMemo)(()=>[(0,n.jsx)(u.A,{width:1},"term_action"),...G.map(e=>(0,n.jsxs)(u.A,{width:"Match"===e?999:1,component:"th",align:"Match"===e?"left":"right",sx:{cursor:"pointer",pr:3},onClick:()=>{b(A.column===e&&A.asc?{column:"Frequency",asc:!1}:{column:e,asc:A.column===e})},children:[e,A.column===e?A.asc?(0,n.jsx)(T.A,{sx:q}):(0,n.jsx)(I.A,{sx:q}):(0,n.jsx)(n.Fragment,{})]},e))],[b,A]),C=t.matches.length,w=(0,r.useMemo)(()=>t.matches.map(e=>{let t=(0,P.Fr)(e,a);return t.frequency=(0,S.tC)(t.index,a.terms&&a.terms.length),t.in_dict=t.term in s,t}),[t,a,s]);if(l>C/d)return c(0),(0,n.jsx)(n.Fragment,{});w.sort(function(e){let{column:t,asc:s}=e;switch(t){case"Match":return s?(e,t)=>e.term>t.term?-1:1:(e,t)=>t.term>e.term?-1:1;case"Frequency":return s?(e,t)=>(e.frequency||0)-(t.frequency||0):(e,t)=>(t.frequency||0)-(e.frequency||0);case"Senses":return s?(e,t)=>e.synsets.length-t.synsets.length:(e,t)=>t.synsets.length-e.synsets.length;case"Related":return s?(e,t)=>e.related.length-t.related.length:(e,t)=>t.related.length-e.related.length;case"In Dictionary":return s?(e,t)=>(e.in_dict||0)>(t.in_dict||0)?-1:1:(e,t)=>(t.in_dict||0)>(e.in_dict||0)?-1:1}}(A));let _=[];if(C)for(let e=l*d,t=Math.min(w.length,e+d);e<t;e++)_.push(w[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=F(e,";;"+t.matches.join(";;")+";;")}return C?(0,n.jsxs)(h.A,{sx:{height:"100%",position:"relative"},children:[(0,n.jsxs)(m.A,{stickyHeader:!0,size:"small",children:[(0,n.jsx)(x.A,{children:(0,n.jsx)(p.A,{children:v})}),(0,n.jsx)(g.A,{children:_.map((e,t)=>{let s=e.term;return(0,n.jsxs)(p.A,{sx:{height:33},hover:!0,children:[(0,n.jsx)(u.A,{sx:{p:0},children:e.in_dict?(0,n.jsx)(y.A,{"aria-label":"remove",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{i({type:"remove",term_id:s})},children:(0,n.jsx)(W.A,{})}):(0,n.jsx)(y.A,{"aria-label":"add",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{i({type:"add",term_id:s,term:s,term_type:"fixed"})},children:(0,n.jsx)(D.A,{})})}),(0,n.jsx)(u.A,{children:(0,n.jsx)(Y,{term:s})}),(0,n.jsx)(u.A,{align:"right",children:e.frequency&&e.frequency.toFixed(2)||"0.00"}),(0,n.jsx)(u.A,{align:"right",children:e.synsets.length}),(0,n.jsx)(u.A,{align:"right",children:e.related.length}),(0,n.jsx)(u.A,{align:"right",children:e.in_dict?"yes":"no"})]},s+t)})})]}),(0,n.jsx)(f.A,{sx:{width:"100%",bottom:"-1px",position:"sticky",backgroundColor:"#1e1e1e"},component:"div",rowsPerPageOptions:[10,20,50,100,1e3],count:C,rowsPerPage:d,page:l,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{j(parseInt(e.target.value)),c(0)}})]}):(0,n.jsx)(o.A,{children:"No matches"})}let K={minWidth:"20px",opacity:.9,"& .MuiSvgIcon-root":{fontSize:"1em"}};function H(e,t,s,r){let i=(0,P.Jc)(e),a=e in t,o=a&&t[e].term||e;return(0,n.jsxs)(j.Ay,{disableGutters:!0,disablePadding:!0,sx:{pr:3},secondaryAction:a?(0,n.jsx)(y.A,{"aria-label":"remove",size:"small",edge:"end",sx:K,onClick:()=>{s({type:"remove",term_id:e})},children:(0,n.jsx)(W.A,{})}):(0,n.jsx)(y.A,{"aria-label":"add",size:"small",edge:"end",sx:K,onClick:()=>{s({type:"add",term_id:e,term:o,term_type:"fixed"})},children:(0,n.jsx)(D.A,{})}),children:[(0,n.jsx)(A.A,{sx:K,children:a?(0,n.jsx)(l.A,{title:"in current dictionary",placement:"left",children:(0,n.jsx)(R.A,{color:"success"})}):i&&i in t?(0,n.jsx)(l.A,{title:"captured by "+i+" in current dictionary",placement:"left",children:(0,n.jsx)(y.A,{sx:{p:0,"& .MuiSvgIcon-root":{fontSize:".7em"}},onClick:()=>{r({type:"add",state:{type:"term",value:i}})},children:(0,n.jsx)(B.A,{color:"secondary"})})}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)(Y,{term:o})]},e)}let J={d:"Wikidata",p:"DBpedia",w:"Wiktionary"},V=/([A-Z])/g;function $(e){let{processed:t}=e,s={p:1,pl:0,maxHeight:"100%",overflowY:"auto",overflowX:"hidden",whiteSpace:"nowrap"},i=(0,r.useContext)(N.CB),a=(0,r.useContext)(N.W7),c=(0,r.useContext)(O.bq),{terms:d,senseMap:u,conceptNet:h,termLookup:m,collapsedTerms:x,sense_keys:p}=(0,r.useContext)(E.GU),g=(0,r.useCallback)(m?(e,t)=>m[e]-m[t]:()=>0,[m]);t.forms||(t.forms=F(t.term,x?x.all:""),t.forms.sort(S.ic));let y={},f={};t.synsets&&t.synsets.map(e=>{let t=p?p[e.index]:"",s=t in u?u[t]:e.csi_labels||"no category",n="string"==typeof s?s:s[0],r=e.count||0;n in y?(y[n].push(e),r>f[n]&&(f[n]=r)):(y[n]=[e],f[n]=r)});let A=h&&h.terms[""+(t.index+1)],k=h&&h.links[""+(t.index+1)];return(0,n.jsxs)(b.A,{direction:"row",spacing:2,sx:{height:"100%",pb:1},children:[(0,n.jsxs)(b.A,{children:[(0,n.jsx)(l.A,{title:"100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage",children:(0,n.jsx)(o.A,{children:"Frequency"})}),(0,n.jsx)(v.A,{sx:{p:1},children:(0,n.jsx)("span",{className:"number",children:(0,S.tC)(t.index,d&&d.length).toFixed(2)})}),(!!A||!!t.synsets.length||!!k)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{children:"Sources"}),(0,n.jsx)(v.A,{sx:{p:1},children:(0,n.jsxs)(C.A,{sx:{p:0,fontSize:".8em",whiteSpace:"nowrap","& a":{cursor:"pointer"}},children:[!!A&&(0,n.jsx)(j.Ay,{disableGutters:!0,disablePadding:!0,children:(0,n.jsx)(w.A,{href:"https://conceptnet.io/c/en/"+t.term.replace(" ","_"),target:"_blank",rel:"noreferrer",children:"ConceptNet"})}),!!t.synsets.length&&(0,n.jsx)(j.Ay,{disableGutters:!0,disablePadding:!0,children:(0,n.jsx)(w.A,{href:"https://en-word.net/lemma/"+t.term,target:"_blank",rel:"noreferrer",children:"OEWordNet"})}),k&&("string"==typeof k?[k]:k).map(e=>(0,n.jsx)(j.Ay,{disableGutters:!0,disablePadding:!0,children:(0,n.jsx)(w.A,{href:function(e){switch(e.substring(0,1)){case"d":return"https://wikidata.org/wiki/"+e.substring(2);case"p":return"https://dbpedia.org/resource/"+e.substring(2);case"w":return"https://en.wiktionary.org/wiki/"+e.substring(2)}}(e),target:"_blank",rel:"noreferrer",children:J[e.substring(0,1)]+": "+e.substring(2)})},e))]})})]})]}),d&&!!t.lemma.length&&(0,n.jsxs)(b.A,{children:[(0,n.jsx)(l.A,{title:"Term forms produced by lemmatizing original terms with the RNNTagger, the grouping by root.",children:(0,n.jsx)(o.A,{children:"Lemmatizer"})}),(0,n.jsx)(v.A,{sx:s,children:(0,n.jsx)(C.A,{disablePadding:!0,sx:{p:0},children:t.lemma.filter(e=>e!==t.term).map(e=>H(e,i,a,c))})})]}),!!t.forms.length&&(0,n.jsxs)(b.A,{children:[(0,n.jsx)(l.A,{title:"Term forms produced by rule-based matches (e.g., with added or removed common affixes) to other terms.",children:(0,n.jsx)(o.A,{children:"Expansion"})}),(0,n.jsx)(v.A,{sx:s,children:(0,n.jsx)(C.A,{disablePadding:!0,sx:{p:0},children:t.forms.map(e=>H(e,i,a,c))})})]}),!!t.related.length&&(0,n.jsxs)(b.A,{children:[(0,n.jsx)(l.A,{title:"Similar terms within latent semantic spaces (embeddings); based on top 100 terms across a proportion of different spaces.",children:(0,n.jsx)(o.A,{children:"Related Terms"})}),(0,n.jsx)(v.A,{sx:s,children:(0,n.jsx)(C.A,{disablePadding:!0,sx:{p:0},children:t.related.map(e=>H(e,i,a,c))})})]}),p&&!!t.synsets.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b.A,{children:[(0,n.jsx)(o.A,{children:"Senses"}),(0,n.jsx)(v.A,{sx:{...s,p:0},children:(0,n.jsx)(C.A,{subheader:(0,n.jsx)("li",{}),className:"term-sense-list",children:Object.keys(y).sort((e,t)=>f[t]-f[e]).map(e=>{let t=y[e];return(0,n.jsx)("li",{children:(0,n.jsxs)("ul",{children:[(0,n.jsx)(_.A,{children:e}),t.sort((e,t)=>(t.count||0)-(e.count||0)).map(e=>(0,n.jsx)(j.Ay,{disablePadding:!0,children:(0,n.jsx)(z.Hs,{senseKey:p[e.index],info:e})},e.index))]})},e)})})})]}),!!t.synset_terms.length&&(0,n.jsxs)(b.A,{children:[(0,n.jsx)(o.A,{sx:{whiteSpace:"nowrap"},children:"Extended Synset Members"}),(0,n.jsx)(v.A,{sx:s,children:(0,n.jsx)(C.A,{disablePadding:!0,sx:{p:0},children:t.synset_terms.sort(g).map(e=>H(e,i,a,c))})})]})]}),A&&d&&(0,n.jsx)(b.A,{direction:"row",spacing:2,children:Object.keys(A).sort((e,t)=>{let s=A[e],n=A[t];return("number"==typeof n?1:n.length)-("number"==typeof s?1:s.length)}).map(e=>{let t=A[e];return(0,n.jsxs)(b.A,{children:[(0,n.jsx)(o.A,{sx:{whiteSpace:"nowrap"},children:e.replace(V," $&").trimStart()}),(0,n.jsx)(v.A,{sx:s,children:(0,n.jsx)(C.A,{disablePadding:!0,sx:{p:0},children:("number"==typeof t?[t]:t).map(e=>H(d[e-1],i,a,c))})})]},e)})})]})}function Y(e){let{term:t}=e,s=(0,r.useContext)(O.bq);return(0,n.jsx)(k.A,{fullWidth:!0,variant:"text",sx:{p:0,justifyContent:"flex-start",textTransform:"none",whiteSpace:"nowrap"},onClick:()=>s({type:"add",state:{type:"term",value:t}}),children:t})}function Q(e){let{term:t}=e,s=(0,r.useContext)(E.GU),i=(0,r.useContext)(N.CB),a=(0,P.Fr)(t,s,i);return"fixed"===a.type?(0,n.jsx)($,{processed:a}):(0,n.jsx)(U,{processed:a})}},69265:(e,t,s)=>{"use strict";s.d(t,{_h:()=>C,kU:()=>b,zn:()=>v});var n=s(95155),r=s(68998),i=s(64665),a=s(63551),l=s(894),o=s(9561),c=s(42479),d=s(10979),u=s(60615),h=s(99489),m=s(22282),x=s(6327),p=s(7529),g=s(12115),y=s(36289),f=s(16756),j=s(70648),A=s(9375);let b=(0,g.createContext)(""),v=(0,g.createContext)((e,t)=>{});function C(e){let{categories:t,editor:s,width:C}=e,w=(0,g.useContext)(A.GU),_=(0,g.useContext)(f.CB),k=(0,g.useContext)(b),S=(0,g.useContext)(v),E=(0,g.useContext)(f.W7),[N,O]=(0,g.useState)(!1);if(!k||!(k in _))return(0,n.jsx)(n.Fragment,{});let z=(0,j.Fr)(k,w,_),M=_[k],F=(0,g.useMemo)(()=>[{field:"id",headerName:"Name",width:108},{field:"from_term_editor",headerName:"Weight",width:65,editable:!0,hideable:!1,valueParser:(e,t,n)=>{let r=+e||"";return n&&s(r,{...t,field:n.field}),r}}],[]),P=M.categories,T=[];return t.forEach(e=>{(N||e in P)&&T.push({id:e,term_id:k,from_term_editor:P[e]||"",dictEntry:M,processed:z})}),(0,n.jsx)(r.A,{sx:{position:"absolute",top:0,right:"-"+C+"px",height:"100%",width:C+"px"},children:(0,n.jsxs)(i.A,{sx:{height:"100%",pb:"1em"},elevation:1,children:[(0,n.jsx)(a.A,{sx:{p:.5},action:(0,n.jsx)(l.A,{"aria-label":"Close term editor",onClick:()=>S(""),className:"close-button",children:(0,n.jsx)(x.A,{})}),title:(0,n.jsx)(o.A,{sx:{whiteSpace:"nowrap","& .MuiButtonBase-root":{fontWeight:"bold",fontSize:"1.1em"}},children:(0,n.jsx)(p.$I,{term:z.term})})}),(0,n.jsx)(c.A,{sx:{p:.5,height:"100%"},children:(0,n.jsxs)(d.A,{direction:"column",sx:{pb:1,pt:1,height:"100%",overflowY:"auto"},spacing:2,children:[(0,n.jsx)(p.rQ,{label:"Sense",id:k,field:"",processed:z}),(0,n.jsxs)(d.A,{direction:"column",spacing:1,sx:{height:"100%"},children:[(0,n.jsx)(o.A,{fontWeight:"bold",children:"Category Weights"}),(0,n.jsx)(u.A,{control:(0,n.jsx)(h.A,{size:"small",checked:N,onChange:()=>O(!N)}),label:(0,n.jsx)(o.A,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,n.jsx)(y.z,{sx:{minHeight:"140px"},className:"bottom-search datagrid-vertical",rows:T,columns:F,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",onCellKeyDown:(e,t)=>{if("Delete"===t.key||"Backspace"===t.key){let n=""+e.value,r="view"===e.cellMode?0:+n.substring(0,n.length-1);s(r,{...e.row,field:e.field}),r||t.preventDefault()}}}),(0,n.jsx)(m.A,{fullWidth:!0,variant:"contained",onClick:()=>{E({type:"add",term:M.term||k,term_type:M.type,sense:M.sense,categories:{...M.categories},added:M.added})},children:"Duplicate"})]})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[754,441,517,358],()=>t(91572)),_N_E=e.O()}]);