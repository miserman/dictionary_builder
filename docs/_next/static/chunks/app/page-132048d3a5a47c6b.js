(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{69:function(e,t,n){Promise.resolve().then(n.bind(n,2621))},2621:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eX}});var s=n(7437),r=n(8595),i=n(3948),l=n(3857),a=n(2265);let o=(0,a.createContext)({});function c(e){let{loadingTerms:t,loadingTermAssociations:n,loadingSenseKeys:r,loadingSynsetInfo:i,children:l}=e,[c,d]=(0,a.useState)(),[x,h]=(0,a.useState)(),[u,m]=(0,a.useState)(),[j,p]=(0,a.useState)(),[g,y]=(0,a.useState)(),[Z,f]=(0,a.useState)();return(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/terms.txt").then(e=>e.text()).then(e=>{let t=Object.freeze(e.split("\n"));d(t);let n={};t.forEach((e,t)=>n[e]=t),h(Object.freeze(n)),m(";;"+t.join(";;")+";;")}).finally(()=>t(!1))},[t]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/term_associations.json").then(e=>e.json()).then(e=>{p(e)}).finally(()=>n(!1))},[n]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/sense_keys.txt").then(e=>e.text()).then(e=>{y(Object.freeze(e.split("\n")))}).finally(()=>r(!1))},[r]),(0,a.useEffect)(()=>{fetch("/dictionary_builder/data/synset_info.json").then(e=>e.json()).then(e=>{f(e.map((e,t)=>(e.index=t,e)))}).finally(()=>i(!1))},[i]),(0,s.jsx)(o.Provider,{value:{terms:c,termLookup:x,collapsedTerms:u,termAssociations:j,sense_keys:g,synsetInfo:Z},children:l})}let d=/\*/g,x=/([\[\]\(\)*?^$.+])/g,h=/([\[\]\(\)?^$.+])/g,u=/^;|;$/g;function m(e){return";"+e.replace(h,"\\$&").replace(d,"[^;]*")+";"}function j(e,t){return e.length-t.length}function p(e,t){return t&&-1!==e?((1-e/t)*100).toFixed(2):"0"}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;for(let r,i="";n.length<s&&(r=e.exec(t));)(i=r[0].replace(u,""))&&n.push(i);return n}let y=/\./g;function Z(e){return";"+e.replace(y,"[^;]")+";"}var f=n(8457),v=n(4262),C=n(2653),b=n(4111),S=n(5133),w=n(6114),_=n(3226),k=n(8469),P=n(3457),E=n(182),T=n(4647),A=n(4081),O=n(819),z=n(654),F=n(5507),N=n(8956),I=n(9050);function R(){return JSON.parse(localStorage.getItem("dictionary_builder_settings")||"{}")}function M(e){let{asTable:t,displayToggle:n,sortBy:r,setSortBy:i}=e,[l,o]=(0,a.useState)(!1),c=()=>o(!l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{onClick:c,children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)(b.ZP,{anchor:"right",open:l,onClose:c,children:(0,s.jsxs)(S.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(w.Z,{title:(0,s.jsx)(_.Z,{children:"Settings"}),action:(0,s.jsx)(C.Z,{onClick:c,children:(0,s.jsx)(v.Z,{})})}),(0,s.jsx)(k.Z,{sx:{alignContent:"left",mb:"auto"},children:(0,s.jsxs)(P.Z,{spacing:3,children:[(0,s.jsx)(E.Z,{sx:{width:"100%"},label:"As Table",control:(0,s.jsx)(T.Z,{checked:t,onChange:n})}),(0,s.jsxs)(A.Z,{children:[(0,s.jsx)(O.Z,{children:"Sort By"}),(0,s.jsxs)(z.Z,{size:"small",label:"Sort By",value:r,onChange:i,children:[(0,s.jsx)(F.Z,{value:"time",children:"Order Added"}),(0,s.jsx)(F.Z,{value:"term",children:"Term"})]})]})]})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(I.Z,{fullWidth:!0,color:"error",onClick:()=>{let e=R();e.dictionary_names&&e.dictionary_names.forEach(e=>localStorage.removeItem(e)),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()},children:"Clear Storage"})})]})})]})}let B=(0,a.createContext)("default"),D=(0,a.createContext)(e=>{}),K=(0,a.createContext)({}),W=(0,a.createContext)(e=>{}),J=(0,a.createContext)({}),Y=(0,a.createContext)(e=>{}),$=(0,a.createContext)([]),q=(0,a.createContext)(e=>{}),H=(0,a.createContext)({}),U=(e,t)=>{let{terms:n,termLookup:s,termAssociations:r,synsetInfo:i}=t,l={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&s&&s[e]||-1,related:[],synsets:[]};if(r&&i&&n&&-1!==l.index){l.recognized=!0;let e=r[l.index];l.related=e[0]?(Array.isArray(e[0])?e[0]:[e[0]]).map(e=>n[e-1]):[],l.synsets=e[1]?(Array.isArray(e[1])?e[1]:[e[1]]).map(e=>i[e-1]):[]}return l},L=(e,t)=>{let n="string"==typeof e;if(n&&!d.test(e))return U(e,t);{let s=n?m(e):e.source,r={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:RegExp(n?s:Z(s),"g"),matches:[]};return t.collapsedTerms&&g(r.regex,t.collapsedTerms,r.matches),r.recognized=!!r.matches.length,r}};function G(e){let{children:t}=e,n=(0,a.useContext)(o),r=(0,a.useMemo)(()=>({}),[]),i=(0,a.useMemo)(R,[]),l=(0,a.useMemo)(()=>{let e={default:{}};return(i.dictionary_names||[]).forEach(t=>{e[t]=JSON.parse(localStorage.getItem("dict_"+t)||"{}")}),e},[i]),c=e=>{"delete"===e.type?(delete l[e.name],localStorage.removeItem("dict_"+e.name),"default"===e.name&&(l.default={}),d===e.name&&(h("default"),p({type:"change_dict",dict:l.default}))):("set"!==e.type&&(l[e.name]=e.dict),d&&localStorage.setItem("dict_"+e.name,JSON.stringify(l[d])),"save"!==e.type&&(h(e.name),p({type:"change_dict",dict:l[e.name]})),localStorage.setItem("dict_"+e.name,JSON.stringify(l[e.name]))),i.dictionary_names=Object.keys(l),localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[d,x]=(0,a.useState)(i.selected||"default"),h=e=>{let t=e in l?e:"default";x(t),i.selected=t,localStorage.setItem("dictionary_builder_settings",JSON.stringify(i))},[u,m]=(0,a.useReducer)((e,t)=>{switch(t.type){case"collect":let n=new Set(t.reset?[]:e);return Object.keys(t.dictionary).forEach(e=>{let{categories:s}=t.dictionary[e];Object.keys(s).forEach(e=>n.add(e))}),Array.from(n).sort();case"add":return e.includes(t.cat)?[...e]:[...e,t.cat].sort();default:return e.filter(e=>e!==t.cat)}},[]),[j,p]=(0,a.useReducer)((e,t)=>{if("change_dict"===t.type)return m({type:"collect",dictionary:t.dict,reset:!0}),t.dict;let s={...e},i="string"==typeof t.term?t.term:t.term.source;if("remove"===t.type)delete s[i];else{"replace"===t.type&&delete s["string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source];let e=r[i];if(e&&t.term_type===e.term_type||(r[i]=L(t.term,n)),!t.sense){let e=r[i];"fixed"===e.type&&1===e.synsets.length&&n.sense_keys&&(t.sense=n.sense_keys[e.synsets[0].index])}let l=s[i]||{};s[i]={added:l.added||Date.now(),type:l.type||e&&e.term_type||"fixed",categories:t.categories||l.categories||{},sense:t.sense||l.sense||""}}return m({type:"collect",dictionary:s}),c({type:"save",name:d,dict:s}),s},l.default);return(0,a.useEffect)(()=>{i.selected&&i.selected in l||(i.selected="default"),p({type:"change_dict",dict:l[i.selected]})},[i,l]),(0,s.jsx)(K.Provider,{value:l,children:(0,s.jsx)(W.Provider,{value:c,children:(0,s.jsx)(B.Provider,{value:d,children:(0,s.jsx)(J.Provider,{value:j,children:(0,s.jsx)($.Provider,{value:u,children:(0,s.jsx)(D.Provider,{value:e=>{h(e)},children:(0,s.jsx)(Y.Provider,{value:p,children:(0,s.jsx)(q.Provider,{value:m,children:(0,s.jsx)(H.Provider,{value:r,children:t})})})})})})})})})}var V=n(8276),X=n(1975),Q=n(9245),ee=n(3932),et=n(4147),en=n(666),es=n(5795),er=n(3701),ei=n(6988),el=n(9279),ea=n(9464),eo=n(5266),ec=n(356),ed=n(5210),ex=n(8123);function eh(e){let{senseKey:t,info:n}=e,r=(0,a.useContext)(ek);return(0,s.jsx)(V.Z,{title:n.definition,placement:"right",children:(0,s.jsx)(ed.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>r({type:"add",state:{type:"synset",value:t,info:n}}),children:t})})}function eu(e){let{name:t,info:n}=e,r=n[t],{terms:i,sense_keys:l,synsetInfo:c}=(0,a.useContext)(o);return i&&l&&c?(0,s.jsxs)(Q.Z,{sx:{m:1},children:[(0,s.jsx)(_.Z,{variant:"h5",children:t}),(0,s.jsx)(_.Z,{children:"string"==typeof r?r:"members"===t?i?Array.isArray(r)?r.map(e=>(0,s.jsx)(ew,{term:i[e-1]},e)):(0,s.jsx)(ew,{term:i[r-1]},r):(0,s.jsx)(s.Fragment,{}):Array.isArray(r)?r.map(e=>{let t=c[e-1];return(0,s.jsx)(eh,{senseKey:l[e-1],info:t},e)}):(0,s.jsx)(eh,{senseKey:l[r-1],info:c[r-1]})})]},t):(0,s.jsx)(s.Fragment,{})}let em={id:0,index:0,ili:0,definition:0,topic:0},ej={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function ep(e){let{info:t}=e,{sense_keys:n}=(0,a.useContext)(o);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{variant:"h6",children:t.definition}),(0,s.jsxs)(P.Z,{direction:"row",spacing:2,children:[(0,s.jsxs)(Q.Z,{children:[(0,s.jsxs)(_.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID: ",(0,s.jsx)("span",{className:"number",children:t.id})]}),(0,s.jsxs)(_.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Sense Key: ",(0,s.jsx)("span",{className:"number",children:n&&n[t.index]})]}),(0,s.jsxs)(_.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,s.jsx)("span",{className:"number",children:t.ili})]})]}),(0,s.jsxs)(Q.Z,{children:[(0,s.jsxs)(_.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,s.jsx)("span",{className:"number",children:ej[t.id.substring(t.id.length-1)]})]}),(0,s.jsxs)(_.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,s.jsx)("span",{className:"number",children:t.topic})]})]})]}),(0,s.jsx)(P.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in em)).map(e=>(0,s.jsx)(eu,{name:e,info:t},e))})]})}let eg=/[aeiouy]$/;function ey(e,t){let n,s;let r=new Set;e=e.replace(x,"\\$&");try{n=RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?(?:"+e+(e.length>(eg.test(e)?3:2)?"|"+e.replace(eg,"[aeiouy]"):"")+"|"+e+e.substring(e.length-1)+")-?(?:'|ac|age|al|alize|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|nce|ness|or|ous|r|s|ship|st|th|ties|ty|ur|ward|wise|y|z)?(?:'|ate|ation|d|ed|er|es|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?\\;","g")}catch(e){}if(n)for(;s=n.exec(t);)s[0]&&";"+e+";"!==s[0]&&r.add(s[0].replace(u,""));return Array.from(r)}function eZ(e){let{processed:t,edit:n,label:r}=e,i=(0,a.useContext)(J)[t.term].sense,{sense_keys:l}=(0,a.useContext)(o);return t.synsets.length?(0,s.jsx)(z.Z,{fullWidth:!0,"aria-label":"assign synset",value:i,onChange:e=>{n({type:"update",term:t.term,term_type:t.term_type,sense:e.target.value})},label:r,children:l&&t.synsets.map(e=>{let{index:t}=e;return(0,s.jsx)(F.Z,{value:l[t],children:(0,s.jsx)(V.Z,{title:e.definition,placement:"right",children:(0,s.jsx)(_.Z,{sx:{width:"100%"},children:l[t]})})},t)})}):(0,s.jsx)(X.Z,{value:i,onChange:e=>{n({type:"update",term:t.term,term_type:t.term_type,sense:e.target.value})},label:r})}function ef(e){let{processed:t,edit:n}=e,r=(0,a.useContext)(J)[t.term].categories,i=(0,a.useContext)($),[l,o]=(0,a.useState)(null);return(0,s.jsxs)(Q.Z,{children:[(0,s.jsx)(I.Z,{variant:"contained",sx:{p:2},onClick:e=>o(e.currentTarget),children:"Categories"}),(0,s.jsx)(ee.Z,{anchorEl:l,open:!!l,onClose:()=>o(null),children:i.map(e=>(0,s.jsx)(F.Z,{children:(0,s.jsx)(X.Z,{label:e,size:"small",variant:"filled",value:r[e]||"",onChange:s=>{r[e]=+s.target.value,n({type:"update",term:t.term,term_type:t.term_type,categories:r})}})},e))})]})}function ev(e){let{processed:t,onRemove:n,onUpdate:r,edit:i}=e,[l,o]=(0,a.useState)(t.term);return(0,s.jsxs)(S.Z,{sx:{m:.5},children:[t.recognized?(0,s.jsx)(ex.Z,{color:"success",sx:{fontSize:".8rem",position:"absolute"},"aria-label":"recognized"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(w.Z,{title:(0,s.jsxs)(P.Z,{direction:"row",children:[(0,s.jsx)(X.Z,{variant:"standard",value:l,onChange:e=>e.target&&"value"in e.target&&o(e.target.value),onKeyUp:e=>"code"in e&&"Enter"===e.code&&r(l)}),l!==t.term?(0,s.jsx)(I.Z,{onClick:()=>{r(l)},children:"Update"}):(0,s.jsx)(s.Fragment,{})]}),action:(0,s.jsx)(C.Z,{onClick:n,children:(0,s.jsx)(v.Z,{})})}),(0,s.jsx)(k.Z,{sx:{height:"25vh",pt:0},children:(0,s.jsx)(e_,{term:t.term})}),(0,s.jsx)(N.Z,{children:(0,s.jsxs)(P.Z,{direction:"row",spacing:1,children:["fixed"===t.type?(0,s.jsxs)(A.Z,{children:[t.synsets.length?(0,s.jsx)(O.Z,{children:"Assigned Sense"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(eZ,{processed:t,edit:i,label:"Assigned Sense"})]}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(ef,{processed:t,edit:i})]})})]})}function eC(e){let{processed:t,edit:n}=e,{terms:r}=(0,a.useContext)(o),i=(0,a.useContext)($),l=(0,a.useContext)(J)[t.term];return(0,s.jsxs)(et.Z,{className:"dense-table-row",children:[(0,s.jsx)(en.Z,{component:"th",width:1,children:(0,s.jsx)(ew,{term:t.term})}),"fixed"===t.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en.Z,{width:1,children:(0,s.jsx)(eZ,{processed:t,edit:n})}),(0,s.jsx)(en.Z,{width:1,children:p(t.index,r&&r.length)}),(0,s.jsx)(en.Z,{width:1,children:t.recognized?1:0}),(0,s.jsx)(en.Z,{width:1,children:t.synsets.length}),(0,s.jsx)(en.Z,{width:1,children:t.related.length})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en.Z,{width:1}),(0,s.jsx)(en.Z,{width:1}),(0,s.jsx)(en.Z,{width:1,children:t.matches.length}),(0,s.jsx)(en.Z,{width:1}),(0,s.jsx)(en.Z,{width:1})]}),i.map(e=>(0,s.jsx)(en.Z,{className:"table-cell-input",children:(0,s.jsx)(X.Z,{sx:{textAlign:"right"},fullWidth:!0,onChange:s=>{let r=+s.target.value;r?l.categories[e]=r:delete l.categories[e],n({type:"update",term:t.term,term_type:t.term_type,categories:l.categories})},value:l.categories[e]?l.categories[e]:""})},e))]})}function eb(e){let{processed:t}=e,n=(0,a.useContext)(H),r=(0,a.useContext)(o),[i,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(5),x=t.matches.length,h=[];if(x)for(let e=i*c,n=Math.min(t.matches.length,e+c);e<n;e++)h.push(t.matches[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=ey(e,";;"+t.matches.join(";;")+";;")}return(0,s.jsx)(Q.Z,{sx:{height:"100%",overflowY:"auto"},children:x?(0,s.jsxs)(es.Z,{sx:{height:"100%"},children:[(0,s.jsxs)(er.Z,{stickyHeader:!0,size:"small",sx:{width:"100%","& .MuiTableCell-root:first-of-type":{pl:.5},"& .MuiTableCell-root:last-of-type":{pr:.5}},children:[(0,s.jsx)(ei.Z,{children:(0,s.jsxs)(et.Z,{children:[(0,s.jsx)(en.Z,{width:"999",children:"Match"}),(0,s.jsx)(en.Z,{align:"right",children:"Frequency"}),(0,s.jsx)(en.Z,{align:"right",children:"Senses"}),(0,s.jsx)(en.Z,{align:"right",children:"Related"})]})}),(0,s.jsx)(el.Z,{children:h.map((e,t)=>{e in n||(n[e]=L(e,r));let i=n[e];return(0,s.jsxs)(et.Z,{sx:{height:33},hover:!0,children:[(0,s.jsx)(en.Z,{children:(0,s.jsx)(ew,{term:e})}),(0,s.jsx)(en.Z,{align:"right",children:p(i.index,r.terms&&r.terms.length)}),(0,s.jsx)(en.Z,{align:"right",children:i.synsets.length}),(0,s.jsx)(en.Z,{align:"right",children:i.related.length})]},e+t)})})]}),(0,s.jsx)(ea.Z,{component:"div",rowsPerPageOptions:[5,10,50,100,1e3],count:x,rowsPerPage:c,page:i,onPageChange:(e,t)=>{l(t)},onRowsPerPageChange:e=>{d(parseInt(e.target.value)),l(0)}})]}):(0,s.jsx)(_.Z,{children:"No matches"})})}function eS(e){let{processed:t}=e,n={p:1,maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},{terms:r,collapsedTerms:i,sense_keys:l}=(0,a.useContext)(o);return t.forms||(t.forms=ey(t.term,i||""),t.forms.sort(j)),(0,s.jsxs)(P.Z,{direction:"row",spacing:4,sx:{height:"100%"},children:[(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(V.Z,{title:"100 - index / n terms * 100; terms are losely sorted by frequency and space coverage",children:(0,s.jsx)(_.Z,{children:"Relative Frequency"})}),(0,s.jsx)(Q.Z,{sx:{p:1},children:(0,s.jsx)("span",{className:"number",children:p(t.index,r&&r.length)})})]}),t.forms.length?(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(_.Z,{children:"Expanded Forms"}),(0,s.jsx)(Q.Z,{sx:n,children:(0,s.jsx)(eo.Z,{sx:{p:0},children:t.forms.map(e=>(0,s.jsx)(ec.ZP,{sx:{p:0},children:(0,s.jsx)(ew,{term:e})},e))})})]}):(0,s.jsx)(s.Fragment,{}),t.related.length?(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(_.Z,{children:"Related Terms"}),(0,s.jsx)(Q.Z,{sx:n,children:(0,s.jsx)(eo.Z,{sx:{p:0},children:t.related.map(e=>(0,s.jsx)(ec.ZP,{sx:{p:0},children:(0,s.jsx)(ew,{term:e})},e))})})]}):(0,s.jsx)(s.Fragment,{}),l&&t.synsets.length?(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(_.Z,{children:"Senses"}),(0,s.jsx)(Q.Z,{sx:n,children:(0,s.jsx)(eo.Z,{sx:{p:0},children:t.synsets.map(e=>(0,s.jsx)(ec.ZP,{sx:{p:0},children:(0,s.jsx)(eh,{senseKey:l[e.index],info:e})},e.index))})})]}):(0,s.jsx)(s.Fragment,{})]})}function ew(e){let{term:t}=e,n=(0,a.useContext)(ek);return(0,s.jsx)(ed.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function e_(e){let{term:t}=e,n=(0,a.useContext)(H),r=(0,a.useContext)(o);t in n||(n[t]=L(t,r));let i=n[t];return"fixed"===i.type?(0,s.jsx)(eS,{processed:i}):(0,s.jsx)(eb,{processed:i})}let ek=(0,a.createContext)(e=>{});function eP(e){let{term:t}=e,n=(0,a.useContext)(J),r=(0,a.useContext)(Y),i=t in n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{sx:{overflowY:"auto",pt:0},children:(0,s.jsx)(e_,{term:t})}),(0,s.jsx)(N.Z,{sx:{justifyContent:"flex-end",mt:"auto"},children:(0,s.jsx)(I.Z,{onClick:()=>{r(i?{type:"remove",term:t}:{type:"add",term:t,term_type:"fixed"})},children:i?"Remove":"Add"})})]})}function eE(e){let{info:t}=e;return(0,s.jsx)(k.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,s.jsx)(ep,{info:t})})}function eT(e){let{state:t,edit:n}=e;if(!t.length)return;let r=()=>n({type:"reset"}),i=t[0];return(0,s.jsx)(b.ZP,{open:""!==i.value,onClose:r,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:"45vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,s.jsxs)(S.Z,{children:[(0,s.jsx)(w.Z,{action:(0,s.jsx)(C.Z,{"aria-label":"Close",onClick:r,children:(0,s.jsx)(v.Z,{})}),title:(0,s.jsxs)(P.Z,{direction:"row",children:[t.length>1?(0,s.jsx)(I.Z,{onClick:()=>n({type:"back"}),sx:{opacity:.7},children:t[1].value}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(_.Z,{variant:"h4",children:i.value})]})}),"term"===i.type?(0,s.jsx)(eP,{term:i.value}):(0,s.jsx)(eE,{info:i.info})]})})}var eA=n(6882),eO=n(8938),ez=n(502),eF=n(9540),eN=n(880),eI=n(6500),eR=n(4989),eM=n(5229),eB=n(3216),eD=n(8212),eK=n(9394),eW=n(1797),eJ=n(6337),eY=n(2834);function e$(){let e=(0,a.useContext)(W),[t,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(!1),l=()=>i(!r),o=()=>{t&&e({type:"add",name:t,dict:{}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{variant:"contained",onClick:l,children:"New"}),(0,s.jsxs)(eK.Z,{open:r,onClose:l,children:[(0,s.jsx)(eW.Z,{children:"Add Dictionary"}),(0,s.jsx)(C.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:12,color:e=>e.palette.grey[500]},children:(0,s.jsx)(v.Z,{})}),(0,s.jsx)(eJ.Z,{children:(0,s.jsx)(X.Z,{label:"name",value:t,onKeyDown:e=>{t&&"Enter"===e.code&&o()},onChange:e=>{n(e.target.value)}})}),(0,s.jsx)(eY.Z,{children:(0,s.jsx)(P.Z,{direction:"row",children:(0,s.jsx)(I.Z,{variant:"contained",onClick:o,children:"Add"})})})]})]})}function eq(){let[e,t]=(0,a.useState)(!1),n=()=>t(!e),r=(0,a.useContext)(K),i=(0,a.useContext)(W),l=(0,a.useContext)(B),o=Object.keys(r),c=(0,a.useContext)($),d=(0,a.useContext)(q),[x,h]=(0,a.useState)(""),u=()=>{x&&-1===c.indexOf(x)&&(d({type:"add",cat:x}),h(""))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{variant:"text",sx:{fontWeight:"bold"},onClick:n,children:l}),(0,s.jsx)(b.ZP,{anchor:"left",open:e,onClose:n,children:(0,s.jsxs)(S.Z,{sx:{height:"100%",width:"15em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(w.Z,{title:(0,s.jsx)(_.Z,{children:"Dictionary Menu"}),action:(0,s.jsx)(C.Z,{onClick:n,children:(0,s.jsx)(v.Z,{})})}),(0,s.jsxs)(k.Z,{sx:{alignContent:"left",mb:"auto",pt:0},children:[(0,s.jsxs)(P.Z,{direction:"row",sx:{mb:4},children:[(0,s.jsxs)(A.Z,{fullWidth:!0,children:[(0,s.jsx)(O.Z,{children:"Current"}),(0,s.jsx)(z.Z,{label:"Current",size:"small",value:l,onChange:e=>{i({type:"set",name:e.target.value,dict:r[e.target.value]})},children:o.map(e=>(0,s.jsx)(F.Z,{value:e,children:e},e))})]}),(0,s.jsx)(e$,{})]}),(0,s.jsxs)(S.Z,{elevation:3,children:[(0,s.jsx)(w.Z,{title:(0,s.jsx)(_.Z,{children:"Categories"}),sx:{pb:0}}),(0,s.jsx)(k.Z,{sx:{pt:0,pb:0},children:(0,s.jsx)(eo.Z,{sx:{maxHeight:"9em",overflowY:"auto"},children:c.map(e=>(0,s.jsxs)(ec.ZP,{sx:{p:0},children:[(0,s.jsx)(eD.Z,{primary:e}),(0,s.jsx)(C.Z,{"aria-label":"delete category",onClick:()=>{d({type:"remove",cat:e})},children:(0,s.jsx)(eB.Z,{})})]},e))})}),(0,s.jsx)(N.Z,{children:(0,s.jsxs)(P.Z,{direction:"row",children:[(0,s.jsx)(X.Z,{size:"small",value:x,onKeyDown:e=>{"Enter"===e.code&&u()},onChange:e=>{h(e.target.value)}}),(0,s.jsx)(I.Z,{variant:"contained",onClick:u,children:"Add"})]})})]})]}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(I.Z,{fullWidth:!0,color:"error",onClick:()=>{i({type:"delete",name:l})},children:"Delete"})})]})})]})}function eH(e){let{terms:t,exists:n,add:r,asTable:i,displayToggle:l,sortBy:c,setSortBy:h}=e,[u,j]=(0,a.useState)(""),[p,y]=(0,a.useState)(!1),[f,v]=(0,a.useState)([]),[b,S]=(0,a.useState)(!1),w=(0,a.useContext)(ek),{collapsedTerms:_}=(0,a.useContext)(o),k=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:u:u;if(t&&!n(t)){if(b){let e=t;try{e=new RegExp(e)}catch(e){}r(e,"regex")}else r(t,"fixed");v([]),j("")}},E=e=>{let t=e.target;if(t&&"value"in t){let e=t.value.toLowerCase();y(n(e)),j(e)}};return(0,s.jsx)(eI.Z,{component:"nav",children:(0,s.jsxs)(eR.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,s.jsx)(eq,{}),(0,s.jsxs)(P.Z,{direction:"row",sx:{width:"calc(min(500px, 50%))"},spacing:1,children:[(0,s.jsx)(eM.Z,{options:f,value:u,onKeyUp:e=>{if("code"in e&&"Enter"===e.code){let t="value"in e.target?e.target.value:"";t===u&&k(t)}else if(t){let e=[];if(u&&_){let t;try{t=RegExp(b?Z(u):d.test(u)?m(u):";"+u+"[^;]*;","g")}catch(e){t=RegExp(";"+u.replace(x,"\\%&")+";","g")}g(t,_,e,100)}v(e)}},onChange:E,renderOption:(e,t)=>(0,a.createElement)(ec.ZP,{...e,key:t,onClick:k},t),renderInput:e=>(0,s.jsx)(X.Z,{...e,size:"small",placeholder:"term to add",value:u,onChange:E,error:p}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,s.jsx)(V.Z,{title:"regular expression characters are "+(b?"active":"escaped"),children:(0,s.jsx)(C.Z,{"aria-label":"toggle regular expression",onClick:()=>S(!b),children:b?(0,s.jsx)(eF.Z,{}):(0,s.jsx)(eN.Z,{})})}),(0,s.jsx)(I.Z,{variant:"outlined",disabled:!u,onClick:()=>{u&&w({type:"add",state:{type:"term",value:u}})},children:"View"}),(0,s.jsx)(I.Z,{variant:"contained",onClick:()=>k(),disabled:!u||p,children:"Add"})]}),(0,s.jsx)(M,{asTable:i,displayToggle:l,sortBy:c,setSortBy:h})]})})}let eU=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}];function eL(e){let{loading:t,drawerOpen:n}=e,r=(0,a.useContext)(o),i=(0,a.useContext)(J),l=(0,a.useContext)($),c=(0,a.useContext)(H),d=(0,a.useContext)(Y),x=(0,a.useMemo)(R,[]),[h,u]=(0,a.useState)(!("asTable"in x)||x.asTable),[m,j]=(0,a.useState)(x.sortBy||"time"),p=e=>e in i,g=Object.keys(i).sort("time"===m?(e,t)=>i[e].added-i[t].added:void 0),y=e=>{if(r.termAssociations)return e in c||(c[e]=L("regex"===i[e].type?new RegExp(e):e,r)),c[e]};return(0,s.jsx)(Q.Z,{children:r.termAssociations&&r.synsetInfo?(0,s.jsxs)(eO.Z,{children:[(0,s.jsx)(eH,{terms:r.terms,exists:p,add:(e,t)=>{d({type:"add",term:e,term_type:t})},asTable:h,displayToggle:(e,t)=>{x.asTable=t,localStorage.setItem("dictionary_builder_settings",JSON.stringify(x)),u(t)},sortBy:m,setSortBy:e=>{x.sortBy=e.target.value,localStorage.setItem("dictionary_builder_settings",JSON.stringify(x)),j(x.sortBy)}}),(0,s.jsx)(Q.Z,{component:"main",sx:{position:"absolute",top:0,right:0,bottom:0,left:0,overflowY:"auto",mt:"3.5em",mb:n?"45vh":0,pr:1,pb:1,pl:1},children:g.length?h?(0,s.jsxs)(er.Z,{stickyHeader:!0,sx:{"& .MuiTableCell-root":{p:.5,textAlign:"right"},"& th.MuiTableCell-root:first-of-type":{textAlign:"left"}},children:[(0,s.jsx)(ei.Z,{children:(0,s.jsxs)(et.Z,{children:[(0,s.jsx)(en.Z,{component:"th",children:"Term"}),(0,s.jsx)(en.Z,{component:"th",children:"Sense"}),(0,s.jsx)(en.Z,{component:"th",children:"Frequency"}),(0,s.jsx)(en.Z,{component:"th",children:"Matches"}),(0,s.jsx)(en.Z,{component:"th",children:"Senses"}),(0,s.jsx)(en.Z,{component:"th",children:"Related"}),l.map(e=>(0,s.jsx)(en.Z,{component:"th",children:e},"category_"+e))]})}),(0,s.jsx)(el.Z,{children:g.map(e=>{let t=y(e);return t?(0,s.jsx)(eC,{processed:t,edit:d},e):(0,s.jsx)(s.Fragment,{})})})]}):g.map(e=>{let t=y(e);return t?(0,s.jsx)(ev,{processed:t,onRemove:()=>{d({type:"remove",term:e})},onUpdate:n=>{n&&!p(n)&&d({type:"replace",term:n,term_type:t.term_type,originalTerm:e})},edit:d},e):(0,s.jsx)(s.Fragment,{})}):(0,s.jsx)(_.Z,{align:"center",children:"Add terms, or import an existing dictionary."})})]}):(0,s.jsxs)(P.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,s.jsx)(_.Z,{children:"Loading Resources..."}),(0,s.jsx)(eo.Z,{children:eU.map(e=>{let{key:n,label:i}=e;return(0,s.jsx)(ec.ZP,{children:(0,s.jsxs)(_.Z,{children:[r[n]?(0,s.jsx)(ex.Z,{color:"success"}):t[n]?(0,s.jsx)(eA.Z,{size:"1.5rem"}):(0,s.jsx)(ez.Z,{color:"error",sx:{marginBottom:-.8}}),r[n]||t[n]?"":"Failed to load ",i]})},n)})})]})})}let eG=(0,r.Z)({palette:{mode:"dark",primary:{main:"#bb92e3"}}}),eV=(e,t)=>{switch(t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function eX(){let[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!0),[u,m]=(0,a.useReducer)(eV,[]);return(0,s.jsx)(a.StrictMode,{children:(0,s.jsxs)(i.Z,{theme:eG,children:[(0,s.jsx)(l.ZP,{}),(0,s.jsx)(c,{loadingTerms:t,loadingTermAssociations:r,loadingSenseKeys:d,loadingSynsetInfo:h,children:(0,s.jsx)(G,{children:(0,s.jsxs)(ek.Provider,{value:m,children:[(0,s.jsx)(eL,{loading:{terms:e,termAssociations:n,sense_keys:o,synsetInfo:x},drawerOpen:!!u.length}),(0,s.jsx)(eT,{state:u,edit:m})]})})})]})})}}},function(e){e.O(0,[39,971,938,744],function(){return e(e.s=69)}),_N_E=e.O()}]);