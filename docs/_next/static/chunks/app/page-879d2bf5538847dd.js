(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{15223:function(e,t,n){Promise.resolve().then(n.bind(n,90947))},32261:function(e,t,n){"use strict";n.d(t,{V:function(){return j},Z:function(){return b}});var s=n(57437),r=n(60335),i=n(91326),a=n(80511),l=n(64593),o=n(88929),c=n(99128),d=n(2265),u=n(71268),h=n(53355),m=n(93853),x=n(54964),p=n(87339),f=n(64817),g=n(6850);let j={dictionary:0,comparisons:0};function y(e,t){return t.dictEntry.added-e.dictEntry.added}function b(e){let{editFromEvent:t}=e,n=(0,d.useContext)(m.IO),j=(0,d.useContext)(x.Z7),b=(0,d.useContext)(x.SZ),Z=(0,d.useCallback)(e=>b.includes(e),[b]),v=(0,d.useContext)(x.EN),C=(0,d.useMemo)(()=>Object.freeze(Object.keys(j).map(e=>j[e].term||e).sort()),[j]),w=(0,d.useMemo)(()=>{let e=[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsx)(r.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{v({type:"remove",term_id:e.id})},children:(0,s.jsx)(u.Z,{sx:{fontSize:".9em"}})})},{field:"term",headerName:"Term",renderCell:e=>(0,s.jsx)(h.IJ,{term:e.value})},{field:"sense",headerName:"Sense",description:"assigned sense key",editable:!0,renderEditCell:e=>(0,s.jsx)(h.m1,{id:e.id,field:e.field,processed:e.row.processed,editCell:e.api.setEditCellValue})},{field:"frequency",headerName:"Frequency",description:"relative frequency; 100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage"},{field:"matches",headerName:"Matches",description:"number of matches found in the full term list"},{field:"senses",headerName:"Senses",description:"number of directly associated senses"},{field:"related",headerName:"Related",description:"number of similar terms on record, based on agreement between embeddings spaces"},{field:"ncats",headerName:"Categories",description:"number of categories the term has weight in"}];return b.forEach(n=>e.push({field:"category_"+n,headerName:n,editable:!0,valueParser:(e,n)=>{let s=+e||"";return n&&t(s,n),s}})),e},[b,t]),[_,k]=(0,d.useState)([]),[S,E]=(0,d.useState)(0),O=(0,d.useMemo)(()=>{if(C.length<1e3)return!1;let e=_.map(e=>{let{id:t}=e;return t}).sort();return!(2>Math.abs(e.length-C.length))&&e.join()!==C.join()},[_,C]);(0,d.useEffect)(()=>{n.termAssociations&&n.synsetInfo&&(0,p.Ao)(j,n,O?E:void 0).then(e=>{k(e.sort(y)),O&&E(0)})},[j,n,O]);let[N,z]=(0,d.useState)("");return(0,s.jsxs)(i.Z,{component:"main",sx:{height:"100%"},children:[C.length&&(O||_.length)?O?(0,s.jsx)(l.Z,{open:!0,children:(0,s.jsxs)(o.Z,{sx:{textAlign:"center"},children:[(0,s.jsx)(a.Z,{variant:"h4",children:"Processing Dictionary"}),(0,s.jsx)(c.Z,{variant:"determinate",value:100*S}),(0,s.jsx)(a.Z,{variant:"caption",children:S?Math.round(100*S)+"%":"preparing..."})]})}):(0,s.jsx)(g.iA,{rows:_,columns:w,isCategory:Z,setEditCategory:z,editFromEvent:t}):(0,s.jsx)(a.Z,{align:"center",children:"Add terms, or import an existing dictionary."}),(0,s.jsx)(f.Q,{category:N,onClose:()=>z("")})]})}},28443:function(e,t,n){"use strict";n.d(t,{P:function(){return x},Z:function(){return f}});var s=n(57437),r=n(91326),i=n(88929),a=n(80511),l=n(99128),o=n(2265),c=n(87339),d=n(93853),u=n(54964),h=n(32261);let m=(0,n(57818).default)(()=>Promise.all([n.e(502),n.e(408)]).then(n.bind(n,94408)),{loadableGenerated:{webpack:()=>[94408]}});function x(e,t){return{lemma:+(e in t.lemma),lemma_related:+(e in t.lemma_related),lemma_synset:+(e in t.lemma_synset),related:+(e in t.related),related_lemma:+(e in t.related_lemma),related_related:+(e in t.related_related),related_synset:+(e in t.related_synset),synset:+(e in t.synset),synset_lemma:+(e in t.synset_lemma),synset_related:+(e in t.synset_related),synset_synset:+(e in t.synset_synset)}}async function p(e,t,n,s,r,i,a,l){clearTimeout(h.V.comparisons);let o=Object.keys(t),c=o.length;for(let r=0;e<c&&r<100;r++,e++){let r=t[o[e]];r.processed.lookup.map.forEach((e,i)=>{let a=r.term+"."+i,o=i+"."+r.term;if(r.term!==i&&!(a in s)&&!(o in s)&&i in t){s[a]=s[o]=!0;let e=function(e,t,n){if(!t.processed)return 0;let s=x(e.term,t.processed.lookup);return n?.35*s.lemma+.1*s.lemma_related+.001*s.lemma_synset+.25*s.related+.1*s.related_lemma+.001*s.related_related+.001*s.related_synset+.001*s.synset+.001*s.synset_lemma+.001*s.synset_related+.001*s.synset_synset:.35*s.lemma+.25*s.related+.001*s.synset}(r,t[i],l.dense);e>l.min_sim&&n.push({source:r.term,target:i,value:e,lineStyle:{width:.3+2*e,opacity:.35}})}})}i([e,c]),e<c?h.V.comparisons=setTimeout(()=>p(e,t,n,s,r,i,a,l),0):setTimeout(()=>{let e={},s=Object.values(t).map((t,n)=>(e[t.term]=n,{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,host:t.host||"",category:Object.keys(t.categories).sort((e,t)=>r[e]-r[t]),name:t.term,prop:1,value:0,symbolSize:10,itemStyle:{opacity:1},label:{show:!0}}));n.forEach(t=>{s[e[t.source]].value+=t.value,s[e[t.target]].value+=t.value});let i=0;s.forEach(e=>{let{value:t}=e;t>i&&(i=t)}),a({edges:n,nodes:s.map(e=>(e.prop=e.value/i,e.itemStyle={opacity:.6+.4*e.prop},e))})},0)}function f(e){let{allTerms:t,catCounts:n,selectedCategories:h,options:x,plotOptions:f}=e,g=(0,o.useContext)(d.IO),j=(0,o.useContext)(u.Z7),[y,b]=(0,o.useState)({edges:[],nodes:[]}),[Z,v]=(0,o.useState)([0,0]);return(0,o.useEffect)(()=>{let e=new Map(h.map((e,t)=>[t,e])),s={};t.forEach((t,n)=>{let r=!1,i={};if(e.forEach(e=>{(e in t.categories||"no categories"===e&&!Object.keys(t.categories).length)&&(r=!0,i[e]=t.categories[e])}),r){let e=(0,c.tt)(n,g,j,!0);"fixed"===e.type?n in s||(s[n]={term:n,categories:i,processed:e}):x.include_fuzzy&&e.matches.forEach(e=>{e in j||e in s||(s[e]={host:n,term:e,categories:i,processed:(0,c.tt)(e,g,{},!0)})})}}),p(0,s,[],{},n,v,b,x)},[j,g,x,h]),Z[0]<Z[1]?(0,s.jsx)(r.Z,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsx)(r.Z,{sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0,alignItems:"center",justifyContent:"center",textAlign:"center"},children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(a.Z,{variant:"h5",children:"Calculating Pairwise Similarities"}),(0,s.jsx)(l.Z,{variant:"determinate",value:Z[0]/Z[1]*100}),(0,s.jsx)(a.Z,{variant:"caption",children:Z[0]+" / "+Z[1]})]})})}):(0,s.jsx)(r.Z,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsx)(m,{nodes:y.nodes,edges:y.edges,options:f})})}},54964:function(e,t,n){"use strict";n.d(t,{$U:function(){return g},C4:function(){return y},EN:function(){return m},Hm:function(){return u},J6:function(){return c},Nc:function(){return S},SZ:function(){return x},Z7:function(){return h},_r:function(){return p},cl:function(){return _},dg:function(){return Z},p3:function(){return v},u_:function(){return C},uj:function(){return d},v$:function(){return j},xE:function(){return f}});var s=n(57437),r=n(2265),i=n(23471),a=n(87470),l=n(77129),o=n(93853);let c=(0,r.createContext)({selected:"default",dictionary_names:["default"],info_drawer_height:30,term_editor_width:200,use_db:!0}),d=(0,r.createContext)(e=>{}),u=(0,r.createContext)(e=>{}),h=(0,r.createContext)({}),m=(0,r.createContext)(e=>{}),x=(0,r.createContext)([]),p=(0,r.createContext)(e=>{}),f=(0,r.createContext)({edits:[],position:-1}),g=(0,r.createContext)(e=>{}),j=(0,r.createContext)(e=>{}),y=(0,r.createContext)(""),b=()=>async e=>{},Z=(0,r.createContext)((e,t)=>{}),v=(0,r.createContext)(async e=>{});function C(e,t){let n={};return Object.keys(t).forEach(s=>{let r=t[s];e.forEach(e=>{e in r.categories&&(n[s]=r)})}),n}let w={};function _(e){return e in w}function k(e,t){return e.toLowerCase()>t.toLowerCase()?1:-1}function S(e){let{children:t}=e,[n,C]=(0,r.useState)(""),[_,S]=(0,r.useState)(b),E=(e,t)=>{t?(C(e),S(t)):(C(""),S(b))},O=(0,r.useContext)(o.D4);(0,r.useEffect)(()=>{(0,l.Vt)(O,E)},[]);let[N,z]=(0,r.useState)((0,i.r)()),P=!!N.use_db,F=e=>{(0,l.x0)(e,t=>{R({type:"change_dict",name:e,dict:t})},E,P)},M=e=>{if("replace"===e.type){A(e.history);return}let t="clear"===e.type?[]:[...I.edits],n="clear"===e.type?-1:I.position;"remove"===e.type?t.pop():"clear"!==e.type&&(n>-1&&(t.splice(0,n+1),n=-1),e.entry.time||(e.entry.time=Date.now()),t.splice(0,0,e.entry)),t.length>1e3&&t.splice(1e3,t.length-999),N.disable_storage||(0,l.po)(N.selected,"dict_history_",{edits:t,position:n},P),A({edits:t,position:n})},[I,A]=(0,r.useState)({edits:[],position:-1}),T=e=>{"delete"===e.type?("default"!==e.name&&N.dictionary_names.splice(N.dictionary_names.indexOf(e.name),1),N.selected="default",z({...N}),(0,l.Li)(e.name,"dict_"),(0,l.Li)(e.name,"dict_history_"),(0,l.c)(e.name),F("default")):(N.dictionary_names.includes(e.name)||N.dictionary_names.push(e.name),N.selected=e.name,"set"===e.type?F(e.name):(N.disable_storage||(0,l.GM)(e.name,e.dict,P,e.password),"add"===e.type&&R({type:"change_dict",name:e.name,dict:e.dict}))),localStorage.setItem("dictionary_builder_settings",JSON.stringify(N))},[D,L]=(0,r.useReducer)((e,t)=>{let n=e;if("collect"===t.type){let s=new Set(t.reset?[]:e);Object.keys(t.dictionary).forEach(e=>{let n=t.dictionary[e];n&&n.categories&&Object.keys(n.categories).forEach(e=>s.add(e))}),n=Array.from(s).sort(k)}else"add"===t.type?e.includes(t.cat)||(n=[...e,t.cat].sort(k)):n=e.filter(e=>e!==t.cat);return e.length!==n.length||e.join("")!==n.join("")?n:e},[]),[W,R]=(0,r.useReducer)((e,t)=>{if("history_bulk"===t.type)return L({type:"collect",dictionary:t.dict,reset:!0}),T({type:"save",name:N.selected,dict:t.dict}),t.dict;if("change_dict"===t.type){var n;return n=t.dict,w={},Object.keys(n).forEach(e=>{let t=n[e],s=t.term||e;t.term=s,s in w?e!==s&&w[s].add(e):w[s]=new Set}),(0,l.td)(t.name,e=>M({type:"replace",history:e}),E,P),L({type:"collect",dictionary:t.dict,reset:!0}),t.dict}let s={...e};if("rename_category"===t.type){let e=0;Object.keys(s).forEach(n=>{let r=s[n];t.name in r.categories&&(e++,r.categories[t.name]&&(r.categories[t.newName]=r.categories[t.name]),delete r.categories[t.name])}),L({type:"remove",cat:t.name}),L({type:"add",cat:t.newName}),e&&M({type:"add",entry:{type:"rename_category",name:t.newName,originalName:t.name}})}else if("remove_category"===t.type){let e={},n=0;Object.keys(s).forEach(r=>{let i=s[r];t.name in i.categories&&(n++,i.categories[t.name]&&(e[r]=i.categories[t.name]),delete i.categories[t.name])}),n&&M({type:"add",entry:{type:"remove_category",name:t.name,weights:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in s&&(t.weights[e]?s[e].categories[t.name]=t.weights[e]:delete s[e].categories[t.name])}),M({type:"add",entry:t});else if("reweight_category"===t.type){let e={},n=0;Object.keys(s).forEach(r=>{let i=s[r];i.categories[t.name]!==t.weights[r]&&(n++,e[r]=i.categories[t.name]||0,t.weights[r]?i.categories[t.name]=t.weights[r]:delete i.categories[t.name])}),n&&M({type:"add",entry:{...t,originalWeights:e}})}else{if("remove"===t.type)delete s[t.term_id],M({type:"add",entry:{type:"remove_term",name:t.term_id,value:e[t.term_id]}});else{let n="string"==typeof t.term?t.term:t.term.source;t.term_id||("add"===t.type?n in w?(t.term_id=n+(w[n].size+1),w[n].add(t.term_id)):w[n]=new Set:t.term_id=n);let r=t.term_id||n,i=s[r]||{};if(s[r]={term:n,added:i.added||t.added||Date.now(),type:t.term_type||i.type||"fixed",categories:{...t.categories||i.categories||{}},sense:"sense"in t?t.sense||"":i.sense||""},"replace"===t.type){let n="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete s[n],M({type:"add",entry:{type:"replace_term",name:r,value:s[r],originalName:n,originalValue:e[n]}})}else if(r in e){let t;let n=e[r],i=s[r];if(n.sense&&i.sense!==n.sense)t={field:"sense",new:i.sense,original:n.sense};else{let e=[];Object.keys(i.categories).forEach(t=>{i.categories[t]!==n.categories[t]&&e.push({category:t,from:n.categories[t]||0,to:i.categories[t]||0})}),Object.keys(n.categories).forEach(t=>{t in i.categories||e.push({category:t,from:n.categories[t],to:0})}),e.length?t={field:"categories",edits:e}:i.sense!==n.sense&&(t={field:"sense",new:i.sense,original:n.sense})}t&&M({type:"add",entry:{type:"edit_term",name:r,value:t}})}else M({type:"add",entry:{type:"add_term",name:r,value:s[r]}})}L({type:"collect",dictionary:s})}return T({type:"save",name:N.selected,dict:s}),s},{});return(0,r.useEffect)(()=>{N.dictionary_names.includes(N.selected)||(N.selected="default"),F(N.selected)},[]),(0,s.jsx)(c.Provider,{value:N,children:(0,s.jsx)(d.Provider,{value:z,children:(0,s.jsx)(y.Provider,{value:n,children:(0,s.jsx)(Z.Provider,{value:E,children:(0,s.jsx)(v.Provider,{value:_,children:(0,s.jsx)(f.Provider,{value:I,children:(0,s.jsx)(g.Provider,{value:M,children:(0,s.jsx)(u.Provider,{value:T,children:(0,s.jsx)(h.Provider,{value:W,children:(0,s.jsx)(x.Provider,{value:D,children:(0,s.jsx)(m.Provider,{value:R,children:(0,s.jsx)(p.Provider,{value:L,children:(0,s.jsx)(j.Provider,{value:e=>{let t=Math.min(Math.max(-1,I.position+e),I.edits.length-1);if(t!==I.position){let e={...W},n={...I};(0,a.S)(t,n,e),M({type:"replace",history:n}),N.disable_storage||(0,l.po)(N.selected,"dict_history_",n,P),R({type:"history_bulk",dict:e})}},children:t})})})})})})})})})})})})})}},64817:function(e,t,n){"use strict";n.d(t,{Q:function(){return O}});var s=n(57437),r=n(19337),i=n(61096),a=n(80824),l=n(60335),o=n(66124),c=n(88929),d=n(23983),u=n(76548),h=n(80511),m=n(68038),x=n(78975),p=n(98784),f=n(37263),g=n(88857),j=n(2265),y=n(54964),b=n(87339),Z=n(93853),v=n(31655),C=n(85140),w=n(63742),_=n(79806),k=n(39169),S=n(28443);function E(e){let{name:t,current:n,edit:f}=e,g=(0,j.useContext)(Z.IO),{terms:E,collapsedTerms:O,termLookup:N}=g,z=(0,j.useContext)(y.Z7),P=(0,j.useMemo)(()=>{let e={};return Object.keys(z).forEach(t=>e[z[t].term||t]=!0),e},[z]),F=(0,j.useMemo)(()=>({all:";;"+Object.keys(P).join(";;")+";;"}),[P]),[M,I]=(0,j.useState)(!1),A=()=>I(!M),[T,D]=(0,j.useState)(!0),[L,W]=(0,j.useState)(!0),[R,q]=(0,j.useState)(!0),[K,B]=(0,j.useState)(!0),[$,H]=(0,j.useState)(1),[V,J]=(0,j.useState)(""),[U,G]=(0,j.useState)([]),[X,Y]=(0,j.useState)([]),Q=K?e=>N&&e in N:e=>e in P,ee=e=>{e&&!X.includes(e)&&Q(e)&&Y([...X,e])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{onClick:A,fullWidth:!0,children:"Fill Weights"}),M&&(0,s.jsxs)(i.Z,{open:M,onClose:A,children:[(0,s.jsx)(a.Z,{children:"Category Weight Filler"}),(0,s.jsx)(l.Z,{"aria-label":"close category weight filler",onClick:A,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(o.Z,{sx:{minWidth:"300px",minHeight:"300px",p:1},children:(0,s.jsxs)(c.Z,{spacing:2,children:[(0,s.jsx)(v.Z,{title:L?"Weights will be similarity to the specified core terms":"Will use the specified value as the weight of all terms",placement:"right",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:L,onChange:()=>W(!L)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Similarity-based"}),labelPlacement:"start"})}),L&&E?(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(C.Z,{multiple:!0,disableCloseOnSelect:!0,options:U,onKeyUp:e=>{let t="value"in e.target?e.target.value:"";if(("Enter"===e.code||"NumpadEnter"===e.code)&&V&&(!t||t===V)){ee(t);return}if(E){let e=[];if(t&&O){let n;try{n=RegExp(k.AL.test(t)?(0,k.ZC)(t):";"+t+"[^;]*;","g")}catch(e){n=RegExp(";"+t.replace(k.mi,"\\%&")+";","g")}(0,b.gD)("",n,K?O:F,e,100)}X.forEach(t=>{e.includes(t)||e.push(t)}),G(e)}},value:X,onChange:(e,t)=>{1===Math.abs(t.length-X.length)&&Y([...t])},renderTags:(e,t)=>e.map((e,n)=>(0,j.createElement)(w.Z,{label:e,...t({index:n}),key:e})),renderInput:e=>(0,s.jsx)(d.Z,{...e,size:"small",label:"Core Terms",value:V,onChange:e=>{X.includes(e.target.value)||J(e.target.value)}}),filterOptions:e=>e,noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}),(0,s.jsxs)(_.Z,{sx:{m:0,justifyContent:"space-between"},children:[(0,s.jsx)(u.Z,{onClick:()=>{G([]),Y([])},children:"Clear"}),(0,s.jsx)(v.Z,{title:K?"Allowing any terms from the full list on record":"Allowing only terms included in the category",placement:"top",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:K,onChange:()=>{G([]),B(!K)}}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Allow any terms"}),labelPlacement:"top"})}),(0,s.jsx)(v.Z,{title:R?"Will rescaling similarities to be between 0 and 1":"Will display raw similarity values",placement:"top",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:R,onChange:()=>q(!R)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Scale"}),labelPlacement:"top"})})]})]}):(0,s.jsx)(d.Z,{fullWidth:!0,size:"small",label:"Value",value:$,onChange:e=>H(+e.target.value)}),(0,s.jsx)(v.Z,{title:T?"Will apply weight to all terms in the dictionary":"Will apply weight only to terms with weight in the current category",placement:"right",children:(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:T,onChange:()=>D(!T)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Apply to all terms"}),labelPlacement:"start"})})]})}),(0,s.jsxs)(p.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(u.Z,{onClick:A,children:"Cancel"}),(0,s.jsx)(u.Z,{variant:"contained",onClick:()=>{let e={};if(L){let t=new Map;X.forEach(e=>{let n=(0,b.tt)(e,g,z,!0);"fixed"===n.type?t.set(e,n.lookup):n.matches.forEach(e=>{t.set(e,(0,b.tt)(e,g,z,!0).lookup)})});let s=[1/0,-1/0];Object.keys(T?P:n).forEach(n=>{let r=0;t.forEach(e=>{let t=(0,b.tt)(n,g,z);if("fixed"===t.type){let t=(0,S.P)(n,e);r+=1*(t.lemma||t.related||t.synset)+.1*(t.lemma_related||t.lemma_synset)+.01*(t.related_lemma||t.related_related||t.related_synset)+.001*(t.synset_lemma||t.synset_related||t.synset_synset)}else t.matches.forEach(t=>{let n=(0,S.P)(t,e);r+=1*(n.lemma||n.related||n.synset)+.1*(n.lemma_related||n.lemma_synset)+.01*(n.related_lemma||n.related_related||n.related_synset)+.001*(n.synset_lemma||n.synset_related||n.synset_synset)})}),R&&(s[0]>r&&(s[0]=r),s[1]<r&&(s[1]=r)),e[n]=r}),R&&Object.keys(e).forEach(t=>e[t]=(e[t]-s[0])/(s[1]-s[0]))}else T?Object.keys(z).forEach(t=>e[t]=$):Object.keys(n).forEach(t=>{n[t]&&(e[t]=$)});let s={};Object.keys(T?z:n).forEach(t=>{t in e&&(s[t]=e[t])}),f({type:"reweight_category",name:t,weights:s}),A()},children:"Fill"})]})]})]})}function O(e){let{category:t,onClose:n}=e,[v,C]=(0,j.useState)(!1),w=(0,j.useContext)(y.SZ),_=(0,j.useContext)(Z.IO),k=(0,j.useContext)(y.Z7),[S,O]=(0,j.useState)(t),[N,z]=(0,j.useState)(t);(0,j.useEffect)(()=>{z(t)},[t,z]),(0,j.useEffect)(()=>{O(N)},[N,O]);let P=(0,j.useContext)(y.EN),F=(0,j.useCallback)((e,n)=>{let{field:s,row:r}=n,{processed:i,dictEntry:a}=r;if(s){let s={...a.categories};t in s&&!e?delete s[t]:e&&(s[t]=e),P({type:"update",term_id:n.id,term:i.term,term_type:i.term_type,categories:s})}},[P,t]),M=(0,j.useMemo)(()=>new Map(Object.keys(k).map((e,t)=>[t,e])),[k]),I=(0,j.useMemo)(()=>{let e={};return M.forEach(n=>{let{categories:s}=k[n];t in s&&(e[n]=s[t])}),e},[k,M,t]),A=(0,j.useMemo)(()=>{let e=[];return M.forEach(t=>{if(v||t in I){let n=k[t];e.push({id:t,term:n.term?n.sense&&t!==n.term?n.term+"@"+n.sense:n.term:t,weight:I[t]||"",dictEntry:n,processed:(0,b.tt)(t,_,k)})}}),e},[_,k,M,v,I]);return t&&w.includes(t)?(0,s.jsxs)(i.Z,{open:!!t,onClose:n,children:[(0,s.jsx)(a.Z,{children:"Category Editor"}),(0,s.jsx)(l.Z,{"aria-label":"close category editor",onClick:n,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(o.Z,{sx:{p:1,minWidth:"300px",height:"500px"},children:(0,s.jsxs)(c.Z,{sx:{height:"100%"},children:[(0,s.jsxs)(c.Z,{direction:"row",children:[(0,s.jsx)(d.Z,{label:"Name",fullWidth:!0,value:S,onChange:e=>O(e.target.value),size:"small"}),S!==t?(0,s.jsx)(u.Z,{variant:"contained",onClick:()=>{P({type:"rename_category",name:t,newName:S})},children:"Rename"}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsxs)(c.Z,{direction:"column",spacing:1,sx:{mt:2,height:"100%"},children:[(0,s.jsx)(h.Z,{fontWeight:"bold",children:"Term Weights"}),(0,s.jsx)(m.Z,{control:(0,s.jsx)(x.Z,{size:"small",checked:v,onChange:()=>C(!v)}),label:(0,s.jsx)(h.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,s.jsx)(f._$,{className:"bottom-search datagrid-vertical",rows:A,columns:[{field:"term",headerName:"Term",width:170},{field:"weight",headerName:"Weight",width:95,editable:!0,hideable:!1,valueParser:(e,t)=>{let n=+e||"";return t&&F(n,t),n}}],disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:g.T},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&"view"===e.cellMode&&F(0,e)}})]})]})}),(0,s.jsx)(p.Z,{children:(0,s.jsx)(E,{name:t,current:I,edit:P})})]}):(0,s.jsx)(s.Fragment,{})}},60460:function(e,t,n){"use strict";n.d(t,{I:function(){return m}});var s=n(57437),r=n(19337),i=n(76548),a=n(61096),l=n(80824),o=n(60335),c=n(66124),d=n(80511),u=n(98784),h=n(2265);function m(e){let{label:t,message:n,onConfirm:m}=e,[x,p]=(0,h.useState)(!1),f=()=>p(!x);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{fullWidth:!0,color:"error",onClick:f,children:t}),x&&(0,s.jsxs)(a.Z,{open:x,onClose:f,children:[(0,s.jsx)(l.Z,{children:"Confirm"}),(0,s.jsx)(o.Z,{"aria-label":"close export menu",onClick:f,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(d.Z,{children:n})}),(0,s.jsxs)(u.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(i.Z,{onClick:f,children:"Cancel"}),(0,s.jsx)(i.Z,{variant:"contained",color:"error",onClick:()=>{m(),f()},children:t})]})]})]})}},87470:function(e,t,n){"use strict";n.d(t,{A:function(){return v},S:function(){return Z}});var s=n(57437),r=n(7547),i=n(57300),a=n(47905),l=n(80511),o=n(70270),c=n(27573),d=n(88929),u=n(60335),h=n(94696),m=n(32184),x=n(82879),p=n(76548),f=n(2265),g=n(54964),j=n(21662),y=n(57079),b=n(24834);function Z(e,t,n){let s=t.position;if(e>t.position)for(s=Math.max(0,s);s<e+1;s++)t.edits[s]&&function(e,t){switch(e.type){case"add_term":delete t[e.name];return;case"remove_term":t[e.name]=e.value;return;case"replace_term":delete t[e.name],t[e.originalName]=e.originalValue;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.from?n.categories[e.category]=e.from:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.original;return;case"add_category":Object.keys(t).forEach(n=>{let s=t[n];Object.keys(s.categories).forEach(t=>{t in e.weights&&delete s.categories[t]})});return;case"remove_category":Object.keys(t).forEach(n=>{n in e.weights&&(t[n].categories[e.name]=e.weights[n])});return;case"reweight_category":Object.keys(t).forEach(n=>{e.originalWeights[n]?t[n].categories[e.name]=e.originalWeights[n]:delete t[n].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(n=>{let s=t[n];e.name in s.categories&&(s.categories[e.name]&&(s.categories[e.originalName]=s.categories[e.name]),delete s.categories[e.name])});return}}(t.edits[s],n);else for(s=Math.min(t.edits.length-1,s);s>e;s--)t.edits[s]&&function(e,t){switch(e.type){case"add_term":t[e.name]=e.value;return;case"remove_term":delete t[e.name];return;case"replace_term":delete t[e.originalName],t[e.name]=e.value;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.to?n.categories[e.category]=e.to:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.new;return;case"add_category":Object.keys(t).forEach(n=>{n in e.weights&&(t[n].categories[e.name]=e.weights[n])});return;case"remove_category":Object.keys(t).forEach(n=>{let s=t[n];s&&s.categories&&e.name in s.categories&&delete s.categories[e.name]});return;case"reweight_category":Object.keys(t).forEach(n=>{e.weights[n]?t[n].categories[e.name]=e.weights[n]:delete t[n].categories[e.name]});return;case"rename_category":Object.keys(t).forEach(n=>{let s=t[n];e.originalName in s.categories&&(s.categories[e.originalName]&&(s.categories[e.name]=s.categories[e.originalName]),delete s.categories[e.originalName])});return}}(t.edits[s],n);t.position=e}function v(){let e=(0,f.useContext)(g.xE),t=(0,f.useContext)(g.$U),n=(0,f.useContext)(g.v$),Z=(0,f.useMemo)(()=>e.edits.map((t,o)=>(0,s.jsx)(r.ZP,{sx:{p:0},children:(0,s.jsx)(i.Z,{sx:{borderLeft:e.position>=o?"2px solid #fff":""},onClick:()=>n(o-e.position),children:(0,s.jsx)(a.Z,{sx:{m:0},primary:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsx)("span",{style:{opacity:".75"},children:t.type+": "}),t.name]}),"edit_term"===t.type?(0,s.jsx)(l.Z,{className:"code",sx:{wordBreak:"break-all"},children:"categories"===t.value.field?t.value.edits.map(e=>e.category+": "+e.from+" -> "+e.to).join("\n"):t.value.field+": "+t.value.original+" -> "+t.value.new}):"rename_category"===t.type?(0,s.jsxs)(l.Z,{className:"code",children:["From ",t.originalName]}):(0,s.jsx)(s.Fragment,{})]}),secondary:(0,s.jsx)(l.Z,{sx:{fontSize:".8em",opacity:.6},variant:"body2",children:t.time?new Date(t.time).toLocaleString():""})})})},o)),[e,n]);return(0,s.jsxs)(o.Z,{elevation:5,sx:{height:"60%",minHeight:"300px",position:"relative",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(c.Z,{title:(0,s.jsx)(l.Z,{fontWeight:"bold",children:"Edit History"}),sx:{pb:0}}),(0,s.jsxs)(d.Z,{direction:"row",sx:{position:"absolute",top:8,right:8},children:[(0,s.jsx)(u.Z,{onClick:()=>n(1),"aria-label":"undo",children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(u.Z,{onClick:()=>n(-1),"aria-label":"redo",children:(0,s.jsx)(y.Z,{})}),(0,s.jsx)(u.Z,{onClick:()=>n(-1e3),"aria-label":"jump to current",children:(0,s.jsx)(b.Z,{})})]}),(0,s.jsx)(h.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(m.Z,{sx:{overflowX:"hidden"},children:Z})}),(0,s.jsx)(x.Z,{children:(0,s.jsx)(p.Z,{variant:"contained",color:"warning",fullWidth:!0,onClick:()=>{t({type:"clear"})},children:"Clear"})})]})}},17872:function(e,t,n){"use strict";n.d(t,{VZ:function(){return _},l0:function(){return Z},qm:function(){return b}});var s=n(57437),r=n(94696),i=n(82879),a=n(76548),l=n(58438),o=n(70270),c=n(91326),d=n(27573),u=n(60335),h=n(88929),m=n(80511),x=n(2265),p=n(54964),f=n(53355),g=n(19337),j=n(56522),y=n(17671);let b=(0,x.createContext)([]),Z=(0,x.createContext)(e=>{});function v(e){let{term:t}=e,n=(0,x.useContext)(p.Z7),l=(0,x.useContext)(p.EN),o=t in n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{sx:{overflowY:"auto",pb:0,pt:0,height:"100%"},children:(0,s.jsx)(f.m7,{term:t})}),(0,s.jsx)(i.Z,{sx:{justifyContent:"flex-end",p:0},children:(0,s.jsx)(a.Z,{onClick:()=>{l(o?{type:"remove",term_id:t}:{type:"add",term:t,term_type:"fixed"})},children:o?"Remove":"Add"})})]})}function C(e){let{info:t}=e;return(0,s.jsx)(r.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,s.jsx)(j.gA,{info:t})})}let w=-1;function _(e){let{height:t,setHeight:n}=e,r=(0,x.useContext)(p.Z7),i=(0,x.useContext)(Z),f=(0,x.useContext)(p.J6),j=(0,x.useContext)(p.uj),_=(0,x.useContext)(y.Pq),k=(0,x.useContext)(b),S=(0,x.useCallback)(e=>{let s=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));s!==t&&(cancelAnimationFrame(w),w=requestAnimationFrame(()=>{n(s),window.dispatchEvent(new Event("resize"))}))},[n]),E=(0,x.useCallback)(e=>{e.preventDefault(),document.body.style.cursor="ns-resize",window.addEventListener("mousemove",S)},[S]);if((0,x.useEffect)(()=>{let e=e=>{if(e.preventDefault(),-1!==w){cancelAnimationFrame(w),w=-1,document.body.style.cursor="default",window.removeEventListener("mousemove",S);let t=Math.max(18,Math.min(Math.ceil((1-e.y/window.innerHeight)*100),87));n(t),f.info_drawer_height=t,j({...f}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(f)),window.dispatchEvent(new Event("resize"))}};return window.addEventListener("mouseup",e),()=>window.removeEventListener("mouseup",e)},[S,f,j,n]),!k.length)return;let O=()=>{i({type:"reset"})},N=k[0];return(0,s.jsx)(l.ZP,{open:""!==N.value,onClose:O,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:t+"vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{sx:{width:"100%",backgroundColor:"#515151",height:"1px",position:"absolute",cursor:"ns-resize","&:hover":{border:"solid 2px #dab4ff"}},onMouseDownCapture:E}),(0,s.jsx)(d.Z,{sx:{p:1},action:(0,s.jsx)(u.Z,{"aria-label":"Close info drawer",onClick:O,className:"close-button",children:(0,s.jsx)(g.Z,{})}),title:(0,s.jsxs)(h.Z,{direction:"row",children:[k.length>1?(0,s.jsx)(a.Z,{onClick:()=>i({type:"back"}),sx:{opacity:.8},children:k[1].value}):(0,s.jsx)(s.Fragment,{}),N.value in r?(0,s.jsx)(a.Z,{sx:{textTransform:"none",p:0},onClick:()=>_(N.value),children:(0,s.jsx)(m.Z,{variant:"h3",children:N.value})}):(0,s.jsx)(m.Z,{variant:"h3",children:N.value})]})}),"term"===N.type?(0,s.jsx)(v,{term:N.value}):(0,s.jsx)(C,{info:N.info})]})})}},40340:function(e,t,n){"use strict";async function s(e){let t=new Blob([JSON.stringify(e)]).stream().pipeThrough(new CompressionStream("gzip")).getReader(),n=[];for(;;){let{done:e,value:s}=await t.read();if(e)break;n.push(s)}return new Blob(n)}async function r(e){let t=e.stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(t).json()}n.d(t,{L:function(){return r},n:function(){return s}})},39169:function(e,t,n){"use strict";n.d(t,{AL:function(){return i},O$:function(){return u},OX:function(){return m},SP:function(){return s},T9:function(){return p},WR:function(){return l},ZC:function(){return c},ks:function(){return r},mi:function(){return a},tO:function(){return d}});let s=/[\r\n]+/,r=/\*/,i=/\*/g,a=/([\[\]\(\)*?^$.+])/g,l=/^;|;$/g,o=/([\[\]\(\)?^$.+])/g;function c(e){return";"+e.replace(o,"\\$&").replace(i,"[^;]*")+";"}function d(e,t){return e.length-t.length}function u(e,t){return t&&-1!==e?(1-e/t)*100:0}let h=/\./g;function m(e){return";"+e.replace(h,"[^;]")+";"}let x=/^.*[/\\]/;function p(e){return e.replace(x,"")}},90947:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eD}});var s=n(57437),r=n(94444),i=n(81705),a=n(20124),l=n(2265),o=n(93853),c=n(54964),d=n(17872),u=n(17671),h=n(62197),m=n(91326),x=n(32261),p=n(53346),f=n(84311),g=n(71733),j=n(79806),y=n(88929),b=n(85140),Z=n(23983),v=n(31655),C=n(60335),w=n(76548),_=n(39169),k=n(23471),S=n(71268),E=n(6760),O=n(19337),N=n(7547),z=n(57300),P=n(47905),F=n(80511),M=n(58438),I=n(70270),A=n(27573),T=n(28549),D=n(67351),L=n(46849),W=n(11656),R=n(94696),q=n(32184),K=n(82879),B=n(60692),$=n(83607),H=n(48024),V=n(22960),J=n(61096),U=n(80824),G=n(66124),X=n(18409),Y=n(68038),Q=n(78975),ee=n(98784),et=n(77129);function en(e){let{setName:t,setContent:n}=e,r=(0,l.useContext)(c.dg),i=(0,l.useContext)(c.J6),[a,o]=(0,l.useState)(!1),d=()=>o(!a);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{title:"select an existing dictionary to import as a copy",children:(0,s.jsx)(w.Z,{variant:"outlined",onClick:d,children:"Copy"})}),a&&(0,s.jsxs)(J.Z,{open:a,onClose:d,children:[(0,s.jsx)(U.Z,{children:"Copy Dictionary"}),(0,s.jsx)(C.Z,{"aria-label":"close export menu",onClick:d,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsx)(G.Z,{sx:{p:0},children:(0,s.jsx)(q.Z,{sx:{p:0,pb:2},children:i.dictionary_names.map(e=>(0,s.jsx)(N.ZP,{sx:{p:0},children:(0,s.jsx)(z.Z,{onClick:()=>(0,et.x0)(e,s=>{t(i.dictionary_names.includes(e+" Copy")?e+" Copy"+(1e4*Math.random()>>0):e+" Copy"),n(JSON.stringify(s,void 0,2)),d()},r,!!i.use_db),children:e})},e))})})]})]})}let es=(0,H.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),er=/\t/,ei=/\s\s/,ea=/^\s+|\s+$/g,el=/^["\s]+|["\s]+$/g,eo=/\s{2,}|\t+/g,ec=/[[({]/,ed=/[\])}]/,eu=/([\[\]\(\)?^$.+])/;function eh(e,t,n,s,r){return{added:s,type:r&&function(e){if(!eu.test(e))return!1;let t=ec.test(e),n=ed.test(e);return t&&n||!t&&!n}(e)?"regex":"fixed",categories:t,sense:n||"",term:e}}function em(){let e=(0,V.Z)(),t=(0,l.useContext)(c.Hm),[n,r]=(0,l.useState)(""),[i,a]=(0,l.useState)(!1),o=()=>a(!i),[d,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[b,k]=(0,l.useState)(!0),S=()=>{r(""),f(""),j("")},E=()=>{n&&(t({type:"add",name:n,dict:function(e,t){let n=Date.now(),s={},r=e=>{let t=e;return e in s?(t+=s[e].size+1,s[e].add(t)):s[e]=new Set,t},i={};if(e)try{if("%"===e[0]){let s=e.split(_.SP),a={},l=s.length;if(l>1){let e=1;for(e=1;e<l;e++){let t=s[e].replace(ea,"");if("%"===t)break;let n=t.split(eo);n.length>1&&n[1]&&(a[n[0]]=n[1])}for(e++;e<l;e++){let o=s[e].replace(ea,"").split(eo);if(o.length>1){let s=o.splice(0,1)[0].toLowerCase();if(s){let c={};o.forEach(e=>{e in a&&(c[a[e]]=1)});let[d,u]=s.split("@");i[r(d)]=eh(d,c,u,n-l+e,t)}}}}}else if("{"===e[0]){let s=JSON.parse(e),a=Object.keys(s);if(a.length&&"type"in s[a[0]]&&"string"==typeof s[a[0]].type)return s;let l=0;a.forEach(e=>{if(e){let a=s[e];Array.isArray(a)?(l+=a.length,a.forEach((s,a)=>{if(s){let[o,c]=s.toLowerCase().split("@"),d=r(o);d in i?i[d].categories[e]=1:i[d]=eh(o,{[e]:1},c,n-l+a,t)}})):Object.keys(a).forEach((s,o)=>{if(l++,s){let[c,d]=s.toLowerCase().split("@"),u=r(c);u in i?i[u].categories[e]=a[s]:i[u]=eh(c,{[e]:a[c]},d,n-l+o,t)}})}})}else{let s=e.split(_.SP),a=er.test(s[0])?"	":ei.test(s[0])?"  ":",",l=s.splice(0,1)[0].split(a).map(e=>e.replace(el,""));l.splice(0,1);let o="term_sense"===l[0],c=s.length;s.forEach((e,s)=>{let d=e.split(a).map(e=>e.replace(el,"")),u=d.splice(0,1)[0].toLowerCase();if(u){let e="",a={};d.forEach((t,n)=>{if(t&&l[n]){let s=+t;!e&&(o&&0===n||isNaN(s))?e=t:a[l[n]]=+t}}),i[r(u)]=eh(u,a,e,n-c+s,t)}})}}catch(e){}return i}(p,d),password:h?g:""}),S(),a(!1))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{variant:"outlined",onClick:o,children:"New"}),(0,s.jsxs)(J.Z,{open:i,onClose:o,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],n=new FileReader;n.onload=()=>{r((0,_.T9)(t.name)),f(n.result)},n.readAsText(t)}},children:[(0,s.jsx)(U.Z,{children:"Add Dictionary"}),(0,s.jsx)(C.Z,{"aria-label":"close import menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsx)(G.Z,{sx:{p:1},children:(0,s.jsxs)(y.Z,{spacing:1,children:[(0,s.jsx)(Z.Z,{size:"small",label:"Name",value:n,onKeyDown:e=>{(n&&"Enter"===e.code||"NumpadEnter"===e.code)&&E()},onChange:e=>{r(e.target.value)}}),(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(X.Z,{sx:{fontSize:".8em"},htmlFor:"import_content",children:"Import Content"}),(0,s.jsx)("textarea",{id:"import_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:p?"pre":"normal",minWidth:"30em",minHeight:"20em"},value:p,onChange:e=>{f(e.target.value)},placeholder:"drag and drop a file, or enter content directly; see export menu for format examples"})]}),(0,s.jsx)(v.Z,{title:"Attempt to convert terms to regular expressions if they contain special RegEx characters.",placement:"top",children:(0,s.jsx)(Y.Z,{label:"Detect RegEx",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{checked:d,onChange:()=>u(!d)})})}),(0,s.jsx)(v.Z,{title:"Encrypt dictionary and history when being stored.",placement:"right",children:(0,s.jsx)(Y.Z,{label:"Encrypt",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{checked:h,onChange:()=>x(!h)})})}),h?(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Password",type:b?"password":"text",value:g,onChange:e=>j(e.target.value)}),(0,s.jsx)(C.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>k(!b),children:b?(0,s.jsx)(B.Z,{}):(0,s.jsx)($.Z,{})})]}):(0,s.jsx)(s.Fragment,{})]})}),(0,s.jsxs)(ee.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(y.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(en,{setName:r,setContent:f}),(0,s.jsx)(v.Z,{title:"select a file to import a dictionary from",children:(0,s.jsxs)(w.Z,{variant:"outlined",component:"label",children:["File",(0,s.jsx)(es,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],n=new FileReader;n.onload=()=>{r((0,_.T9)(t.name)),f(n.result),e.target.value=""},n.readAsText(t)}}})]})}),(0,s.jsx)(v.Z,{title:"clear current content",children:(0,s.jsx)(w.Z,{onClick:S,children:"clear"})})]}),(0,s.jsx)(w.Z,{variant:"contained",disabled:!!h&&!g||!n,onClick:E,children:"Add"})]})]})]})}let ex=/\.\w{3,4}$/i;function ep(){let e=(0,V.Z)(),t=(0,l.useContext)(c.J6),n=(0,l.useContext)(c.Z7),[r,i]=(0,l.useState)(!1),a=()=>i(!r),[o,d]=(0,l.useState)("dic"),[u,h]=(0,l.useState)("csv"),[m,x]=(0,l.useState)(t.selected),[p,f]=(0,l.useState)("unweighted"),[g,j]=(0,l.useState)(!1),b=(0,l.useMemo)(()=>r?function(e,t,n,s,r){switch(t){case"tabular":let i=function(e){switch(e){case"csv":return",";case"tsv":return"	";default:return"  "}}(n),a=new Set;Object.values(e).forEach(e=>{let t=e.categories;t&&Object.keys(t).forEach(e=>a.add(e))});let l=Array.from(a),o=new Map(l.map((e,t)=>[t,e]));return'"term"'+i+'"'+(r?'term_sense"'+i+'"':"")+l.join('"'+i+'"')+'"\n'+Object.keys(e).map(t=>{let n=e[t],s=n.categories,a='"'+(n.term||t)+'"';return r&&(a+=i+n.sense),o.forEach(e=>{a+=i+(e in s?s[e]:"")}),a}).join("\n");case"dic":let c={},d=0,u="";return Object.keys(e).forEach(t=>{let n=e[t],s=n.categories;if(s){let e=[n.term||t];r&&n.sense&&(e[0]+="@"+n.sense),Object.keys(s).forEach(t=>{t in c||(c[t]=++d),e.push(c[t])}),u+="\n"+e.join("	")}}),"%\n"+Object.keys(c).map(e=>c[e]+"	"+e).join("\n")+"\n%"+u;case"json":if("full"===s)return JSON.stringify(e,void 0,2);let h={};if(Object.keys(e).forEach(t=>{let n=e[t],s=n.categories;if(s){let e=n.term||t;r&&n.sense&&(e+="@"+n.sense),Object.keys(s).forEach(t=>{t in h||(h[t]={}),h[t][e]=s[t]})}}),"weighted"===s)return JSON.stringify(h,void 0,2);let m={};return Object.keys(h).forEach(e=>{m[e]=Object.keys(h[e])}),JSON.stringify(m,void 0,2);default:return""}}(n,o,u,p,g):"",[r,n,o,u,p,g]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{variant:"outlined",onClick:a,children:"Export"}),r&&(0,s.jsxs)(J.Z,{open:r,onClose:a,children:[(0,s.jsx)(U.Z,{children:"Export Dictionary"}),(0,s.jsx)(C.Z,{"aria-label":"close export menu",onClick:a,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsx)(G.Z,{sx:{p:1},children:(0,s.jsxs)(y.Z,{spacing:1,children:[(0,s.jsx)(Z.Z,{size:"small",label:"Filename",value:m,onChange:e=>{x(e.target.value)}}),(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(X.Z,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,s.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:b,readOnly:!0})]})]})}),(0,s.jsxs)(ee.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(y.Z,{direction:"row",spacing:1,children:["json"!==o||"full"!==p?(0,s.jsx)(Y.Z,{sx:{transform:"translate(0, -10px)"},control:(0,s.jsx)(Q.Z,{size:"small",checked:g,onChange:()=>j(!g)}),label:(0,s.jsx)(F.Z,{variant:"caption",children:"Senses"}),labelPlacement:"top"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(D.Z,{id:"export_format",children:"Format"}),(0,s.jsxs)(L.Z,{labelId:"export_format",label:"Format",size:"small",value:o,onChange:e=>{d(e.target.value)},children:[(0,s.jsx)(W.Z,{value:"dic",children:"DIC"}),(0,s.jsx)(W.Z,{value:"json",children:"JSON"}),(0,s.jsx)(W.Z,{value:"tabular",children:"Tabular"})]})]}),"tabular"===o?(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(D.Z,{id:"export_separator",children:"Type"}),(0,s.jsxs)(L.Z,{labelId:"export_separator",label:"Type",size:"small",value:u,onChange:e=>{h(e.target.value)},children:[(0,s.jsx)(W.Z,{value:"csv",children:"CSV"}),(0,s.jsx)(W.Z,{value:"tsv",children:"TSV"}),(0,s.jsx)(W.Z,{value:"dat",children:"DAT"})]})]}):(0,s.jsx)(s.Fragment,{})," ","json"===o?(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(D.Z,{id:"export_json_type",children:"Type"}),(0,s.jsxs)(L.Z,{labelId:"export_json_type",label:"Type",size:"small",value:p,onChange:e=>{f(e.target.value)},children:[(0,s.jsx)(W.Z,{value:"weighted",children:"Weighted"}),(0,s.jsx)(W.Z,{value:"unweighted",children:"Unweighted"}),(0,s.jsx)(W.Z,{value:"full",children:"Full"})]})]}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsx)(w.Z,{variant:"contained",onClick:()=>{if(m&&b){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([b],{type:"text/plain"}))),e.setAttribute("download",m.replace(ex,"")+"."+("tabular"===o?u:o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var ef=n(87470),eg=n(60460),ej=n(64817);function ey(){let e=(0,l.useContext)(c.J6),[t,n]=(0,l.useState)(!1),r=()=>n(!t),[i,a]=(0,l.useState)(""),o=(0,l.useContext)(c.Hm),d=(0,l.useContext)(c.SZ),u=(0,l.useContext)(c._r),h=(0,l.useContext)(c.EN),[m,x]=(0,l.useState)(""),p=()=>{m&&-1===d.indexOf(m)&&(u({type:"add",cat:m}),x(""))},f=(0,l.useMemo)(()=>d.map(e=>(0,s.jsx)(N.ZP,{disablePadding:!0,disableGutters:!0,secondaryAction:(0,s.jsx)(C.Z,{"aria-label":"delete category",sx:{opacity:.5},onClick:()=>{h({type:"remove_category",name:e}),u({type:"remove",cat:e})},children:(0,s.jsx)(S.Z,{})}),children:(0,s.jsx)(z.Z,{dense:!0,onClick:()=>a(e),children:(0,s.jsx)(P.Z,{primary:e})})},e)),[d,h,u]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.Z,{direction:"row",children:[(0,s.jsx)(C.Z,{onClick:r,"aria-label":"open dictionary menu",children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)(F.Z,{sx:{display:{sm:"block",xs:"none"},fontSize:{md:"1.2em",sm:".8em"},maxWidth:{md:"285px",sm:"150px"},overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center"},noWrap:!0,children:e.selected})]}),(0,s.jsx)(M.ZP,{anchor:"left",open:t,onClose:r,children:(0,s.jsxs)(I.Z,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(A.Z,{title:(0,s.jsx)(F.Z,{fontWeight:"bold",children:"Dictionary Menu"}),action:(0,s.jsx)(C.Z,{onClick:r,"aria-label":"close dictionary menu",className:"close-button",children:(0,s.jsx)(O.Z,{})})}),(0,s.jsxs)(y.Z,{direction:"row",sx:{mb:2},children:[(0,s.jsxs)(T.Z,{fullWidth:!0,children:[(0,s.jsx)(D.Z,{id:"dictionary_select",children:"Current"}),(0,s.jsx)(L.Z,{labelId:"dictionary_select",label:"Current",size:"small",value:e.selected,onChange:e=>{o({type:"set",name:e.target.value})},children:e.dictionary_names.map(e=>(0,s.jsx)(W.Z,{value:e,children:e},e))})]}),(0,s.jsx)(em,{})]}),(0,s.jsx)(R.Z,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,s.jsxs)(y.Z,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,s.jsxs)(I.Z,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(A.Z,{title:(0,s.jsx)(F.Z,{fontWeight:"bold",children:"Categories"}),sx:{pb:0}}),(0,s.jsx)(R.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(q.Z,{dense:!0,children:f})}),(0,s.jsx)(K.Z,{children:(0,s.jsxs)(y.Z,{direction:"row",children:[(0,s.jsx)(Z.Z,{label:"New Category Name",size:"small",value:m,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,s.jsx)(w.Z,{variant:"contained",onClick:p,children:"Add"})]})})]}),(0,s.jsx)(ef.A,{})]})}),(0,s.jsx)(K.Z,{children:(0,s.jsxs)(y.Z,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,s.jsx)(ep,{}),(0,s.jsx)(eg.I,{label:"Delete",message:"Delete the "+e.selected+" dictionary?",onConfirm:()=>{o({type:"delete",name:e.selected})}})]})})]})}),(0,s.jsx)(ej.Q,{category:i,onClose:()=>a("")})]})}var eb=n(87339),eZ=n(6850);function ev(e){let{terms:t,asTable:n,setAsTable:r,add:i}=e,[a,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[x,S]=(0,l.useState)(!1),[E,O]=(0,l.useState)([]),[N,z]=(0,l.useState)(!1),P=(0,l.useContext)(d.l0),{collapsedTerms:F}=(0,l.useContext)(o.IO),M=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:a:a;if(t){if(N){let e=t;try{e=new RegExp(e)}catch(e){}i(e,"regex")}else i(t,"fixed");O([]),u("")}},I=e=>{let t=e.target;if(t&&"value"in t&&"innerText"in t){let e=t["string"==typeof t.value?"value":"innerText"].toLowerCase();S((0,c.cl)(e)),u(e)}else u("")};return(0,s.jsx)(g.Z,{component:"nav",children:(0,s.jsxs)(j.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,s.jsx)(ey,{}),(0,s.jsxs)(y.Z,{direction:"row",sx:{width:{sm:"calc(min(500px, 50%))",xs:"100%"}},spacing:{md:1,sm:0},children:[(0,s.jsx)(b.Z,{options:E,value:a,onHighlightChange:(e,t)=>m(t||""),onKeyUp:e=>{if(("Enter"===e.code||"NumpadEnter"===e.code)&&(!h||h===a))return M(a);h!==a&&I(e)},onChange:I,renderInput:e=>(0,s.jsx)(Z.Z,{...e,size:"small",placeholder:"Term Search",value:a,onChange:e=>{I(e);let n=e.target.value;if(t){let e=[];if(n&&F){let t;try{t=RegExp(N?(0,_.OX)(n):_.AL.test(n)?(0,_.ZC)(n):";"+n.replace(_.mi,"\\%&")+"[^;]*;","g")}catch(e){t=RegExp(";"+n.replace(_.mi,"\\%&")+";","g")}(0,eb.gD)("",t,F,e,100)}O(e)}},color:x?"warning":"primary"}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,s.jsx)(v.Z,{title:"regular expression characters are "+(N?"active":"escaped"),children:(0,s.jsx)(C.Z,{"aria-label":"toggle regular expression",onClick:()=>z(!N),children:N?(0,s.jsx)(p.Z,{}):(0,s.jsx)(f.Z,{})})}),(0,s.jsx)(w.Z,{sx:{display:{sm:"block",xs:"none"}},variant:"outlined",disabled:!a,onClick:()=>{a&&(P({type:"add",state:{type:"term",value:a}}),x&&(0,eZ.l$)(a))},children:"View"}),(0,s.jsx)(w.Z,{variant:"contained",onClick:()=>M(),disabled:!a,children:"Add"})]}),(0,s.jsxs)(y.Z,{direction:"row",children:[(0,s.jsx)(w.Z,{variant:"outlined",sx:{width:{md:100,sm:70},p:{md:1,sm:0},display:{sm:"block",xs:"none"}},onClick:()=>r(!n),children:n?"Analyze":"Edit"}),(0,s.jsx)(k.T,{})]})]})})}function eC(){let e=(0,l.useContext)(c.C4),t=(0,l.useContext)(c.p3),n=(0,l.useContext)(c.dg),r=(0,l.useContext)(c.Hm),[i,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!0),u=!1,h=()=>{a(!1),x(""),n(""),!u&&e&&"coarse_sense_map"!==e&&r({type:"set",name:"default"}),t("")},[m,x]=(0,l.useState)(""),p=()=>{m&&(a(!1),t(m).then(()=>{u=!0,n(""),x("")}).catch(()=>{x(""),a(!0)}))};return(0,s.jsxs)(J.Z,{open:!!e,onClose:h,children:[(0,s.jsx)(U.Z,{children:"Encrypted Resource"}),(0,s.jsx)(C.Z,{"aria-label":"close export menu",onClick:h,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(O.Z,{})}),(0,s.jsxs)(G.Z,{sx:{p:1},children:[(0,s.jsxs)(F.Z,{sx:{mb:2},children:["The ",(0,s.jsx)("span",{className:"number",children:e})," resource is encrypted."]}),(0,s.jsx)(Z.Z,{fullWidth:!0,label:"Password",size:"small",type:o?"password":"text",value:m,error:i,onKeyDown:e=>{("Enter"===e.code||"NumpadEnter"===e.code)&&p()},onChange:e=>{x(e.target.value)}}),(0,s.jsx)(C.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>d(!o),children:o?(0,s.jsx)(B.Z,{}):(0,s.jsx)($.Z,{})})]}),(0,s.jsxs)(ee.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(w.Z,{onClick:h,children:"Cancel"}),(0,s.jsx)(w.Z,{variant:"contained",onClick:p,disabled:!m,children:"Decrypt"})]})]})}var ew=n(86917),e_=n(11929),ek=n(45133),eS=n(28443);let eE={type:"graph",layout:"force",size_by_value:!0,hide_zeros:!1,label_threshold:0,repulsion:100,gravity:.1,edge_length:40},eO={include_fuzzy:!1,dense:!1,min_sim:.001};function eN(e,t){let n={...e};return e[t.key],n[t.key]=t.value,n}function ez(){let e=(0,l.useContext)(c.Z7),t=(0,l.useContext)(c.SZ),n=(0,l.useMemo)(()=>{let e=[...t];return e.includes("no categories")||e.push("no categories"),e},[t]),[r,i]=(0,l.useReducer)(eN,eE),[a,o]=(0,l.useReducer)(eN,eO),[d,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{u(d.filter(e=>n.includes(e)))},[n]);let{allTerms:h,catCounts:x}=(0,l.useMemo)(()=>{let t={},n=new Map(Object.keys(e).map(n=>{let s=Object.keys(e[n].categories);return(s.length?s:["no categories"]).forEach(e=>{e in t?t[e]++:t[e]=1}),[e[n].term||n,e[n]]}));return{catCounts:t,allTerms:n}},[e]);return(0,s.jsxs)(y.Z,{direction:"row",sx:{height:"100%"},children:[(0,s.jsx)(m.Z,{sx:{height:"100%",minWidth:"250px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,s.jsxs)(m.Z,{sx:{pl:1,pr:1,height:"100%",display:"flex",flexDirection:"column"},children:[(0,s.jsxs)(m.Z,{sx:{overflowY:"auto"},children:[(0,s.jsx)(F.Z,{variant:"h6",children:"Terms"}),(0,s.jsx)(q.Z,{dense:!0,sx:{overflowY:"auto",overflowX:"hidden",maxHeight:"300px",p:0},children:Object.keys(x).map(e=>(0,s.jsx)(N.ZP,{disablePadding:!0,disableGutters:!0,children:(0,s.jsxs)(z.Z,{disableGutters:!0,"aria-label":"toggle category",onClick:()=>{let t=[...d],n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),u(t)},children:[(0,s.jsx)(ew.Z,{sx:{minWidth:"35px"},children:(0,s.jsx)(e_.Z,{sx:{p:0},checked:d.includes(e)})}),(0,s.jsx)(P.Z,{sx:{m:0},primary:e,secondary:x[e]+" terms"})]})},e))}),(0,s.jsxs)(j.Z,{sx:{justifyContent:"space-between"},variant:"dense",disableGutters:!0,children:[(0,s.jsxs)(y.Z,{direction:"row",children:[(0,s.jsx)(w.Z,{size:"small",sx:{minWidth:"1px"},onClick:()=>{u([...n])},children:"All"}),(0,s.jsx)(w.Z,{size:"small",sx:{minWidth:"1px"},onClick:()=>{u([])},children:"None"})]}),(0,s.jsx)(F.Z,{sx:{pr:1,whiteSpace:"nowrap"},children:d.length+" / "+n.length+" selected"})]}),(0,s.jsxs)(y.Z,{spacing:2,children:[(0,s.jsx)(v.Z,{title:"Include all matches to fuzzy terms in the comparison.",placement:"right",children:(0,s.jsx)(Y.Z,{label:"Fuzzy Matches",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{size:"small",checked:a.include_fuzzy,onChange:()=>o({key:"include_fuzzy",value:!a.include_fuzzy})})})}),(0,s.jsx)(v.Z,{title:"Include second-order term relationships in similarity calculations, resulting in a denser network.",placement:"right",children:(0,s.jsx)(Y.Z,{label:"Secondary Connections",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{size:"small",checked:a.dense,onChange:()=>o({key:"dense",value:!a.dense})})})}),(0,s.jsx)(v.Z,{title:"Will consider nodes with similarity equal to or less than this as unconnected.",placement:"right",children:(0,s.jsx)(Z.Z,{value:a.min_sim,type:"number",size:"small",label:"Similarity Threshold",onChange:e=>o({key:"min_sim",value:e.target.value})})})]})]}),(0,s.jsxs)(m.Z,{sx:{overflowY:"auto"},children:[(0,s.jsx)(F.Z,{variant:"h6",sx:{mt:2},children:"Plot Options"}),(0,s.jsxs)(y.Z,{spacing:2,children:[(0,s.jsx)(Y.Z,{label:"Hide Zeros",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{size:"small",checked:r.hide_zeros,onChange:()=>i({key:"hide_zeros",value:!r.hide_zeros})})}),(0,s.jsx)(Y.Z,{label:"Size By Value",labelPlacement:"start",control:(0,s.jsx)(Q.Z,{size:"small",checked:r.size_by_value,onChange:()=>i({key:"size_by_value",value:!r.size_by_value})})}),(0,s.jsx)(v.Z,{title:"Will not show labels for nodes with values lower than this.",placement:"right",children:(0,s.jsx)(Z.Z,{value:r.label_threshold,type:"number",size:"small",label:"Label Threshold",onChange:e=>i({key:"label_threshold",value:e.target.value})})}),"graph"===r.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(T.Z,{fullWidth:!0,children:[(0,s.jsx)(D.Z,{id:"graph_layout_select",children:"Layout"}),(0,s.jsxs)(L.Z,{labelId:"graph_layout_select",label:"Layout",size:"small",value:r.layout||"force",onChange:e=>{i({key:"layout",value:e.target.value})},children:[(0,s.jsx)(ek.Z,{children:"Canvas"}),(0,s.jsx)(W.Z,{value:"none",children:"Random"}),(0,s.jsx)(W.Z,{value:"circular",children:"Circular"}),(0,s.jsx)(W.Z,{value:"force",children:"Force"}),(0,s.jsx)(ek.Z,{children:"WebGL"}),(0,s.jsx)(W.Z,{value:"forceAtlas2",children:"ForceAtlas2"})]})]}),"force"===r.layout?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{title:"Repulsion factor between nodes.",placement:"right",children:(0,s.jsx)(Z.Z,{value:r.repulsion,type:"number",size:"small",label:"Repulsion",onChange:e=>i({key:"repulsion",value:e.target.value})})}),(0,s.jsx)(v.Z,{title:"Nodes' strength of attraction to the center.",placement:"right",children:(0,s.jsx)(Z.Z,{value:r.gravity,type:"number",size:"small",label:"Gravity",onChange:e=>i({key:"gravity",value:e.target.value})})}),(0,s.jsx)(v.Z,{title:"Base distance between nodes.",placement:"right",children:(0,s.jsx)(Z.Z,{value:r.edge_length,type:"number",size:"small",label:"Edge Length",onChange:e=>i({key:"edge_length",value:e.target.value})})})]}):(0,s.jsx)(s.Fragment,{})]}):(0,s.jsx)(s.Fragment,{})]})]})]})}),(0,s.jsx)(eS.Z,{allTerms:h,catCounts:x,selectedCategories:d,options:a,plotOptions:r})]})}let eP=/^category_/;function eF(){let[e,t]=(0,l.useState)(!0),n=(0,l.useContext)(c.Z7),r=(0,l.useContext)(c.SZ),{terms:i}=(0,l.useContext)(o.IO),a=(0,l.useContext)(c.EN),p=(0,l.useCallback)((e,t)=>{let{field:n,row:s}=t,{processed:r,dictEntry:i}=s,l="from_term_editor"===n;if(n&&(l||n.startsWith("category_"))){let t={...i.categories},o=l?s.id:n.replace(eP,"");o in t&&!e?delete t[o]:e&&(t[o]=e),a({type:"update",term_id:s[l?"term_id":"id"],term:r.term,term_type:r.term_type,categories:t,sense:i.sense})}},[a]),f=(0,l.useContext)(u.du),g=(0,l.useContext)(d.qm),j=f in n,y=(0,l.useContext)(c.J6),[b,Z]=(0,l.useState)(y.info_drawer_height||30),v=g.length?b:0;return(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(ev,{terms:i,asTable:e,setAsTable:t,add:(e,t)=>{a({type:"add",term:e,term_type:t})}}),(0,s.jsxs)(m.Z,{sx:{position:"absolute",top:0,left:0,bottom:0,right:(j?y.term_editor_width||200:0)+"px",mt:"3em",mb:v+"vh"},children:[e?(0,s.jsx)(x.Z,{editFromEvent:p}):(0,s.jsx)(ez,{}),j?(0,s.jsx)(u.iC,{categories:r,editor:p,width:y.term_editor_width||200}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(d.VZ,{height:b,setHeight:Z})]}),(0,s.jsx)(eC,{})]})}let eM=(0,r.Z)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}}),eI=-1;function eA(){window.dispatchEvent(new Event("resize"))}let eT=(e,t)=>{switch("reset"!==t.type&&e.length||(cancelAnimationFrame(eI),eI=requestAnimationFrame(eA)),t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function eD(){let[e,t]=(0,l.useReducer)(eT,[]),[n,r]=(0,l.useState)("");return(0,s.jsx)(l.StrictMode,{children:(0,s.jsxs)(i.Z,{theme:eM,children:[(0,s.jsx)(a.ZP,{}),(0,s.jsx)(o._B,{children:(0,s.jsx)(c.Nc,{children:(0,s.jsx)(d.qm.Provider,{value:e,children:(0,s.jsx)(d.l0.Provider,{value:e=>requestAnimationFrame(()=>t(e)),children:(0,s.jsx)(u.du.Provider,{value:n,children:(0,s.jsx)(u.Pq.Provider,{value:(e,t)=>{requestAnimationFrame(()=>{(n||t)&&e||(cancelAnimationFrame(eI),eI=requestAnimationFrame(eA)),(0,eZ.l$)(e),r(e)})},children:(0,s.jsx)(eF,{})})})})})})})]})})}},87339:function(e,t,n){"use strict";n.d(t,{Ao:function(){return x},fE:function(){return c},gD:function(){return o},tt:function(){return h}});var s=n(32261),r=n(56522),i=n(39169);let a={},l={};async function o(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=n[t.source[1]in n?t.source[1]:"all"];for(let n,o="";s.length<r&&(n=t.exec(a));)(o=n[0].replace(i.WR,""))&&(s.push(o),!e||o in l||(l[o]=e))}function c(e){return e in l?l[e]:""}function d(e,t,n){n.forEach((n,s)=>{e[s]=!0,t[s]=!0})}function u(e,t){try{return new RegExp(e,t)}catch(t){return e}}function h(e,t,n,s){let l="string"==typeof e&&n&&e in n,c=l&&n[e].term?n[e].term:e,m=l&&"regex"===n[e].type?"regex":"fixed",x=c+"_"+m;x in a||(a[x]=function(e,t){let n="string"==typeof e;if(n&&!i.ks.test(e))return function(e,t){let{terms:n,lemmas:s,termLookup:i,termAssociations:a,synsetInfo:l}=t,o={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&i&&i[e]||-1,lemma:[],related:[],synsets:[],synset_terms:[],lookup:{expanded:!1,map:new Map,any:{},lemma:{},lemma_map:new Map,lemma_related:{},lemma_synset:{},related:{},related_map:new Map,related_lemma:{},related_related:{},related_synset:{},synset:{},synset_map:new Map,synset_lemma:{},synset_related:{},synset_synset:{}}};if(a&&l&&s&&n&&-1!==o.index){o.recognized=!0;let t=a[o.index];o.related=t&&t[0]&&Array.isArray(t[0])?t[0].filter((e,t)=>!!t).map(e=>n[e-1]):[],o.synsets=t&&t[1]?(Array.isArray(t[1])?t[1]:[t[1]]).map(e=>l[e-1]):[];let i=new Set;o.synsets.forEach(e=>{(0,r.uz)(e,n,l).forEach(e=>{e!==o.term&&i.add(e)})}),o.synset_terms=Array.from(i);let c=n&&s&&e in s?s["number"==typeof s[e]?n[s[e]]:e]:[];o.lemma="number"==typeof c?[n[c]]:c.map(e=>n[e]),function(e){let{lemma:t,related:n,synset_terms:s,lookup:r}=e;t.forEach(e=>{r.any[e]=!0,r.lemma[e]=!0,r.lemma_map.set(e,!0)}),n.forEach(e=>{r.any[e]=!0,r.related[e]=!0,r.related_map.set(e,!0)}),s.forEach(e=>{r.any[e]=!0,r.synset[e]=!0,r.synset_map.set(e,!0)})}(o)}return o}(e,t);{let s=n?(0,i.ZC)(e):e.source,r={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:u(n?s:(0,i.OX)(s),"g"),matches:[]};return t.collapsedTerms&&o(r.term,r.regex,t.collapsedTerms,r.matches),r.recognized=!!r.matches.length,r}}("regex"===m?u(c):c,t));let p=a[x];return s&&"fixed"===p.type&&!p.lookup.expanded&&function(e,t){let n=e.lookup,s=n.any;e.lemma.forEach(e=>{let r=h(e,t).lookup;d(s,n.lemma_related,r.related_map),d(s,n.lemma_synset,r.synset_map)}),e.related.forEach(e=>{let r=h(e,t).lookup;d(s,n.related_lemma,r.lemma_map),d(s,n.related_related,r.related_map),d(s,n.related_synset,r.synset_map)}),e.synset_terms.forEach(e=>{let r=h(e,t).lookup;d(s,n.synset_lemma,r.lemma_map),d(s,n.synset_related,r.related_map),d(s,n.synset_synset,r.synset_map)}),n.expanded=!0,n.map=new Map(Object.keys(s).map(e=>[e,!0]))}(p,t),p}async function m(e,t,n,s,r){let a=h(n,r,s),l=s[n],o="fixed"===a.type?{processed:a,dictEntry:l,id:n,term:l.term||n,sense:l.sense,matches:a.recognized?1:0,ncats:Object.keys(l.categories).length,frequency:(0,i.O$)(a.index,r.terms&&r.terms.length).toFixed(2),senses:a.synsets.length,related:a.related.length}:{processed:a,dictEntry:l,id:n,term:l.term||n,sense:l.sense,matches:a.matches.length,ncats:Object.keys(l.categories).length};if(l.categories){let e=l.categories;Object.keys(e).forEach(t=>{o["category_"+t]=e[t]})}e[t]=o}async function x(e,t,n){return clearTimeout(s.V.dictionary),new Promise(r=>{let i=Object.freeze(Object.keys(e)),a=i.length,l=Array(a),o=0,c=0,d=()=>{for(clearTimeout(s.V.dictionary);o<a&&c<1e3;o++,c++)m(l,o,i[o],e,t);o!==a?(c=0,n&&n(o/a),s.V.dictionary=setTimeout(d,0)):(n&&n(1),r(l))};s.V.dictionary=setTimeout(d,0)})}},93853:function(e,t,n){"use strict";n.d(t,{D4:function(){return g},IO:function(){return f},_B:function(){return b}});var s=n(57437),r=n(11205),i=n(81115),a=n(88929),l=n(80511),o=n(32184),c=n(7547),d=n(86917),u=n(40468),h=n(2265),m=n(39169),x=n(77129),p=n(40340);let f=(0,h.createContext)({senseMap:{},senseMapOptions:{store:!0},SenseLookup:{},NLTKLookup:{},collapsedSenses:"",collapsedNLTK:""}),g=(0,h.createContext)((e,t,n)=>{}),j=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}],y=/[\s-]+/g;function b(e){let{children:t}=e,[n,b]=(0,h.useState)(),[Z,v]=(0,h.useState)(),[C,w]=(0,h.useState)(),[_,k]=(0,h.useState)(),[S,E]=(0,h.useState)(),[O,N]=(0,h.useState)(),[z,P]=(0,h.useState)(),[F,M]=(0,h.useState)({}),[I,A]=(0,h.useState)({store:!0}),[T,D]=(0,h.useState)({}),[L,W]=(0,h.useState)({}),[R,q]=(0,h.useState)(""),[K,B]=(0,h.useState)(""),[$,H]=(0,h.useState)(!0),[V,J]=(0,h.useState)(!0),[U,G]=(0,h.useState)(!0),[X,Y]=(0,h.useState)(!0);(0,h.useEffect)(()=>{(0,x.XR)("terms").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{b(Object.freeze(e.arr)),w(Object.freeze(e.obj)),k(Object.freeze(e.collapsed)),H(!1)}):fetch("/dictionary_builder/data/terms.txt").then(e=>e.text()).then(e=>{let t=Object.freeze(e.split(m.SP));b(t);let n={all:";;"+t.join(";;")+";;"},s={};t.forEach((e,t)=>{s[e]=t;let r=e[0];r&&(r in n?n[r]+=e+";;":n[r]=";;"+e+";;")}),w(Object.freeze(s)),k(Object.freeze(n)),(0,x.L$)("terms",{arr:t,obj:s,collapsed:n})}).finally(()=>H(!1))})},[H]),(0,h.useEffect)(()=>{(0,x.XR)("term_associations").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{E(e),J(!1)}):fetch("/dictionary_builder/data/term_associations.json").then(e=>e.json()).then(e=>{E(e),(0,x.L$)("term_associations",e)}).finally(()=>J(!1))})},[J]),(0,h.useEffect)(()=>{(0,x.XR)("sense_keys").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{N(Object.freeze(e)),G(!1)}):fetch("/dictionary_builder/data/sense_keys.txt").then(e=>e.text()).then(e=>{let t=e.split(m.SP);N(Object.freeze(t)),(0,x.L$)("sense_keys",t)}).finally(()=>G(!1))})},[G]),(0,h.useEffect)(()=>{(0,x.XR)("synset_info").then(e=>{e&&e.content?(0,p.L)(e.content).then(e=>{P(e),Y(!1)}):fetch("/dictionary_builder/data/synset_info.json").then(e=>e.json()).then(e=>{let t=e.map((e,t)=>(e.index=t,e));P(t),(0,x.L$)("synset_info",t)}).finally(()=>Y(!1))})},[Y]),(0,h.useEffect)(()=>{if(n&&S){let e={};S.forEach((t,s)=>{if(t.length){let r=t[0],i="number"==typeof r?r:r.length?r[0]:0;if(i){let t=n[s],r=n[i-1],a=e[r];a&&"function"!=typeof a?"number"==typeof a?e[r]=[i-1,a,s]:a.push(s):e[r]=[i-1,s],e[t]=i-1}}}),v(e)}},[n,S]),(0,h.useEffect)(()=>{if(n&&O&&z){let e={},t={};z.forEach((s,r)=>{if(e[O[r]]=r,s.sense_index&&s.members){let e=s.sense_index+"",i="number"==typeof s.members?s.members:s.members[0];if(i){let a=n[i-1].replace(y,"_")+"."+s.id.substring(s.id.length-1)+"."+(1===e.length?"0":"")+e;t[a]=r,s.nltk_id=a}}}),D(e),W(t),q(";;"+O.join(";;")+";;"),B(";;"+Object.keys(t).join(";;")+";;")}},[n,O,z]);let Q=(0,h.useMemo)(()=>({terms:n,lemmas:Z,termLookup:C,collapsedTerms:_,termAssociations:S,sense_keys:O,synsetInfo:z,senseMap:F,senseMapOptions:I,NLTKLookup:L,SenseLookup:T,collapsedSenses:R,collapsedNLTK:K}),[n,Z,C,_,S,O,z,F,I,L,T,R,K]),ee={terms:$,termAssociations:V,sense_keys:U,synsetInfo:X};return(0,s.jsx)(f.Provider,{value:Q,children:Z&&z?(0,s.jsx)(g.Provider,{value:(e,t,n)=>{M(e),t.store&&(0,x.po)("coarse_sense_map","",e,!0,n),t.rawMap&&(A(t),t.store&&(0,x.po)("coarse_sense_map","original_",t.rawMap,!0,n))},children:t}):(0,s.jsxs)(a.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,s.jsx)(l.Z,{variant:"h4",children:"Loading Resources..."}),(0,s.jsx)(o.Z,{children:j.map(e=>{let{key:t,label:n}=e;return(0,s.jsxs)(c.ZP,{dense:!0,children:[(0,s.jsx)(d.Z,{sx:{minWidth:"35px",mb:1},children:Q[t]?(0,s.jsx)(r.Z,{color:"success"}):ee[t]?(0,s.jsx)(u.Z,{size:"1.5rem"}):(0,s.jsx)(i.Z,{color:"error",sx:{marginBottom:-.8}})}),(0,s.jsxs)(l.Z,{children:[Q[t]||ee[t]?"":"Failed to load ",n]})]},t)})})]})})}},23471:function(e,t,n){"use strict";n.d(t,{T:function(){return ea},r:function(){return ei}});var s=n(57437),r=n(37642),i=n(19337),a=n(60335),l=n(58438),o=n(70270),c=n(27573),d=n(80511),u=n(94696),h=n(34990),m=n(88929),x=n(68038),p=n(78975),f=n(31655),g=n(91326),j=n(23983),y=n(82879),b=n(76548),Z=n(2265),v=n(54964),C=n(60460),w=n(77129),_=n(60692),k=n(83607),S=n(48024),E=n(61096),O=n(80824),N=n(66124),z=n(28549),P=n(67351),F=n(46849),M=n(11656),I=n(98784),A=n(93853);let T=(0,S.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),D=/^"|"$/g,L=/"*,"*/,W=/[\r\n]+/,R=/%/;function q(){let{sense_keys:e,SenseLookup:t,NLTKLookup:n}=(0,Z.useContext)(A.IO),[r,l]=(0,Z.useState)(!1),o=()=>l(!r),[c,u]=(0,Z.useState)(!0),[h,y]=(0,Z.useState)(!1),[v,C]=(0,Z.useState)([]),[w,S]=(0,Z.useState)([]),[q,K]=(0,Z.useState)(["",""]),[B,$]=(0,Z.useState)(!1),[H,V]=(0,Z.useState)([0,0,0]),[J,U]=(0,Z.useState)({}),[G,X]=(0,Z.useState)(""),[Y,Q]=(0,Z.useState)(!0),ee=(0,Z.useContext)(A.D4),et=()=>{C([]),S([]),X("")},en=(s,r,i)=>{let a=function(e,t,n){let s={};if(e&&-1!==t&&-1!==n)try{e.forEach(e=>{let r=e[t],i=e[n];if(r&&i&&i.length){if(r in s){let e=s[r];e.includes(i)||e.push(i)}else s[r]=[i]}})}catch(e){}return s}(s,r,i),l={},o=Object.keys(a);if(o.length&&e){let s=!R.test(o[0]);$(s);let r=s?n:t,i=new Set,c=0;o.forEach(t=>{let o=a[t];"string"==typeof o?i.add(o):o.forEach(e=>i.add(e)),t in r&&(c++,l[s?e[n[t]]:t]=o)}),V([o.length,c,i.size])}U(l)},es=e=>{if(e.length>1){let t=e.splice(0,1)[0].replace(D,"").split(L),n=e.map(e=>e.replace(D,"").split(L));S(Object.freeze(n)),C(t),t.length>1&&(K([t[0],t[1]]),en(n,0,1))}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined","aria-label":"import coarse sense map",onClick:o,children:"Import"}),(0,s.jsxs)(E.Z,{open:r,onClose:o,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],n=new FileReader;n.onload=()=>{es(n.result.split(W))},n.readAsText(t)}},children:[(0,s.jsx)(O.Z,{children:"Import Coarse Sense Mappings"}),(0,s.jsx)(a.Z,{"aria-label":"close coarse sense import menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsxs)(N.Z,{sx:{p:1,minWidth:"400px"},children:[w.length>1?(0,s.jsxs)(m.Z,{spacing:1,direction:"row",children:[(0,s.jsxs)(g.Z,{sx:{width:"50%"},children:[(0,s.jsx)(f.Z,{title:"Name of the column containing fine-grained sense labels (such as sense keys).",placement:"left",children:(0,s.jsxs)(z.Z,{fullWidth:!0,children:[(0,s.jsx)(P.Z,{id:"fine_sense_select",children:"Fine Senses"}),(0,s.jsx)(F.Z,{labelId:"fine_sense_select",label:"Fine Senses",size:"small",value:q[0],onChange:e=>{let t=e.target.value,n=[t,q[q[1]===t?0:1]];en(w,v.indexOf(n[0]),v.indexOf(n[1])),K(n)},children:v.map((e,t)=>(0,s.jsx)(M.Z,{value:e,children:e},e+t))})]})}),(0,s.jsxs)(d.Z,{sx:{pl:2},variant:"caption",children:[(0,s.jsxs)("span",{className:"number",children:[H[1]," "]}),"of",(0,s.jsxs)("span",{className:"number",children:[" ",H[0]," "]}),"recognized"]})]}),(0,s.jsxs)(g.Z,{sx:{width:"50%"},children:[(0,s.jsx)(f.Z,{title:"Name of the column containing coarse-grained sense labels (such as sense clusters).",placement:"right",children:(0,s.jsxs)(z.Z,{fullWidth:!0,children:[(0,s.jsx)(P.Z,{id:"coarse_sense_select",children:"Coarse Senses"}),(0,s.jsx)(F.Z,{labelId:"coarse_sense_select",label:"Coarse Senses",size:"small",value:q[1],onChange:e=>{let t=e.target.value,n=[q[q[0]===t?1:0],t];en(w,v.indexOf(n[0]),v.indexOf(n[1])),K(n)},children:v.map((e,t)=>(0,s.jsx)(M.Z,{value:e,children:e},e+t))})]})}),(0,s.jsxs)(d.Z,{sx:{pl:2},variant:"caption",children:[(0,s.jsxs)("span",{className:"number",children:[" ",H[2]," "]}),"unique labels"]})]})]}):(0,s.jsx)(d.Z,{sx:{p:2},children:"Select a CSV file with columns containing fine- and coarse-gained sense labels."}),(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsxs)(m.Z,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:[(0,s.jsx)(f.Z,{title:"Store the imported map locally.",placement:"top",children:(0,s.jsx)(x.Z,{label:"Store",labelPlacement:"start",control:(0,s.jsx)(p.Z,{checked:c,onChange:()=>u(!c)})})}),c?(0,s.jsx)(f.Z,{title:"Encrypt the sense map when being stored.",placement:"right",children:(0,s.jsx)(x.Z,{label:"Encrypt",labelPlacement:"start",control:(0,s.jsx)(p.Z,{checked:h,onChange:()=>y(!h)})})}):(0,s.jsx)(s.Fragment,{})]}),c&&h?(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(j.Z,{fullWidth:!0,size:"small",label:"Password",type:Y?"password":"text",value:G,onChange:e=>X(e.target.value)}),(0,s.jsx)(a.Z,{sx:{position:"absolute",right:15},"aria-label":"toggle password visibility",onClick:()=>Q(!Y),children:Y?(0,s.jsx)(_.Z,{}):(0,s.jsx)(k.Z,{})})]}):(0,s.jsx)(s.Fragment,{})]})]}),(0,s.jsxs)(I.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(m.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(f.Z,{title:"select a file to import a coarse sense map from",children:(0,s.jsxs)(b.Z,{variant:"outlined",component:"label",children:["File",(0,s.jsx)(T,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],n=new FileReader;n.onload=()=>{es(n.result.split(W)),e.target.value=""},n.readAsText(t)}}})]})}),(0,s.jsx)(f.Z,{title:"clear any loaded content",children:(0,s.jsx)(b.Z,{onClick:et,children:"clear"})})]}),(0,s.jsx)(b.Z,{variant:"contained",disabled:!!h&&!G,onClick:()=>{ee(J,{rawMap:{header:v,selectedCols:q,rows:w,NLTKLabels:B},store:c},G),et(),l(!1)},children:"Set"})]})]})]})}var K=n(22960),B=n(18409);function $(){let e=(0,K.Z)(),{senseMap:t,senseMapOptions:n,synsetInfo:r,sense_keys:l,SenseLookup:o,NLTKLookup:c}=(0,Z.useContext)(A.IO),u=n.rawMap,[h,f]=(0,Z.useState)(!1),g=()=>f(!h),[y,v]=(0,Z.useState)("coarse_sense_map"),[C,w]=(0,Z.useState)(!!u&&u.NLTKLabels),[_,k]=(0,Z.useState)(!!u),S=(0,Z.useMemo)(()=>{let e=[_&&u?u.header.join(","):'"fine_sense","coarse_sense"'],n=Object.keys(t);if(n.length&&l&&r){if(_&&u){let{header:s,selectedCols:i,rows:a,NLTKLabels:d}=u,h=s.indexOf(i[0]),m=s.indexOf(i[1]);if(-1!==h&&-1!==m){let i={};a.forEach(n=>{let s=d?l[c[n[h]]]:n[h],a=n[m];if(s in t&&-1!==t[s].indexOf(a)){let t=[...n];d&&!C?t[h]=l[c[n[h]]]:!d&&C&&s in o&&(t[h]=r[o[s]].nltk_id),e.push(t.join(",")),i[t[h]+a]=!0}}),n.forEach(n=>{let a=t[n];if(C&&n in o){let{nltk_id:e}=r[o[n]];n=e}let l=s.length;a.forEach(t=>{let s=n+t;if(n&&t&&!(s in i)){let s=Array(l);s[h]=n,s[m]=t,e.push(s.join(","))}})})}}else n.forEach(n=>{let s=t[n];if(C&&n in o){let{nltk_id:e}=r[o[n]];n=e}n&&s&&s.forEach(t=>e.push('"'+n+'","'+t+'"'))})}return e.length>1?e.join("\n"):""},[h,C,_]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined",onClick:g,children:"Export"}),h&&(0,s.jsxs)(E.Z,{open:h,onClose:g,children:[(0,s.jsx)(O.Z,{children:"Export Coarse Sense Map"}),(0,s.jsx)(a.Z,{"aria-label":"close export menu",onClick:g,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(j.Z,{size:"small",label:"Filename",value:y,onChange:e=>{v(e.target.value)}}),(0,s.jsxs)(z.Z,{children:[(0,s.jsx)(B.Z,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,s.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"35em",minHeight:"20em"},value:S,readOnly:!0})]})]})}),(0,s.jsxs)(I.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:C,onChange:()=>w(!C)}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"top"}),(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:_,onChange:()=>k(!_),disabled:!u}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"Match Import Format"}),labelPlacement:"top"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{if(y&&S){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([S],{type:"text/plain"}))),e.setAttribute("download",y+".csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}var H=n(71268),V=n(85140),J=n(63742),U=n(37263),G=n(88857),X=n(23269);function Y(e){let{coarseLabels:t,useNLTK:n}=e,[r,l]=(0,Z.useState)(!1),o=()=>l(!r),{senseMap:c,senseMapOptions:d}=(0,Z.useContext)(A.IO),u=(0,Z.useContext)(A.D4),[h,x]=(0,Z.useState)([]),[p,f]=(0,Z.useState)(""),[g,y]=(0,Z.useState)([]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{sx:{position:"absolute",left:16,bottom:16},onClick:o,children:"New Pairs"}),(0,s.jsxs)(E.Z,{open:r,onClose:o,children:[(0,s.jsx)(O.Z,{children:"Sense Mappings"}),(0,s.jsx)(a.Z,{"aria-label":"close sense map editor",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsxs)(N.Z,{sx:{p:1,minWidth:"500px"},children:[(0,s.jsx)(X.Z,{sx:{mb:1},children:"Define fine to coarse sense mappings:"}),(0,s.jsxs)(m.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(et,{selected:h,setSelected:x,multi:!0,useNLTK:n}),(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},multiple:!0,disableCloseOnSelect:!0,options:t,value:g,onChange:(e,t)=>y([...t]),renderTags:(e,t)=>e.map((e,n)=>(0,Z.createElement)(J.Z,{label:e,...t({index:n}),key:e})),inputValue:p,onInputChange:(e,t)=>f(t),renderInput:e=>(0,s.jsx)(j.Z,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})]})]}),(0,s.jsxs)(I.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(b.Z,{onClick:o,children:"Cancel"}),(0,s.jsx)(b.Z,{variant:"contained",onClick:()=>{let e={...c};h.forEach(t=>{if(t in c){let n=[...e[t]];g.forEach(e=>{n.includes(e)||n.push(e)}),e[t]=n}else e[t]=g}),u(e,{store:d.store}),x([]),y([]),o()},children:"Add"})]})]})]})}var Q=n(87339),ee=n(39169);function et(e){let{selected:t,setSelected:n,multi:r,useNLTK:i,editCell:a,params:l}=e,{synsetInfo:o,SenseLookup:c,collapsedSenses:u,NLTKLookup:h,collapsedNLTK:m}=(0,Z.useContext)(A.IO),[x,p]=(0,Z.useState)([]),[g,y]=(0,Z.useState)(""),b=i?h:c;return o?(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},multiple:r,autoSelect:!0,options:x,onKeyUp:e=>{let n=("value"in e.target?e.target.value:"").toLowerCase(),s=[];if(n){let e;try{e=RegExp(ee.AL.test(n)?(0,ee.ZC)(n):";"+n+"[^;]*;","g")}catch(t){e=RegExp(";"+n.replace(ee.mi,"\\%&")+";","g")}(0,Q.gD)("",e,{all:i?m:u},s,100)}t.forEach(e=>{s.includes(e)||s.push(e)}),p(s)},value:r?t:t[0],onChange:(e,t)=>{if(t){let e="string"==typeof t?[t]:[...t];a&&l&&a({...l,newValue:e}),n(e)}},renderTags:(e,t)=>e.map((e,n)=>(0,Z.createElement)(J.Z,{label:e,...t({index:n}),key:e})),renderInput:e=>(0,s.jsx)(j.Z,{...e,size:"small",label:"Fine Senses",value:g,onChange:e=>{t.includes(e.target.value)||y(e.target.value)}}),renderOption:(e,t)=>{if(t in b){delete e.key;let{definition:n}=o[(i?h:c)[t]];return(0,s.jsx)(M.Z,{value:t,...e,children:(0,s.jsx)(f.Z,{title:n,placement:"right",children:(0,s.jsx)(d.Z,{sx:{width:"100%"},children:t})})},t)}},noOptionsText:"No matches",filterSelectedOptions:!0,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0}):(0,s.jsx)(s.Fragment,{})}function en(e,t){let n=e.split("||"),s=n[0],r={...t},i=r[s];return 1===i.length?delete r[s]:(i.splice(+n[2],1),r[s]=[...i]),{newMap:r,fine:n[0],coarse:n[1],index:n[2]}}function es(e){let{params:t,labels:n,senseMap:r,senseMapStore:i,updateSenseMap:a}=e,[l,o]=(0,Z.useState)("");return(0,s.jsx)(V.Z,{componentsProps:{popper:{className:"synset-select"}},disableCloseOnSelect:!0,options:n,value:t.value,onChange:(e,n)=>{let{newMap:s,fine:l}=en(t.id,r);l in s?s[l].push(n):s[l]=[n],a(s,{store:i}),t.api.setEditCellValue({...t,value:n})},inputValue:l,onInputChange:(e,t)=>o(t),renderInput:e=>(0,s.jsx)(j.Z,{...e,size:"small",label:"Coarse Senses"}),filterSelectedOptions:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0})}function er(){let[e,t]=(0,Z.useState)(!1),n=()=>t(!e),{senseMap:r,senseMapOptions:l,synsetInfo:o,SenseLookup:c}=(0,Z.useContext)(A.IO),u={store:l.store},h=(0,Z.useContext)(A.D4),f=(0,Z.useMemo)(()=>{let e=new Set;return Object.values(r).forEach(t=>t.forEach(t=>t&&e.add(t))),Object.freeze(Array.from(e))},[r]),[g,j]=(0,Z.useState)(!1),y=(0,Z.useMemo)(()=>[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsx)(a.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{let{newMap:t}=en(e.id,r);h(t,u)},children:(0,s.jsx)(H.Z,{sx:{fontSize:".9em"}})})},{field:"fine",headerName:"Fine",width:180,hideable:!1,editable:!0,renderEditCell:e=>(0,s.jsx)(et,{selected:[e.value],setSelected:t=>{let{newMap:n,coarse:s}=en(e.id,r),i=t[0];i in n?n[i].push(s):n[i]=[s],h(n,u)},multi:!1,useNLTK:g,editCell:e.api.setEditCellValue,params:e})},{field:"coarse",headerName:"Coarse",width:125,hideable:!1,editable:!0,renderEditCell:e=>(0,s.jsx)(es,{params:e,labels:f,senseMap:r,senseMapStore:l.store,updateSenseMap:h})},{field:"definition",headerName:"Fine Definition",width:210}],[r]),v=(0,Z.useMemo)(()=>{let e=[];return o&&Object.keys(r).forEach((t,n)=>{let s=r[t],i=o[c[t]];s.forEach(s=>{e.push({id:t+"||"+s+"||"+n,fine:g?i.nltk_id:t,definition:i.definition,coarse:s,info:i})})}),e},[r,o,g]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{variant:"outlined","aria-label":"edit coarse sense map",onClick:n,children:"Edit"}),(0,s.jsxs)(E.Z,{open:e,onClose:n,children:[(0,s.jsx)(O.Z,{children:"Sense Map Editor"}),(0,s.jsx)(a.Z,{"aria-label":"close sense map editor",onClick:n,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(m.Z,{sx:{height:"500px"},spacing:1,children:[(0,s.jsx)(x.Z,{control:(0,s.jsx)(p.Z,{size:"small",checked:g,onChange:()=>j(!g)}),label:(0,s.jsx)(d.Z,{variant:"caption",children:"NLTK-Style Labels"}),labelPlacement:"start"}),(0,s.jsx)(U._$,{className:"datagrid-vertical",rows:v,columns:y,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnSelector:!0,pageSizeOptions:[100],density:"compact",editMode:"row",slots:{toolbar:G.T}}),(0,s.jsx)(Y,{coarseLabels:f,useNLTK:g})]})})]})]})}function ei(){let e=localStorage.getItem("dictionary_builder_settings"),t=e?JSON.parse(e):{dictionary_names:["default"],selected:"default",use_db:!0};return t.dictionary_names||(t.dictionary_names=["default"]),t.selected&&t.dictionary_names.includes(t.selected)||(t.selected="default"),"use_db"in t||(t.use_db=!0),t}function ea(){let e=(0,Z.useContext)(v.uj),t=(0,Z.useContext)(v.J6),n=(0,Z.useContext)(A.D4),{senseMap:_,senseMapOptions:k}=(0,Z.useContext)(A.IO),[S,E]=(0,Z.useState)(!1),O=()=>E(!S),N=(0,Z.useContext)(v.v$),[z,P]=(0,Z.useState)(t.undo||"z"),[F,M]=(0,Z.useState)(t.redo||"x"),[I,T]=(0,Z.useState)(!!t.disable_storage),[D,L]=(0,Z.useState)(!!t.use_db),W={undo:P,redo:M},R=(0,Z.useCallback)(e=>{if((e.ctrlKey||e.metaKey)&&(!e.target||!("tagName"in e.target)||"INPUT"!==e.target.tagName))switch(e.key){case F:N(-1);break;case z:N(1)}},[z,F,N]);(0,Z.useEffect)(()=>(window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}),[R]);let K=n=>{let s=n.target.name;if(s&&s in W){let r=n.target.value;window.removeEventListener("keydown",R),t[s]=r,W[s](r),e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t))}},B=Object.keys(_).length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{onClick:O,"aria-label":"toggle settings menu",children:(0,s.jsx)(r.Z,{})}),(0,s.jsx)(l.ZP,{anchor:"right",open:S,onClose:O,children:(0,s.jsxs)(o.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(c.Z,{title:(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Settings"}),action:(0,s.jsx)(a.Z,{onClick:O,"aria-label":"close settings menu",className:"close-button",children:(0,s.jsx)(i.Z,{})}),sx:{p:1}}),(0,s.jsxs)(u.Z,{sx:{alignContent:"left",mb:"auto",p:0,overflowY:"auto","& .MuiPaper-root":{ml:.5,mr:.5,mb:1,p:.5}},children:[(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Storage"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(x.Z,{label:"Disable","aria-label":"disable storage",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,s.jsx)(p.Z,{checked:I,size:"small",onChange:n=>{t.disable_storage=!I,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),T(!I)}})}),I?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(f.Z,{title:"IndexedDB can store larger dictionaries, but it may be a bit slower.",children:(0,s.jsx)(x.Z,{label:"IndexedDB",labelPlacement:"start",sx:{justifyContent:"space-between"},control:(0,s.jsx)(p.Z,{checked:D,size:"small",onChange:n=>{t.use_db=!D,e({...t}),localStorage.setItem("dictionary_builder_settings",JSON.stringify(t)),L(!D)}})})})]})}),(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Keybinds"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(d.Z,{variant:"caption",children:"CTRL + "}),(0,s.jsxs)(m.Z,{spacing:2,children:[(0,s.jsx)(j.Z,{size:"small",label:"Undo",name:"undo",value:z,onChange:K}),(0,s.jsx)(j.Z,{size:"small",label:"Redo",name:"redo",value:F,onChange:K})]})]})}),(0,s.jsx)(d.Z,{fontWeight:"bold",children:"Coarse Senses"}),(0,s.jsx)(h.Z,{elevation:3,children:(0,s.jsxs)(m.Z,{spacing:1,children:[(0,s.jsx)(q,{}),(0,s.jsx)(er,{}),B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Z,{children:["Mapped senses: ",(0,s.jsxs)("span",{className:"number",children:[B," "]})]}),(0,s.jsx)($,{}),(0,s.jsx)(C.I,{label:"Remove",message:"The stored coarse sense map will be deleted.",onConfirm:()=>{(0,w.Li)("coarse_sense_map",""),(0,w.Li)("coarse_sense_map","original_"),n({},{store:k.store})}})]}):(0,s.jsx)(s.Fragment,{})]})})]}),(0,s.jsx)(y.Z,{children:(0,s.jsxs)(m.Z,{spacing:2,children:[(0,s.jsx)(b.Z,{variant:"contained",color:"warning",onClick:()=>{indexedDB.deleteDatabase("dictionary_builder_resources"),location.reload()},children:"Refresh Resources"}),(0,s.jsx)(C.I,{label:"Clear Storage",message:"Clearing storage will delete all settings, dictionaries, and edit history.",onConfirm:()=>{t.dictionary_names&&t.dictionary_names.forEach(e=>{(0,w.Li)(e,"dict_"),(0,w.Li)(e,"dict_history_")}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()}})]})})]})})]})}},77129:function(e,t,n){"use strict";n.d(t,{c:function(){return v},x0:function(){return w},td:function(){return Z},XR:function(){return m},Vt:function(){return _},Li:function(){return p},GM:function(){return C},L$:function(){return x},po:function(){return f}});let s={resources:5,building:1,coarse_sense_map:1};function r(e){return new Promise(t=>{let n=indexedDB.open("dictionary_builder_"+e,s[e]);n.onupgradeneeded=()=>{let t=n.result;t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e,{keyPath:"name"})},n.onsuccess=()=>{t(n.result)}})}let i={setItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).put(e);r.onerror=t=>{throw Error("failed to store item "+e.name)},r.onsuccess=()=>s(!0)}else throw Error})},getItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readonly",{durability:"relaxed"}).objectStore(t).get(e);r.onerror=()=>s(null),r.onsuccess=()=>{s(r.result)}}else s(null)})},removeItem:async function(e,t){let n=await r(t);return new Promise(s=>{if(n){let r=n.transaction([t],"readwrite",{durability:"relaxed"}).objectStore(t).delete(e);r.onerror=()=>s(!1),r.onsuccess=()=>s(!0)}else s(!1)})}};var a=n(40340);let l={},o=new TextEncoder;async function c(e,t,n){if(!(e in l)){let s=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);l[e]={salt:n,key:await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e6,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}return l[e]}async function d(e,t,n){let s=n?await c(e,n,crypto.getRandomValues(new Uint8Array(16))):l[e];if(s)try{let e=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:e},s.key,new Uint8Array(await (await (0,a.n)(t)).arrayBuffer()));return new Blob([e,s.salt,n])}catch(t){console.error("failed to encrypt "+e)}}function u(e){return new Promise(async t=>{t(await fetch("data:application/octet-stream;base64,"+e.substring(1)).then(e=>e.blob()))})}async function h(e,t,n){let s=await ("string"==typeof t?(await u(t)).arrayBuffer():t.arrayBuffer()),r=n?await c(e,n,new Uint8Array(s,12,16)):l[e];if(r)try{let e=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(s,0,12)},r.key,new Uint8Array(s,28));return(0,a.L)(new Blob([e]))}catch(e){}}async function m(e){return await i.getItem(e,"resources")}async function x(e,t){i.setItem({name:e,encrypted:!1,content:await (0,a.n)(t)},"resources")}async function p(e,t){delete l[e],i.removeItem(t+e,"coarse_sense_map"===e?e:"building"),localStorage.removeItem(t+e)}async function f(e,t,n,s,r){let o=!!r||e in l,c=await (o?d(e,n,r):(0,a.n)(n));if(c)try{s?i.setItem({name:t+e,encrypted:o,content:c},"coarse_sense_map"===e?e:"building"):localStorage.setItem(t+e,await new Promise(e=>{let t=new FileReader;t.readAsDataURL(c),t.onloadend=async()=>{e((o?"e":"c")+t.result.split(";base64,")[1])}}))}catch(t){console.error("failed to store "+e)}}let g=new Map,j={running:""};async function y(e,t,n,s,r,o){let c=t+e;if(!g.has(c)){g.set(c,[...arguments]);let t=e=>{g.delete(c),n(e);let t=g.keys().next();if(t.value){j.running=t.value;let e=g.get(t.value);e&&(g.delete(t.value),y.apply(void 0,e))}};if(1===g.size&&(j.running=c),c===j.running){let n="coarse_sense_map"===e?e:"building",d=s?await i.getItem(c,"coarse_sense_map"===c?c:n):localStorage.getItem(c);if(d||(d=s?localStorage.getItem(c):await i.getItem(c,n)),d){if("string"==typeof d&&("{"===d[0]||"c"===d[0]))t("{"===d[0]?JSON.parse(d):await (0,a.L)(await u(d)));else if("string"==typeof d||d.encrypted){let n="string"==typeof d?d:d.content;e in l?t(await h(e,n)):r(e,()=>async s=>{if(s){let r=await h(e,n,s);if(r)t(r);else throw g.delete(c),delete l[e],Error}else t()})}else t(await (0,a.L)(d.content))}else t(o)}}}let b={};async function Z(e,t,n,s){y(e,"dict_history_",e=>{e&&t(e)},s,n,{edits:[],position:-1})}function v(e){delete b[e]}function C(e,t,n,s){b[e]=t,f(e,"dict_",t,n,s)}async function w(e,t,n,s){e in b?t(b[e]):y(e,"dict_",n=>{n&&(b[e]=n,t(n))},s,n,{})}async function _(e,t){y("coarse_sense_map","original_",n=>{y("coarse_sense_map","",t=>t?e(t,{rawMap:n,store:!0}):void 0,!0,t,{})},!0,t,void 0)}},56522:function(e,t,n){"use strict";n.d(t,{Te:function(){return p},gA:function(){return Z},uz:function(){return g}});var s=n(57437),r=n(31655),i=n(80511),a=n(41665),l=n(91326),o=n(32184),c=n(88929),d=n(2265),u=n(93853),h=n(17872),m=n(53355),x=n(54964);function p(e){let{senseKey:t,info:n}=e,l=(0,d.useContext)(h.l0);return(0,s.jsx)(r.Z,{title:n.definition,placement:"right",children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(a.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer"},onClick:()=>l({type:"add",state:{type:"synset",value:t,info:n}}),children:t}),n.count&&(0,s.jsx)("span",{className:"number-annotation",children:" "+n.count})]})})}function f(e,t){return Array.isArray(e)?e.map(e=>t[e-1]):[t[e-1]]}function g(e,t,n){let s=new Set(f(e.members,t));return Object.keys(e).forEach(r=>{if("members"!==r&&"index"!==r){var i;(Array.isArray(i=e[r])?"number"==typeof i[0]?i.map(e=>n[e-1]):[]:"number"==typeof i?[n[i-1]]:[]).forEach(e=>{f(e.members,t).forEach(e=>s.add(e))})}}),Array.from(s)}function j(e){let{name:t,info:n}=e,r=n[t],a=(0,d.useContext)(x.Z7),c=(0,d.useContext)(x.EN),f=(0,d.useContext)(h.l0),{terms:g,sense_keys:j,synsetInfo:y}=(0,d.useContext)(u.IO);return g&&j&&y?(0,s.jsxs)(l.Z,{sx:{m:1},children:[(0,s.jsx)(i.Z,{variant:"h5",children:t}),(0,s.jsx)(o.Z,{children:"string"==typeof r?r:"members"===t?g&&(Array.isArray(r)?r.map(e=>(0,m.bj)(g[e-1],a,c,f)):(0,m.bj)(g[r-1],a,c,f)):Array.isArray(r)?r.map(e=>{let t=y[e-1];return(0,s.jsx)(p,{senseKey:j[e-1],info:t},e)}):(0,s.jsx)(p,{senseKey:j[r-1],info:y[r-1]})})]},t):(0,s.jsx)(s.Fragment,{})}let y={id:0,index:0,count:0,ili:0,definition:0,topic:0,csi_labels:0,wikidata:0,source:0,sense_index:0,nltk_id:0,babelnet:0},b={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function Z(e){let{info:t}=e,{sense_keys:n,senseMap:o}=(0,d.useContext)(u.IO),h=n?n[t.index]:"",m=h&&h in o?o[h]:t.csi_labels;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{variant:"h6",children:t.definition}),(0,s.jsxs)(c.Z,{direction:"row",spacing:2,children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID:"," ",(0,s.jsx)(a.Z,{href:"https://en-word.net/id/oewn-"+t.id,rel:"noreferrer",target:"_blank",children:t.id})]}),t.ili&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,s.jsx)("span",{className:"number",children:t.ili})]}),t.nltk_id&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Natural Language Toolkit ID: ",(0,s.jsx)("span",{className:"number",children:t.nltk_id})]}),t.babelnet&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["BabelNet ID:"," ",(0,s.jsx)(a.Z,{href:"https://babelnet.org/synset?lang=EN&id="+t.babelnet,rel:"noreferrer",target:"_blank",children:t.babelnet})]})]}),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,s.jsx)("span",{className:"number",children:b[t.id.substring(t.id.length-1)]})]}),(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,s.jsx)("span",{className:"number",children:t.topic})]}),m&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Coarse Labels: ",(0,s.jsx)("span",{className:"number",children:"string"==typeof m?m:m.join(", ")})]}),t.count&&(0,s.jsx)(r.Z,{title:"frequency within the combined SemCor and One Million Sense-Tagged Instances training data",children:(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["SemCor+OMSTI Count: ",(0,s.jsx)("span",{className:"number",children:t.count})]})})]}),(t.wikidata||t.source)&&(0,s.jsxs)(l.Z,{children:[t.source&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Source: ",(0,s.jsx)("span",{className:"number",children:t.source})]}),t.wikidata&&(0,s.jsxs)(i.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Wikidata:"," ",(0,s.jsx)(a.Z,{href:"https://www.wikidata.org/wiki/"+t.wikidata,rel:"noreferrer",target:"_blank",children:t.wikidata})]})]})]}),(0,s.jsx)(c.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in y)).map(e=>(0,s.jsx)(j,{name:e,info:t},e))})]})}},6850:function(e,t,n){"use strict";n.d(t,{iA:function(){return C},l$:function(){return Z}});var s=n(57437),r=n(88929),i=n(60335),a=n(11656),l=n(86917),o=n(47905),c=n(2265),d=n(86739),u=n(21662),h=n(57079),m=n(24834),x=n(87070),p=n(51744),f=n(37263),g=n(88857),j=n(5123),y=n(17671);let b={ref:void 0};function Z(e){if(b.ref&&b.ref.current){let t=b.ref.current.state.sorting.sortedRows.indexOf(e);b.ref.current.setPage(Math.floor(t/100)),b.ref.current.selectRow(e,!0,!0),requestAnimationFrame(()=>{b.ref&&b.ref.current&&b.ref.current.scrollToIndexes({rowIndex:t})})}}function v(e){let{count:t,page:n,onPageChange:a}=e,l=Math.ceil(t/100)-1,o=0===n,c=n===l;return(0,s.jsxs)(r.Z,{direction:"row",children:[(0,s.jsx)(i.Z,{"aria-label":"Go to first page",disabled:o,onClick:e=>a(e,0),children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to previous page",disabled:o,onClick:e=>a(e,n-1),children:(0,s.jsx)(u.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to next page",disabled:c,onClick:e=>a(e,n+1),children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)(i.Z,{"aria-label":"Go to last page",disabled:c,onClick:e=>a(e,l),children:(0,s.jsx)(m.Z,{})})]})}function C(e){let{rows:t,columns:n,isCategory:r,setEditCategory:i,editFromEvent:d}=e,u=(0,c.useContext)(y.Pq),h=(0,p.A)();return b.ref=h,(0,s.jsx)(f._$,{apiRef:h,className:"bottom-search",rows:t,columns:n,showCellVerticalBorder:!0,disableDensitySelector:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:g.T,columnMenu:e=>{let t=e.colDef.headerName;return r(t)?(0,s.jsx)(j.hh,{...e,slots:{columnMenuUserItem:()=>(0,s.jsxs)(a.Z,{onClick:()=>{i(t)},children:[(0,s.jsx)(l.Z,{children:(0,s.jsx)(x.Z,{fontSize:"small"})}),(0,s.jsx)(o.Z,{children:"Edit category"})]})},slotProps:{columnMenuIserItem:{displayOrder:15}}}):(0,s.jsx)(j.hh,{...e})}},slotProps:{pagination:{ActionsComponent:v}},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&d(0,e)},onRowClick:e=>{let{row:t}=e;u(t.id)}})}},53355:function(e,t,n){"use strict";n.d(t,{m7:function(){return V},IJ:function(){return H},m1:function(){return L},bj:function(){return B}});var s=n(57437),r=n(85140),i=n(11656),a=n(31655),l=n(80511),o=n(23983),c=n(16351),d=n(92674),u=n(86645),h=n(74691),m=n(87116),x=n(68884),p=n(60335),f=n(78),g=n(7547),j=n(86917),y=n(88929),b=n(91326),Z=n(32184),v=n(45133),C=n(76548),w=n(39169),_=n(2265),k=n(93853),S=n(54964),E=n(17872),O=n(56522);let N=/[aeiouy]$/;function z(e,t){let n,s;let r=new Set,i=(e=e.replace(w.mi,"\\$&")).length;try{n=i>3?RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?"+e+(N.test(e)?"*":"+")+"-?(?:'|ac|age|al|alize|ance|ancy|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|ence|ency|ent|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|n|nce|ness|ng|nt|or|on|ous|r|s|ship|st|t|th|ties|ty|ur|ward|wise|y|z)?(?:'|al|alize|alization|ate|ation|ble|d|ed|er|es|ility|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?;","g"):RegExp(";(?:de|un|re)?-?"+(i>2?e.replace(N,"[aeiouy]"):e)+"+-?(?:'|d|ed|er|en|ing|s|y)?;","g")}catch(e){}if(n)for(;s=n.exec(t);){let t=s[0];t&&t.length-1>i&&";"+e+";"!==t&&r.add(t.replace(w.WR,""))}return Array.from(r)}var P=n(87339),F=n(62900),M=n(17260),I=n(24439),A=n(20016),T=n(44228),D=n(36807);function L(e){let{id:t,field:n,processed:c,label:d,editCell:u}=e,h=(0,_.useContext)(S.Z7),m=(0,_.useContext)(S.EN),x=h[t||c.term],p=(0,_.useContext)(k.IO),{terms:f,senseMap:g,sense_keys:j,synsetInfo:y}=p,b=(e,t)=>{let n=e in g?g[e]:t.csi_labels;return"string"==typeof n?n:n[0]},Z=(0,_.useMemo)(()=>{if(!f||!j||!y||"fixed"!==c.type||!c.synsets.length)return[];{let e=(0,S.u_)(Object.keys(x.categories),h),t={};Object.keys(e).forEach(e=>{let n=(0,P.tt)(e,p,h,!0);n.lookup&&n.lookup.map.forEach((e,n)=>t[n]=!0)});let n={},s=c.synsets.map(s=>{let r=0;(0,O.uz)(s,f,y).forEach(n=>{n in e&&r++,n in t&&(r+=.01)}),s.count&&(r+=.001*s.count),s.csi_labels||(s.csi_labels="no category");let i=j[s.index],a=b(i,s);return a in n&&!(n[a]<r)||(n[a]=r),{key:i,score:r,synset:s}}),r=s.map(e=>{let{key:t,synset:n}=e;return b(t,n)}).sort();return s.sort((e,t)=>{let s=b(e.key,e.synset),i=n[s],a=-r.indexOf(s),l=b(t.key,t.synset);return 100*n[l]+-(.1*r.indexOf(l))+.01*t.score-(100*i+.1*a+.01*e.score)})}},[f,g,j,y,c,h,p,x]);return f&&j&&y&&"fixed"===c.type&&c.synsets.length?(0,s.jsx)(r.Z,{size:"small",componentsProps:{popper:{className:"synset-select"}},options:Z,value:x.sense,groupBy:e=>b(e.key,e.synset),getOptionLabel:e=>"string"==typeof e?e:e.key,renderOption:(e,t)=>{let{key:n,synset:r,score:o}=t;return delete e.key,(0,s.jsx)(i.Z,{value:n,...e,children:(0,s.jsx)(a.Z,{title:r.definition,placement:"right",children:(0,s.jsxs)(l.Z,{sx:{width:"100%"},children:[(0,s.jsx)("span",{className:"number-annotation",children:"("+o.toFixed(2)+") "}),j[r.index],r.count&&(0,s.jsx)("span",{className:"number-annotation",children:" "+r.count})]})})},n)},renderInput:e=>(0,s.jsx)(o.Z,{label:d,...e}),ListboxProps:{style:{cursor:"pointer"},onClick:e=>{let s=e.target;if("tagName"in s&&"innerText"in s&&"DIV"===s.tagName){let e=s.innerText;u&&u({id:t,field:n,value:e}),m({type:"update",term_id:t,term:c.term,term_type:c.term_type,sense:e})}}},onChange:(e,s)=>{let r=s&&"object"==typeof s&&s.key||"";u&&u({id:t,field:n,value:r}),m({type:"update",term_id:t,term:c.term,term_type:c.term_type,sense:r})},autoSelect:!0,blurOnSelect:!0,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}):(0,s.jsx)(o.Z,{size:"small",value:x.sense,onChange:e=>{u&&u({id:t,field:n,value:e.target.value}),m({type:"update",term_id:t,term:c.term,term_type:c.term_type,sense:e.target.value})},label:d})}let W=["Match","Frequency","Senses","Related","In Dictionary"],R={position:"absolute",fontSize:"1.5em",height:"1.2em",opacity:.4};function q(e){let{processed:t}=e,n=(0,_.useContext)(S.Z7),r=(0,_.useContext)(S.EN),i=(0,_.useContext)(k.IO),[a,o]=(0,_.useState)(0),[g,j]=(0,_.useState)(10),[y,b]=(0,_.useState)({column:"Frequency",asc:!1}),Z=(0,_.useMemo)(()=>[(0,s.jsx)(c.Z,{width:1},"term_action"),...W.map(e=>(0,s.jsxs)(c.Z,{width:"Match"===e?999:1,component:"th",align:"Match"===e?"left":"right",sx:{cursor:"pointer",pr:3},onClick:()=>{b(y.column===e&&y.asc?{column:"Frequency",asc:!1}:{column:e,asc:y.column===e})},children:[e,y.column===e?y.asc?(0,s.jsx)(F.Z,{sx:R}):(0,s.jsx)(M.Z,{sx:R}):(0,s.jsx)(s.Fragment,{})]},e))],[b,y]),v=t.matches.length,C=(0,_.useMemo)(()=>t.matches.map(e=>{let t=(0,P.tt)(e,i);return t.frequency=(0,w.O$)(t.index,i.terms&&i.terms.length),t.in_dict=t.term in n,t}),[t,i,n]);if(a>v/g)return o(0),(0,s.jsx)(s.Fragment,{});C.sort(function(e){let{column:t,asc:n}=e;switch(t){case"Match":return n?(e,t)=>e.term>t.term?-1:1:(e,t)=>t.term>e.term?-1:1;case"Frequency":return n?(e,t)=>(e.frequency||0)-(t.frequency||0):(e,t)=>(t.frequency||0)-(e.frequency||0);case"Senses":return n?(e,t)=>e.synsets.length-t.synsets.length:(e,t)=>t.synsets.length-e.synsets.length;case"Related":return n?(e,t)=>e.related.length-t.related.length:(e,t)=>t.related.length-e.related.length;case"In Dictionary":return n?(e,t)=>(e.in_dict||0)>(t.in_dict||0)?-1:1:(e,t)=>(t.in_dict||0)>(e.in_dict||0)?-1:1}}(y));let E=[];if(v)for(let e=a*g,t=Math.min(C.length,e+g);e<t;e++)E.push(C[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=z(e,";;"+t.matches.join(";;")+";;")}return v?(0,s.jsxs)(d.Z,{sx:{height:"100%",position:"relative"},children:[(0,s.jsxs)(u.Z,{stickyHeader:!0,size:"small",children:[(0,s.jsx)(h.Z,{children:(0,s.jsx)(m.Z,{children:Z})}),(0,s.jsx)(x.Z,{children:E.map((e,t)=>{let n=e.term;return(0,s.jsxs)(m.Z,{sx:{height:33},hover:!0,children:[(0,s.jsx)(c.Z,{sx:{p:0},children:e.in_dict?(0,s.jsx)(p.Z,{"aria-label":"remove",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{r({type:"remove",term_id:n})},children:(0,s.jsx)(I.Z,{})}):(0,s.jsx)(p.Z,{"aria-label":"add",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{r({type:"add",term_id:n,term:n,term_type:"fixed"})},children:(0,s.jsx)(A.Z,{})})}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(H,{term:n})}),(0,s.jsx)(c.Z,{align:"right",children:e.frequency&&e.frequency.toFixed(2)||"0.00"}),(0,s.jsx)(c.Z,{align:"right",children:e.synsets.length}),(0,s.jsx)(c.Z,{align:"right",children:e.related.length}),(0,s.jsx)(c.Z,{align:"right",children:e.in_dict?"yes":"no"})]},n+t)})})]}),(0,s.jsx)(f.Z,{sx:{width:"100%",bottom:"-1px",position:"sticky",backgroundColor:"#1e1e1e"},component:"div",rowsPerPageOptions:[10,20,50,100,1e3],count:v,rowsPerPage:g,page:a,onPageChange:(e,t)=>{o(t)},onRowsPerPageChange:e=>{j(parseInt(e.target.value)),o(0)}})]}):(0,s.jsx)(l.Z,{children:"No matches"})}let K={minWidth:"20px",opacity:.9,"& .MuiSvgIcon-root":{fontSize:"1em"}};function B(e,t,n,r){let i=(0,P.fE)(e),l=e in t,o=l&&t[e].term||e;return(0,s.jsxs)(g.ZP,{disableGutters:!0,disablePadding:!0,sx:{pr:3},secondaryAction:l?(0,s.jsx)(p.Z,{"aria-label":"remove",size:"small",edge:"end",sx:K,onClick:()=>{n({type:"remove",term_id:e})},children:(0,s.jsx)(I.Z,{})}):(0,s.jsx)(p.Z,{"aria-label":"add",size:"small",edge:"end",sx:K,onClick:()=>{n({type:"add",term_id:e,term:o,term_type:"fixed"})},children:(0,s.jsx)(A.Z,{})}),children:[(0,s.jsx)(j.Z,{sx:K,children:l?(0,s.jsx)(a.Z,{title:"in current dictionary",placement:"left",children:(0,s.jsx)(T.Z,{color:"success"})}):i&&i in t?(0,s.jsx)(a.Z,{title:"captured by "+i+" in current dictionary",placement:"left",children:(0,s.jsx)(p.Z,{sx:{p:0,"& .MuiSvgIcon-root":{fontSize:".7em"}},onClick:()=>{r({type:"add",state:{type:"term",value:i}})},children:(0,s.jsx)(D.Z,{color:"secondary"})})}):(0,s.jsx)(s.Fragment,{})}),(0,s.jsx)(H,{term:o})]},e)}function $(e){let{processed:t}=e,n={p:1,pl:0,maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},r=(0,_.useContext)(S.Z7),i=(0,_.useContext)(S.EN),o=(0,_.useContext)(E.l0),{terms:c,senseMap:d,termLookup:u,collapsedTerms:h,sense_keys:m}=(0,_.useContext)(k.IO),x=(0,_.useCallback)(u?(e,t)=>u[e]-u[t]:()=>0,[u]);t.forms||(t.forms=z(t.term,h?h.all:""),t.forms.sort(w.tO));let p={},f={};return t.synsets&&t.synsets.map(e=>{let t=m?m[e.index]:"",n=t in d?d[t]:e.csi_labels||"no category",s="string"==typeof n?n:n[0],r=e.count||0;s in p?(p[s].push(e),r>f[s]&&(f[s]=r)):(p[s]=[e],f[s]=r)}),(0,s.jsxs)(y.Z,{direction:"row",spacing:4,sx:{height:"100%"},children:[(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(a.Z,{title:"100 - index / n terms * 100; terms are loosely sorted by frequency and space coverage",children:(0,s.jsx)(l.Z,{children:"Relative Frequency"})}),(0,s.jsx)(b.Z,{sx:{p:1},children:(0,s.jsx)("span",{className:"number",children:(0,w.O$)(t.index,c&&c.length).toFixed(2)})})]}),c&&t.lemma.length?(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(l.Z,{children:"Lemmatizer"}),(0,s.jsx)(b.Z,{sx:n,children:(0,s.jsx)(Z.Z,{disablePadding:!0,sx:{p:0},children:t.lemma.filter(e=>e!==t.term).map(e=>B(e,r,i,o))})})]}):(0,s.jsx)(s.Fragment,{}),t.forms.length?(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(l.Z,{children:"Expansion"}),(0,s.jsx)(b.Z,{sx:n,children:(0,s.jsx)(Z.Z,{disablePadding:!0,sx:{p:0},children:t.forms.map(e=>B(e,r,i,o))})})]}):(0,s.jsx)(s.Fragment,{}),t.related.length?(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(l.Z,{children:"Related Terms"}),(0,s.jsx)(b.Z,{sx:n,children:(0,s.jsx)(Z.Z,{disablePadding:!0,sx:{p:0},children:t.related.map(e=>B(e,r,i,o))})})]}):(0,s.jsx)(s.Fragment,{}),m&&t.synsets.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(l.Z,{children:"Senses"}),(0,s.jsx)(b.Z,{sx:{...n,p:0},children:(0,s.jsx)(Z.Z,{subheader:(0,s.jsx)("li",{}),className:"term-sense-list",children:Object.keys(p).sort((e,t)=>f[t]-f[e]).map(e=>{let t=p[e];return(0,s.jsx)("li",{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)(v.Z,{children:e}),t.sort((e,t)=>(t.count||0)-(e.count||0)).map(e=>(0,s.jsx)(g.ZP,{disablePadding:!0,children:(0,s.jsx)(O.Te,{senseKey:m[e.index],info:e})},e.index))]})},e)})})})]}),t.synset_terms.length?(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(l.Z,{children:"Extended Synset Members"}),(0,s.jsx)(b.Z,{sx:n,children:(0,s.jsx)(Z.Z,{disablePadding:!0,sx:{p:0},children:t.synset_terms.sort(x).map(e=>B(e,r,i,o))})})]}):(0,s.jsx)(s.Fragment,{})]}):(0,s.jsx)(s.Fragment,{})]})}function H(e){let{term:t}=e,n=(0,_.useContext)(E.l0);return(0,s.jsx)(C.Z,{fullWidth:!0,variant:"text",sx:{p:0,justifyContent:"flex-start",textTransform:"none"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function V(e){let{term:t}=e,n=(0,_.useContext)(k.IO),r=(0,_.useContext)(S.Z7),i=(0,P.tt)(t,n,r);return"fixed"===i.type?(0,s.jsx)($,{processed:i}):(0,s.jsx)(q,{processed:i})}},17671:function(e,t,n){"use strict";n.d(t,{Pq:function(){return v},du:function(){return Z},iC:function(){return C}});var s=n(57437),r=n(91326),i=n(70270),a=n(27573),l=n(60335),o=n(80511),c=n(94696),d=n(88929),u=n(68038),h=n(78975),m=n(76548),x=n(19337),p=n(53355),f=n(2265),g=n(37263),j=n(54964),y=n(87339),b=n(93853);let Z=(0,f.createContext)(""),v=(0,f.createContext)((e,t)=>{});function C(e){let{categories:t,editor:n,width:C}=e,w=(0,f.useContext)(b.IO),_=(0,f.useContext)(j.Z7),k=(0,f.useContext)(Z),S=(0,f.useContext)(v),E=(0,f.useContext)(j.EN),[O,N]=(0,f.useState)(!1);if(!k||!(k in _))return(0,s.jsx)(s.Fragment,{});let z=(0,y.tt)(k,w,_),P=_[k],F=(0,f.useMemo)(()=>[{field:"id",headerName:"Name",width:108},{field:"from_term_editor",headerName:"Weight",width:65,editable:!0,hideable:!1,valueParser:(e,t)=>{let s=+e||"";return t&&n(s,t),s}}],[]),M=P.categories,I=[];return t.forEach(e=>{(O||e in M)&&I.push({id:e,term_id:k,from_term_editor:M[e]||"",dictEntry:P,processed:z})}),(0,s.jsx)(r.Z,{sx:{position:"absolute",top:0,right:"-"+C+"px",height:"100%",width:C+"px"},children:(0,s.jsxs)(i.Z,{sx:{height:"100%",pb:"1em"},elevation:1,children:[(0,s.jsx)(a.Z,{sx:{p:.5},action:(0,s.jsx)(l.Z,{"aria-label":"Close term editor",onClick:()=>S(""),className:"close-button",children:(0,s.jsx)(x.Z,{})}),title:(0,s.jsx)(o.Z,{sx:{whiteSpace:"nowrap","& .MuiButtonBase-root":{fontWeight:"bold",fontSize:"1.1em"}},children:(0,s.jsx)(p.IJ,{term:z.term})})}),(0,s.jsx)(c.Z,{sx:{p:.5,height:"100%"},children:(0,s.jsxs)(d.Z,{direction:"column",sx:{pb:1,pt:1,height:"100%",overflowY:"auto"},spacing:2,children:[(0,s.jsx)(p.m1,{label:"Sense",id:k,field:"",processed:z}),(0,s.jsxs)(d.Z,{direction:"column",spacing:1,sx:{height:"100%"},children:[(0,s.jsx)(o.Z,{fontWeight:"bold",children:"Category Weights"}),(0,s.jsx)(u.Z,{control:(0,s.jsx)(h.Z,{size:"small",checked:O,onChange:()=>N(!O)}),label:(0,s.jsx)(o.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,s.jsx)(g._$,{sx:{minHeight:"140px"},className:"bottom-search datagrid-vertical",rows:I,columns:F,disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",onCellKeyDown:(e,t)=>{if("Delete"===t.key||"Backspace"===t.key){let s=""+e.value,r="view"===e.cellMode?0:+s.substring(0,s.length-1);n(r,e),r||t.preventDefault()}}}),(0,s.jsx)(m.Z,{fullWidth:!0,variant:"contained",onClick:()=>{E({type:"add",term:P.term||k,term_type:P.type,sense:P.sense,categories:{...P.categories},added:P.added})},children:"Duplicate"})]})]})})]})})}}},function(e){e.O(0,[792,971,23,744],function(){return e(e.s=15223)}),_N_E=e.O()}]);