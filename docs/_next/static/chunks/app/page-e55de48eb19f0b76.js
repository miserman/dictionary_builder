(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{69:function(e,t,n){Promise.resolve().then(n.bind(n,5875))},5875:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tE}});var s=n(7437),r=n(8595),i=n(3948),a=n(3857),l=n(2265),o=n(8123),c=n(502),d=n(3457),x=n(3226),u=n(5266),h=n(9299),m=n(6882);let p=(0,l.createContext)({}),g=[{key:"terms",label:"Terms"},{key:"termAssociations",label:"Term Associations"},{key:"sense_keys",label:"Sense Keys"},{key:"synsetInfo",label:"Synset Info"}];function y(e){let{children:t}=e,[n,r]=(0,l.useState)(),[i,a]=(0,l.useState)(),[y,j]=(0,l.useState)(),[f,Z]=(0,l.useState)(),[v,b]=(0,l.useState)(),[C,_]=(0,l.useState)(),[w,k]=(0,l.useState)(!0),[S,E]=(0,l.useState)(!0),[O,N]=(0,l.useState)(!0),[z,P]=(0,l.useState)(!0);(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/terms.txt").then(e=>e.text()).then(e=>{let t=Object.freeze(e.split("\n"));r(t);let n={all:";;"+t.join(";;")+";;"},s={};t.forEach((e,t)=>{s[e]=t;let r=e[0];r&&(r in n?n[r]+=e+";;":n[r]=";;"+e+";;")}),a(Object.freeze(s)),j(Object.freeze(n))}).finally(()=>k(!1))},[w]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/term_associations.json").then(e=>e.json()).then(e=>{Z(e)}).finally(()=>E(!1))},[S]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/sense_keys.txt").then(e=>e.text()).then(e=>{b(Object.freeze(e.split("\n")))}).finally(()=>N(!1))},[O]),(0,l.useEffect)(()=>{fetch("/dictionary_builder/data/synset_info.json").then(e=>e.json()).then(e=>{_(e.map((e,t)=>(e.index=t,e)))}).finally(()=>P(!1))},[z]);let F={terms:n,termLookup:i,collapsedTerms:y,termAssociations:f,sense_keys:v,synsetInfo:C},I={terms:w,termAssociations:S,sense_keys:O,synsetInfo:z};return(0,s.jsx)(p.Provider,{value:F,children:f&&C?t:(0,s.jsxs)(d.Z,{sx:{margin:"auto",marginTop:10,maxWidth:350},children:[(0,s.jsx)(x.Z,{children:"Loading Resources..."}),(0,s.jsx)(u.Z,{children:g.map(e=>{let{key:t,label:n}=e;return(0,s.jsx)(h.ZP,{children:(0,s.jsxs)(x.Z,{children:[F[t]?(0,s.jsx)(o.Z,{color:"success"}):I[t]?(0,s.jsx)(m.Z,{size:"1.5rem"}):(0,s.jsx)(c.Z,{color:"error",sx:{marginBottom:-.8}}),F[t]||I[t]?"":"Failed to load ",n]})},t)})})]})})}var j=n(8457),f=n(4262),Z=n(2653),v=n(4111),b=n(5133),C=n(6114),_=n(8469),w=n(1975),k=n(8956),S=n(9050),E=n(9394),O=n(1797),N=n(6337),z=n(2834);function P(e){let{label:t,message:n,onConfirm:r}=e,[i,a]=(0,l.useState)(!1),o=()=>a(!i);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{fullWidth:!0,color:"error",onClick:o,children:t}),i&&(0,s.jsxs)(E.Z,{open:i,onClose:o,children:[(0,s.jsx)(O.Z,{children:"Confirm"}),(0,s.jsx)(Z.Z,{"aria-label":"close export menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(x.Z,{children:n})}),(0,s.jsxs)(z.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsx)(S.Z,{onClick:o,children:"Cancel"}),(0,s.jsx)(S.Z,{variant:"contained",color:"error",onClick:r,children:t})]})]})]})}let F="41vh",I="200px";function M(){return JSON.parse(localStorage.getItem("dictionary_builder_settings")||"{}")}function T(){let[e,t]=(0,l.useState)(!1),n=()=>t(!e),r=(0,l.useMemo)(M,[]),i=(0,l.useContext)(ey),[a,o]=(0,l.useState)(r.undo||"z"),[c,u]=(0,l.useState)(r.redo||"x"),h=(0,l.useCallback)(e=>{(e.ctrlKey||e.metaKey)&&(e.key===c?i(-1):e.key===a&&i(1))},[a,c,i]);return(0,l.useEffect)(()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}),[h]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{onClick:n,"aria-label":"toggle settings menu",children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(v.ZP,{anchor:"right",open:e,onClose:n,children:(0,s.jsxs)(b.Z,{sx:{height:"100%",width:"12em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(C.Z,{title:(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Settings"}),action:(0,s.jsx)(Z.Z,{onClick:n,"aria-label":"close settings menu",className:"close-button",children:(0,s.jsx)(f.Z,{})})}),(0,s.jsxs)(_.Z,{sx:{alignContent:"left",mb:"auto"},children:[(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Keybinds"}),(0,s.jsx)(x.Z,{variant:"caption",children:"CTRL + "}),(0,s.jsxs)(d.Z,{spacing:2,sx:{mt:1},children:[(0,s.jsx)(w.Z,{size:"small",label:"undo",value:a,onChange:e=>{window.removeEventListener("keydown",h),r.undo=e.target.value,localStorage.setItem("dictionary_builder_settings",JSON.stringify(r)),o(e.target.value)}}),(0,s.jsx)(w.Z,{size:"small",label:"redo",value:c,onChange:e=>{window.removeEventListener("keydown",h),r.redo=e.target.value,localStorage.setItem("dictionary_builder_settings",JSON.stringify(r)),u(e.target.value)}})]})]}),(0,s.jsx)(k.Z,{children:(0,s.jsx)(P,{label:"Clear Storage",message:"Clearing storage will delete all settings, dictionaries, and edit history.",onConfirm:()=>{let e=M();e.dictionary_names&&e.dictionary_names.forEach(e=>{localStorage.removeItem("dict_"+e),localStorage.removeItem("dict_history_"+e)}),localStorage.removeItem("dictionary_builder_settings"),window.location.reload()}})})]})})]})}var D=n(2502),A=n(8212),R=n(7154),W=n(9093),q=n(9657);function J(){let e=(0,l.useContext)(ep),t=(0,l.useContext)(eg),n=(0,l.useContext)(ey),r=(0,l.useMemo)(()=>e.edits.map((t,r)=>(0,s.jsx)(h.ZP,{sx:{p:0},children:(0,s.jsx)(D.Z,{sx:{borderLeft:e.position>=r?"2px solid #fff":""},onClick:()=>n(r-e.position),children:(0,s.jsx)(A.Z,{sx:{m:0},primary:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(x.Z,{children:[(0,s.jsx)("span",{style:{opacity:".75"},children:t.type+": "}),t.name]}),"edit_term"===t.type?(0,s.jsx)(x.Z,{className:"code",sx:{wordBreak:"break-all"},children:"categories"===t.value.field?t.value.edits.map(e=>e.category+": "+e.from+" -> "+e.to).join("\n"):t.value.field+": "+t.value.original+" -> "+t.value.new}):(0,s.jsx)(s.Fragment,{})]}),secondary:(0,s.jsx)(x.Z,{sx:{fontSize:".8em",opacity:.6},variant:"body2",children:t.time?new Date(t.time).toLocaleString():""})})})},r)),[e,n]);return(0,s.jsxs)(b.Z,{elevation:5,sx:{height:"60%",minHeight:"300px",position:"relative",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(C.Z,{title:(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Edit History"}),sx:{pb:0}}),(0,s.jsxs)(d.Z,{direction:"row",sx:{position:"absolute",top:8,right:8},children:[(0,s.jsx)(Z.Z,{onClick:()=>n(1),"aria-label":"undo",children:(0,s.jsx)(R.Z,{})}),(0,s.jsx)(Z.Z,{onClick:()=>n(-1),"aria-label":"redo",children:(0,s.jsx)(W.Z,{})}),(0,s.jsx)(Z.Z,{onClick:()=>n(-1e3),"aria-label":"jump to current",children:(0,s.jsx)(q.Z,{})})]}),(0,s.jsx)(_.Z,{sx:{p:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(u.Z,{sx:{overflowX:"hidden"},children:r})}),(0,s.jsx)(k.Z,{children:(0,s.jsx)(S.Z,{fullWidth:!0,onClick:()=>{t({type:"clear"})},children:"Clear"})})]})}let L=/\*/,K=/\*/g,$=/([\[\]\(\)*?^$.+])/g,B=/^;|;$/g,H=/([\[\]\(\)?^$.+])/g;function Y(e){return";"+e.replace(H,"\\$&").replace(K,"[^;]*")+";"}function V(e,t){return e.length-t.length}function U(e,t){return t&&-1!==e?(1-e/t)*100:0}let G=/\./g;function X(e){return";"+e.replace(G,"[^;]")+";"}let Q=/^.*[/\\]/;function ee(e){return e.replace(Q,"")}let et={},en={};async function es(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,i=n[t.source[1]in n?t.source[1]:"all"];for(let n,a="";s.length<r&&(n=t.exec(i));)(a=n[0].replace(B,""))&&(s.push(a),!e||a in en||(en[a]=e))}function er(e,t,n){return e in et||(et[e]=function(e,t){let n="string"==typeof e;if(n&&!L.test(e))return function(e,t){let{terms:n,termLookup:s,termAssociations:r,synsetInfo:i}=t,a={type:"fixed",term:e,term_type:"fixed",categories:{},recognized:!1,index:n&&s&&s[e]||-1,related:[],synsets:[]};if(r&&i&&n&&-1!==a.index){a.recognized=!0;let e=r[a.index];a.related=e&&e[0]?(Array.isArray(e[0])?e[0]:[e[0]]).map(e=>n[e-1]):[],a.synsets=e&&e[1]?(Array.isArray(e[1])?e[1]:[e[1]]).map(e=>i[e-1]):[]}return a}(e,t);{let s=n?Y(e):e.source,r={type:"fuzzy",term_type:n?"glob":"regex",term:n?e:e.source,categories:{},recognized:!1,regex:RegExp(n?s:X(s),"g"),matches:[]};return t.collapsedTerms&&es(r.term,r.regex,t.collapsedTerms,r.matches),r.recognized=!!r.matches.length,r}}(n&&e in n&&"regex"===n[e].type?new RegExp(e):e,t)),et[e]}async function ei(e,t,n,s,r){let i=er(n,r,s),a=s[n],l="fixed"===i.type?{processed:i,dictEntry:a,id:n,sense:a.sense,matches:i.recognized?1:0,frequency:U(i.index,r.terms&&r.terms.length).toFixed(2),senses:i.synsets.length,related:i.related.length}:{processed:i,dictEntry:a,id:n,sense:a.sense,matches:i.matches.length};if("fixed"===i.type&&!l.sense&&1===i.synsets.length&&r.sense_keys&&r.synsetInfo&&(l.sense=r.sense_keys[i.synsets[0].index]),a.categories){let e=a.categories;Object.keys(e).forEach(t=>{l["category_"+t]=e[t]})}e[t]=l}async function ea(e,t){return new Promise(n=>{let s=Object.freeze(Object.keys(e)),r=s.length,i=Array(r),a=0,l=0,o=()=>{for(;a<r&&l<1e3;a++,l++)ei(i,a,s[a],e,t);a!==r?(l=0,setTimeout(o,0)):n(i)};setTimeout(o,0)})}let el=(0,l.createContext)("default"),eo=(0,l.createContext)(e=>{}),ec=(0,l.createContext)({}),ed=(0,l.createContext)(e=>{}),ex=(0,l.createContext)({}),eu=(0,l.createContext)(e=>{}),eh=(0,l.createContext)([]),em=(0,l.createContext)(e=>{}),ep=(0,l.createContext)({edits:[],position:-1}),eg=(0,l.createContext)(e=>{}),ey=(0,l.createContext)(e=>{});function ej(e){let{children:t}=e,n=(0,l.useContext)(p),r=(0,l.useMemo)(M,[]),i=(0,l.useMemo)(()=>{let e={default:{}};return(r.dictionary_names||[]).forEach(t=>{e[t]=JSON.parse(localStorage.getItem("dict_"+t)||"{}")}),e},[r]),[a,o]=(0,l.useState)(r.selected||"default"),c=()=>JSON.parse(localStorage.getItem("dict_history_"+a)||'{"edits": [], "position": -1}'),d=e=>{if("replace"===e.type){u(e.history);return}let t="clear"===e.type?[]:[...x.edits],n="clear"===e.type?-1:x.position;"remove"===e.type?t.pop():"clear"!==e.type&&(n>-1&&(t.splice(0,n+1),n=-1),e.entry.time||(e.entry.time=Date.now()),t.splice(0,0,e.entry)),t.length>1e3&&t.splice(1e3,t.length-999),localStorage.setItem("dict_history_"+a,JSON.stringify({edits:t,position:n})),u({edits:t,position:n})},[x,u]=(0,l.useState)(c()),h=e=>{"delete"===e.type?(delete i[e.name],localStorage.removeItem("dict_"+e.name),localStorage.removeItem("dict_history_"+e.name),"default"===e.name&&(i.default={}),a===e.name&&(y("default"),f({type:"change_dict",dict:i.default}))):("set"!==e.type&&(i[e.name]=e.dict),a&&localStorage.setItem("dict_"+e.name,JSON.stringify(i[a])),"save"!==e.type&&(y(e.name),f({type:"change_dict",dict:i[e.name]})),localStorage.setItem("dict_"+e.name,JSON.stringify(i[e.name]))),r.dictionary_names=Object.keys(i),localStorage.setItem("dictionary_builder_settings",JSON.stringify(r))},[m,g]=(0,l.useReducer)((e,t)=>{switch(t.type){case"collect":let n=new Set(t.reset?[]:e);return Object.keys(t.dictionary).forEach(e=>{let s=t.dictionary[e];s&&s.categories&&Object.keys(s.categories).forEach(e=>n.add(e))}),Array.from(n).sort();case"add":return e.includes(t.cat)?[...e]:[...e,t.cat].sort();default:return e.filter(e=>e!==t.cat)}},[]),y=e=>{let t=e in i?e:"default";o(t),r.selected=t,localStorage.setItem("dictionary_builder_settings",JSON.stringify(r))},[j,f]=(0,l.useReducer)((e,t)=>{if("history_bulk"===t.type)return g({type:"collect",dictionary:t.dict,reset:!0}),h({type:"save",name:a,dict:t.dict}),t.dict;if("change_dict"===t.type)return d({type:"replace",history:c()}),g({type:"collect",dictionary:t.dict,reset:!0}),t.dict;let s={...e};if("remove_category"===t.type){let e={},n=0;Object.keys(s).forEach(r=>{let i=s[r];t.name in i.categories&&(n++,i.categories[t.name]&&(e[r]=i.categories[t.name]),delete i.categories[t.name])}),n&&d({type:"add",entry:{type:"remove_category",name:t.name,value:e}})}else if("add_category"===t.type)Object.keys(t.weights).forEach(e=>{e in s&&(s[e].categories[t.name]=t.weights[e])}),d({type:"add",entry:{type:"add_category",name:t.name,value:t.weights}});else{let r="string"==typeof t.term?t.term:t.term.source;if("remove"===t.type)delete s[r],d({type:"add",entry:{type:"remove_term",name:r,value:e[r]}});else{let i=er(r,n,s);!t.sense&&"fixed"===i.type&&1===i.synsets.length&&n.sense_keys&&(t.sense=n.sense_keys[i.synsets[0].index]);let a=s[r]||{};if(s[r]={added:a.added||Date.now(),type:a.type||i&&i.term_type||"fixed",categories:{...t.categories||a.categories||{}},sense:"sense"in t?t.sense||"":a.sense||""},"replace"===t.type){let n="string"==typeof t.originalTerm?t.originalTerm:t.originalTerm.source;delete s[n],d({type:"add",entry:{type:"replace_term",name:r,value:s[r],originalName:n,originalValue:e[n]}})}else if(r in e){let t;let n=e[r],i=s[r];if(i.type!==n.type)t={field:"type",new:i.type,original:n.type};else if(n.sense&&i.sense!==n.sense)t={field:"sense",new:i.sense,original:n.sense};else{let e=[];Object.keys(i.categories).forEach(t=>{i.categories[t]!==n.categories[t]&&e.push({category:t,from:n.categories[t]||0,to:i.categories[t]||0})}),Object.keys(n.categories).forEach(t=>{t in i.categories||e.push({category:t,from:n.categories[t],to:0})}),e.length?t={field:"categories",edits:e}:i.sense!==n.sense&&(t={field:"sense",new:i.sense,original:n.sense})}t&&d({type:"add",entry:{type:"edit_term",name:r,value:t}})}else d({type:"add",entry:{type:"add_term",name:r,value:s[r]}})}g({type:"collect",dictionary:s})}return h({type:"save",name:a,dict:s}),s},i.default);return(0,l.useEffect)(()=>{r.selected&&r.selected in i||(r.selected="default"),f({type:"change_dict",dict:i[r.selected]})},[r,i]),(0,s.jsx)(ep.Provider,{value:x,children:(0,s.jsx)(eg.Provider,{value:d,children:(0,s.jsx)(ec.Provider,{value:i,children:(0,s.jsx)(ed.Provider,{value:h,children:(0,s.jsx)(el.Provider,{value:a,children:(0,s.jsx)(ex.Provider,{value:j,children:(0,s.jsx)(eh.Provider,{value:m,children:(0,s.jsx)(eo.Provider,{value:e=>{y(e)},children:(0,s.jsx)(eu.Provider,{value:f,children:(0,s.jsx)(em.Provider,{value:g,children:(0,s.jsx)(ey.Provider,{value:e=>{let t={...j},n=c();(function(e,t,n){let s=t.position;if(e>t.position)for(s=Math.max(0,s);s<e+1;s++)t.edits[s]&&function(e,t){switch(e.type){case"add_term":delete t[e.name];return;case"remove_term":t[e.name]=e.value;return;case"replace_term":delete t[e.name],t[e.originalName]=e.originalValue;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.from?n.categories[e.category]=e.from:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.original;return;case"add_category":Object.keys(t).forEach(n=>{let s=t[n];Object.keys(s.categories).forEach(t=>{t in e.value&&delete s.categories[t]})});return;case"remove_category":Object.keys(t).forEach(n=>{n in e.value&&(t[n].categories[e.name]=e.value[n])});return}}(t.edits[s],n);else for(s=Math.min(t.edits.length-1,s);s>e;s--)t.edits[s]&&function(e,t){switch(e.type){case"add_term":t[e.name]=e.value;return;case"remove_term":delete t[e.name];return;case"replace_term":delete t[e.originalName],t[e.name]=e.value;return;case"edit_term":if("categories"===e.value.field){let n={...t[e.name]};e.value.edits.forEach(e=>{e.to?n.categories[e.category]=e.to:delete n.categories[e.category]})}else t[e.name][e.value.field]=e.value.new;return;case"add_category":Object.keys(t).forEach(n=>{n in e.value&&(t[n].categories[e.name]=e.value[n])});return;case"remove_category":Object.keys(e.value).forEach(n=>{let s=t[n];s&&s.categories&&e.name in s.categories&&delete s.categories[e.name]});return}}(t.edits[s],n);t.position=e})(Math.min(Math.max(-1,n.position+e),n.edits.length-1),n,t),d({type:"replace",history:n}),localStorage.setItem("dict_history_"+a,JSON.stringify(n)),f({type:"history_bulk",dict:t})},children:t})})})})})})})})})})})}var ef=n(8639),eZ=n(4309),ev=n(8276),eb=n(666),eC=n(9245),e_=n(5795),ew=n(3701),ek=n(6988),eS=n(4147),eE=n(9279),eO=n(7449),eN=n(8864),ez=n(5210);function eP(e){let{senseKey:t,info:n}=e,r=(0,l.useContext)(e0);return(0,s.jsx)(ev.Z,{title:n.definition,placement:"right",children:(0,s.jsx)(ez.Z,{underline:"none",sx:{p:0,justifyContent:"flex-start",cursor:"pointer",display:"block"},onClick:()=>r({type:"add",state:{type:"synset",value:t,info:n}}),children:t})})}function eF(e){let{name:t,info:n}=e,r=n[t],i=(0,l.useContext)(ex),a=(0,l.useContext)(eu),{terms:o,sense_keys:c,synsetInfo:d}=(0,l.useContext)(p);return o&&c&&d?(0,s.jsxs)(eC.Z,{sx:{m:1},children:[(0,s.jsx)(x.Z,{variant:"h5",children:t}),(0,s.jsx)(u.Z,{children:"string"==typeof r?r:"members"===t?o?Array.isArray(r)?r.map(e=>eU(o[e-1],i,a)):eU(o[r-1],i,a):(0,s.jsx)(s.Fragment,{}):Array.isArray(r)?r.map(e=>{let t=d[e-1];return(0,s.jsx)(eP,{senseKey:c[e-1],info:t},e)}):(0,s.jsx)(eP,{senseKey:c[r-1],info:d[r-1]})})]},t):(0,s.jsx)(s.Fragment,{})}let eI={id:0,index:0,ili:0,definition:0,topic:0},eM={a:"adj",r:"adv",s:"adj",n:"noun",v:"verb"};function eT(e){let{info:t}=e,{sense_keys:n}=(0,l.useContext)(p);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{variant:"h6",children:t.definition}),(0,s.jsxs)(d.Z,{direction:"row",spacing:2,children:[(0,s.jsxs)(eC.Z,{children:[(0,s.jsxs)(x.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Open English WordNet ID: ",(0,s.jsx)("span",{className:"number",children:t.id})]}),(0,s.jsxs)(x.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Sense Key: ",(0,s.jsx)("span",{className:"number",children:n&&n[t.index]})]}),(0,s.jsxs)(x.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Interlingual ID: ",(0,s.jsx)("span",{className:"number",children:t.ili})]})]}),(0,s.jsxs)(eC.Z,{children:[(0,s.jsxs)(x.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Part of Speech:"," ",(0,s.jsx)("span",{className:"number",children:eM[t.id.substring(t.id.length-1)]})]}),(0,s.jsxs)(x.Z,{component:"p",variant:"caption",sx:{ml:1},children:["Topic: ",(0,s.jsx)("span",{className:"number",children:t.topic})]})]})]}),(0,s.jsx)(d.Z,{direction:"row",sx:{mt:2},children:Object.keys(t).filter(e=>!(e in eI)).map(e=>(0,s.jsx)(eF,{name:e,info:t},e))})]})}let eD=/[aeiouy]$/;function eA(e,t){let n,s;let r=new Set;e=e.replace($,"\\$&");try{n=RegExp(";(?:anti|de|dis|central|en|ex|faux|hyper|il|ill|in|intra|inter|ir|meso|mal|mid|middle|mis|miss|non|over|pan|post|pre|pro|re|retro|sudo|sub|super|un|uber|under|ultra|trans)?-?(?:"+e+(e.length>(eD.test(e)?3:2)?"|"+e.replace(eD,"[aeiouy]"):"")+"|"+e+e.substring(e.length-1)+")-?(?:'|ac|age|al|alize|ant|ary|at|ate|ation|cracy|cy|cycle|d|dom|ed|er|es|esque|est|ette|ey|ful|hood|ial|ic|ie|ies|ify|in|ing|ion|ionate|isation|ish|ise|ism|ist|ive|ize|ization|let|lets|lette|like|ling|lings|log|ly|ley|ment|nce|ness|or|ous|r|s|ship|st|th|ties|ty|ur|ward|wise|y|z)?(?:'|ate|ation|d|ed|er|es|in|ing|ion|ise|isation|ish|ize|ization|ly|ness|ous|s|y|z)?\\;","g")}catch(e){}if(n)for(;s=n.exec(t);)s[0]&&";"+e+";"!==s[0]&&r.add(s[0].replace(B,""));return Array.from(r)}var eR=n(1600),eW=n(4351),eq=n(1885),eJ=n(4749),eL=n(2898),eK=n(3249);function e$(e){let{id:t,field:n,processed:r,label:i,labelId:a,editCell:o}=e,c=(0,l.useContext)(ex),d=(0,l.useContext)(eu),u=c[r.term].sense,{sense_keys:h}=(0,l.useContext)(p);return"fixed"===r.type&&r.synsets.length?(0,s.jsx)(ef.Z,{fullWidth:!0,size:"small","aria-label":"assign synset",value:u,onChange:e=>{o&&o({id:t,field:n,value:e.target.value}),d({type:"update",term:r.term,term_type:r.term_type,sense:e.target.value})},label:i,labelId:a,children:h&&r.synsets.map(e=>{let{index:t}=e;return(0,s.jsx)(eZ.Z,{value:h[t],children:(0,s.jsx)(ev.Z,{title:e.definition,placement:"right",children:(0,s.jsx)(x.Z,{sx:{width:"100%"},children:h[t]})})},t)})}):(0,s.jsx)(w.Z,{size:"small",value:u,onChange:e=>{o&&o({id:t,field:n,value:e.target.value}),d({type:"update",term:r.term,term_type:r.term_type,sense:e.target.value})},label:i})}let eB=["Match","Frequency","Senses","Related","In Dictionary"],eH={position:"absolute",fontSize:"1.5em",height:"1.2em",opacity:.4};function eY(e){let{processed:t}=e,n=(0,l.useContext)(ex),r=(0,l.useContext)(eu),i=(0,l.useContext)(p),[a,o]=(0,l.useState)(0),[c,d]=(0,l.useState)(5),[u,h]=(0,l.useState)({column:"Frequency",asc:!1}),m=(0,l.useMemo)(()=>[(0,s.jsx)(eb.Z,{width:1},"term_action"),...eB.map(e=>(0,s.jsxs)(eb.Z,{width:"Match"===e?999:1,component:"th",align:"Match"===e?"left":"right",sx:{cursor:"pointer",pr:3},onClick:()=>{h(u.column===e&&u.asc?{column:"Frequency",asc:!1}:{column:e,asc:u.column===e})},children:[e,u.column===e?u.asc?(0,s.jsx)(eR.Z,{sx:eH}):(0,s.jsx)(eW.Z,{sx:eH}):(0,s.jsx)(s.Fragment,{})]},e))],[h,u]),g=t.matches.length,y=(0,l.useMemo)(()=>t.matches.map(e=>{let t=er(e,i);return t.frequency=U(t.index,i.terms&&i.terms.length),t.in_dict=t.term in n,t}),[t,i,n]);if(a>g/c)return o(0),(0,s.jsx)(s.Fragment,{});y.sort(function(e){let{column:t,asc:n}=e;switch(t){case"Match":return n?(e,t)=>e.term>t.term?-1:1:(e,t)=>t.term>e.term?-1:1;case"Frequency":return n?(e,t)=>(e.frequency||0)-(t.frequency||0):(e,t)=>(t.frequency||0)-(e.frequency||0);case"Senses":return n?(e,t)=>e.synsets.length-t.synsets.length:(e,t)=>t.synsets.length-e.synsets.length;case"Related":return n?(e,t)=>e.related.length-t.related.length:(e,t)=>t.related.length-e.related.length;case"In Dictionary":return n?(e,t)=>(e.in_dict||0)>(t.in_dict||0)?-1:1:(e,t)=>(t.in_dict||0)>(e.in_dict||0)?-1:1}}(u));let j=[];if(g)for(let e=a*c,t=Math.min(y.length,e+c);e<t;e++)j.push(y[e]);if(!t.common_matches){let e="";t.matches.forEach(t=>{(!e||t.length<e.length)&&(e=t)}),t.common_matches=eA(e,";;"+t.matches.join(";;")+";;")}return(0,s.jsx)(eC.Z,{sx:{height:"100%",overflowY:"auto"},children:g?(0,s.jsxs)(e_.Z,{sx:{height:"100%"},children:[(0,s.jsxs)(ew.Z,{stickyHeader:!0,size:"small",sx:{width:"100%","& .MuiTableCell-root:first-of-type":{pl:1}},children:[(0,s.jsx)(ek.Z,{children:(0,s.jsx)(eS.Z,{children:m})}),(0,s.jsx)(eE.Z,{children:j.map((e,t)=>{let n=e.term;return(0,s.jsxs)(eS.Z,{sx:{height:33},hover:!0,children:[(0,s.jsx)(eb.Z,{sx:{p:0},children:e.in_dict?(0,s.jsx)(Z.Z,{"aria-label":"remove",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{r({type:"remove",term:n})},children:(0,s.jsx)(eq.Z,{})}):(0,s.jsx)(Z.Z,{"aria-label":"add",size:"small",edge:"start",sx:{p:0,opacity:.6},onClick:()=>{r({type:"add",term:n,term_type:"fixed"})},children:(0,s.jsx)(eJ.Z,{})})}),(0,s.jsx)(eb.Z,{children:(0,s.jsx)(eX,{term:n})}),(0,s.jsx)(eb.Z,{align:"right",children:e.frequency&&e.frequency.toFixed(2)||"0.00"}),(0,s.jsx)(eb.Z,{align:"right",children:e.synsets.length}),(0,s.jsx)(eb.Z,{align:"right",children:e.related.length}),(0,s.jsx)(eb.Z,{align:"right",children:e.in_dict?"yes":"no"})]},n+t)})})]}),(0,s.jsx)(eO.Z,{component:"div",rowsPerPageOptions:[5,10,50,100,1e3],count:g,rowsPerPage:c,page:a,onPageChange:(e,t)=>{o(t)},onRowsPerPageChange:e=>{d(parseInt(e.target.value)),o(0)}})]}):(0,s.jsx)(x.Z,{children:"No matches"})})}let eV={minWidth:"20px",opacity:.8,"& .MuiSvgIcon-root":{fontSize:"1em"}};function eU(e,t,n){let r=e in en?en[e]:"",i=e in t;return(0,s.jsxs)(h.ZP,{disableGutters:!0,disablePadding:!0,sx:{pr:3},secondaryAction:i?(0,s.jsx)(Z.Z,{"aria-label":"remove",size:"small",edge:"end",sx:eV,onClick:()=>{n({type:"remove",term:e})},children:(0,s.jsx)(eq.Z,{})}):(0,s.jsx)(Z.Z,{"aria-label":"add",size:"small",edge:"end",sx:eV,onClick:()=>{n({type:"add",term:e,term_type:"fixed"})},children:(0,s.jsx)(eJ.Z,{})}),children:[(0,s.jsx)(eN.Z,{sx:eV,children:i?(0,s.jsx)(ev.Z,{title:"in current dictionary",placement:"left",children:(0,s.jsx)(eL.Z,{color:"success"})}):r&&r in t?(0,s.jsx)(ev.Z,{title:"captured by "+r+" in current dictionary",placement:"left",children:(0,s.jsx)(eK.Z,{color:"secondary"})}):(0,s.jsx)(s.Fragment,{})}),(0,s.jsx)(eX,{term:e})]},e)}function eG(e){let{processed:t}=e,n={p:1,pl:0,maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},r=(0,l.useContext)(ex),i=(0,l.useContext)(eu),{terms:a,collapsedTerms:o,sense_keys:c}=(0,l.useContext)(p);return t.forms||(t.forms=eA(t.term,o?o.all:""),t.forms.sort(V)),(0,s.jsxs)(d.Z,{direction:"row",spacing:4,sx:{height:"100%"},children:[(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(ev.Z,{title:"100 - index / n terms * 100; terms are losely sorted by frequency and space coverage",children:(0,s.jsx)(x.Z,{children:"Relative Frequency"})}),(0,s.jsx)(eC.Z,{sx:{p:1},children:(0,s.jsx)("span",{className:"number",children:U(t.index,a&&a.length).toFixed(2)})})]}),t.forms.length?(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{children:"Expanded Forms"}),(0,s.jsx)(eC.Z,{sx:n,children:(0,s.jsx)(u.Z,{disablePadding:!0,sx:{p:0},children:t.forms.map(e=>eU(e,r,i))})})]}):(0,s.jsx)(s.Fragment,{}),t.related.length?(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{children:"Related Terms"}),(0,s.jsx)(eC.Z,{sx:n,children:(0,s.jsx)(u.Z,{disablePadding:!0,sx:{p:0},children:t.related.map(e=>eU(e,r,i))})})]}):(0,s.jsx)(s.Fragment,{}),c&&t.synsets.length?(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{children:"Senses"}),(0,s.jsx)(eC.Z,{sx:n,children:(0,s.jsx)(u.Z,{sx:{p:0},children:t.synsets.map(e=>(0,s.jsx)(h.ZP,{disablePadding:!0,children:(0,s.jsx)(eP,{senseKey:c[e.index],info:e})},e.index))})})]}):(0,s.jsx)(s.Fragment,{})]})}function eX(e){let{term:t}=e,n=(0,l.useContext)(e0);return(0,s.jsx)(S.Z,{fullWidth:!0,variant:"text",sx:{p:0,justifyContent:"flex-start",textTransform:"none"},onClick:()=>n({type:"add",state:{type:"term",value:t}}),children:t})}function eQ(e){let{term:t}=e,n=er(t,(0,l.useContext)(p));return"fixed"===n.type?(0,s.jsx)(eG,{processed:n}):(0,s.jsx)(eY,{processed:n})}let e0=(0,l.createContext)(e=>{});function e1(e){let{term:t}=e,n=(0,l.useContext)(ex),r=(0,l.useContext)(eu),i=t in n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{sx:{overflowY:"auto",pb:0,pt:0},children:(0,s.jsx)(eQ,{term:t})}),(0,s.jsx)(k.Z,{sx:{justifyContent:"flex-end",mt:"auto"},children:(0,s.jsx)(S.Z,{onClick:()=>{r(i?{type:"remove",term:t}:{type:"add",term:t,term_type:"fixed"})},children:i?"Remove":"Add"})})]})}function e2(e){let{info:t}=e;return(0,s.jsx)(_.Z,{sx:{overflowY:"auto",mb:"auto",pt:0},children:(0,s.jsx)(eT,{info:t})})}function e3(e){let{state:t,edit:n}=e;if(!t.length)return;let r=()=>n({type:"reset"}),i=t[0];return(0,s.jsx)(v.ZP,{open:""!==i.value,onClose:r,variant:"permanent",hideBackdrop:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{height:F,display:"flex",flexDirection:"column",justifyContent:"space-between"}},children:(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(C.Z,{action:(0,s.jsx)(Z.Z,{"aria-label":"Close info drawer",onClick:r,className:"close-button",children:(0,s.jsx)(f.Z,{})}),title:(0,s.jsxs)(d.Z,{direction:"row",children:[t.length>1?(0,s.jsx)(S.Z,{onClick:()=>n({type:"back"}),sx:{opacity:.7},children:t[1].value}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(x.Z,{variant:"h4",children:i.value})]})}),"term"===i.type?(0,s.jsx)(e1,{term:i.value}):(0,s.jsx)(e2,{info:i.info})]})})}var e5=n(8938),e4=n(9350),e8=n(1664),e9=n(9540),e6=n(880),e7=n(6500),te=n(4989),tt=n(9742),tn=n(4081),ts=n(2510),tr=n(5843),ti=n(1101),ta=n(4172);function tl(e){let{setName:t,setContent:n}=e,r=(0,l.useContext)(ec),i=Object.keys((0,l.useContext)(ec)),[a,o]=(0,l.useState)(!1),c=()=>o(!a);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev.Z,{title:"select an existing dictionary to import as a copy",children:(0,s.jsx)(S.Z,{variant:"outlined",onClick:c,children:"Copy"})}),a&&(0,s.jsxs)(E.Z,{open:a,onClose:c,children:[(0,s.jsx)(O.Z,{children:"Copy Dictionary"}),(0,s.jsx)(Z.Z,{"aria-label":"close export menu",onClick:c,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:0},children:(0,s.jsx)(u.Z,{sx:{p:0,pb:2},children:i.map(e=>(0,s.jsx)(h.ZP,{sx:{p:0},children:(0,s.jsx)(D.Z,{onClick:()=>{t(e+" Copy" in r?e+" Copy"+(1e4*Math.random()>>0):e+" Copy"),n(JSON.stringify(r[e],void 0,2)),c()},children:e})},e))})})]})]})}let to=(0,tr.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),tc=/\\t/,td=/^\s+|\s+$/g,tx=/^["\s]+|["\s]+$/g,tu=/\t+/g;function th(e,t){return{added:Date.now(),type:"fixed",categories:e,sense:t||""}}function tm(){let e=(0,ti.Z)(),t=(0,l.useContext)(ed),[n,r]=(0,l.useState)(""),[i,a]=(0,l.useState)(!1),o=()=>a(!i),[c,x]=(0,l.useState)(""),u=()=>{r(""),x("")},h=()=>{n&&(t({type:"add",name:n,dict:function(e){let t={};if(e)try{if("%"===e[0]){let n=e.split("\n"),s={},r=n.length;if(r>1){let e=1;for(e=1;e<r;e++){let t=n[e].replace(td,"");if("%"===t)break;let r=t.split(tu);r.length>1&&r[1]&&(s[r[0]]=r[1])}for(e++;e<r;e++){let r=n[e].replace(td,"").split(tu);if(r.length>1){let e=r.splice(0,1)[0].toLowerCase();if(e){let n={};r.forEach(e=>{e in s&&(n[s[e]]=1)}),t[e]=th(n)}}}}}else if("{"===e[0]){let n=JSON.parse(e),s=Object.keys(n);if(s.length&&"type"in n[s[0]]&&"string"==typeof n[s[0]].type)return n;s.forEach(e=>{if(e){let s=n[e];Array.isArray(s)?s.forEach(n=>{(n=n.toLowerCase())&&(n in t?t[n].categories[e]=1:t[n]=th({[e]:1}))}):Object.keys(s).forEach(n=>{(n=n.toLowerCase())&&(n in t?t[n].categories[e]=s[n]:t[n]=th({[e]:s[n]}))})}})}else{let n=e.split("\n"),s=tc.test(n[0])?"\\t":",",r=n.splice(0,1)[0].split(s).map(e=>e.replace(tx,""));r.splice(0,1),n.forEach(e=>{let n=e.split(s),i=n.splice(0,1)[0].toLowerCase().replace(tx,"");if(i){let e={};n.forEach((t,n)=>{t&&r[n]&&(e[r[n]]=+t)}),t[i]=th(e)}})}}catch(e){}return t}(c)}),u(),o())};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{variant:"contained",onClick:o,children:"New"}),(0,s.jsxs)(E.Z,{open:i,onClose:o,onDrop:e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){let t=e.dataTransfer.files[0],s=new FileReader;s.onload=()=>{n||r(ee(t.name)),x(s.result)},s.readAsText(t)}},children:[(0,s.jsx)(O.Z,{children:"Add Dictionary"}),(0,s.jsx)(Z.Z,{"aria-label":"close import menu",onClick:o,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(d.Z,{spacing:1,children:[(0,s.jsx)(w.Z,{size:"small",label:"Name",value:n,onKeyDown:e=>{n&&"Enter"===e.code&&h()},onChange:e=>{r(e.target.value)}}),(0,s.jsxs)(tn.Z,{children:[(0,s.jsx)(ta.Z,{sx:{fontSize:".8em"},htmlFor:"import_content",children:"Import Content"}),(0,s.jsx)("textarea",{id:"import_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:c?"pre":"normal",minWidth:"30em",minHeight:"20em"},value:c,onChange:e=>{x(e.target.value)},placeholder:"drag and drop a file, or enter content directly; see export menu for format examples"})]})]})}),(0,s.jsxs)(z.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(d.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(tl,{setName:r,setContent:x}),(0,s.jsx)(ev.Z,{title:"select a file to import a dictionary from",children:(0,s.jsxs)(S.Z,{variant:"outlined",component:"label",children:["File",(0,s.jsx)(to,{type:"file",onChange:e=>{if(e.target.files&&e.target.files.length){let t=e.target.files[0],s=new FileReader;s.onload=()=>{n||r(ee(t.name)),x(s.result)},s.readAsText(t)}}})]})}),(0,s.jsx)(ev.Z,{title:"clear current content",children:(0,s.jsx)(S.Z,{onClick:u,children:"clear"})})]}),(0,s.jsx)(S.Z,{variant:"contained",onClick:h,children:"Add"})]})]})]})}function tp(){let e=(0,ti.Z)(),t=(0,l.useContext)(el),n=(0,l.useContext)(ec)[t],[r,i]=(0,l.useState)(!1),a=()=>i(!r),[o,c]=(0,l.useState)("dic"),[x,u]=(0,l.useState)("csv"),[h,m]=(0,l.useState)(t),[p,g]=(0,l.useState)("unweighted"),y=(0,l.useMemo)(()=>r?function(e,t,n,s){switch(t){case"tabular":let r=function(e){switch(e){case"csv":return",";case"tsv":return"	";default:return" "}}(n),i=Object.keys(e),a=new Set;i.forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>a.add(e))});let l=Array.from(a),o=new Map(l.map((e,t)=>[t,e]));return'"term"'+r+'"'+l.join('"'+r+'"')+'"\n'+i.map(t=>{let n=e[t].categories,s='"'+t+'"';return o.forEach(e=>{s+=r+(e in n?n[e]:"")}),s}).join("\n");case"dic":let c={},d=0,x="";return Object.keys(e).forEach(t=>{let n=e[t].categories;if(n){let e=[t];Object.keys(n).forEach(t=>{t in c||(c[t]=++d),e.push(c[t])}),x+="\n"+e.join("	")}}),"%\n"+Object.keys(c).map(e=>c[e]+"	"+e).join("\n")+"\n%"+x;case"json":if("full"===s)return JSON.stringify(e,void 0,2);let u={};if(Object.keys(e).forEach(t=>{let n=e[t].categories;n&&Object.keys(n).forEach(e=>{e in u||(u[e]={}),u[e][t]=n[e]})}),"weighted"===s)return JSON.stringify(u,void 0,2);let h={};return Object.keys(u).forEach(e=>{h[e]=Object.keys(u[e])}),JSON.stringify(h,void 0,2);default:return""}}(n,o,x,p):"",[r,n,o,x,p]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{variant:"contained",onClick:a,children:"Export"}),r&&(0,s.jsxs)(E.Z,{open:r,onClose:a,children:[(0,s.jsx)(O.Z,{children:"Export Dictionary"}),(0,s.jsx)(Z.Z,{"aria-label":"close export menu",onClick:a,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,s.jsx)(f.Z,{})}),(0,s.jsx)(N.Z,{sx:{p:1},children:(0,s.jsxs)(d.Z,{spacing:1,children:[(0,s.jsx)(w.Z,{size:"small",label:"Filename",value:h,onChange:e=>{m(e.target.value)}}),(0,s.jsxs)(tn.Z,{children:[(0,s.jsx)(ta.Z,{sx:{fontSize:".8em"},htmlFor:"export_content",children:"Export Content"}),(0,s.jsx)("textarea",{id:"export_content",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,whiteSpace:"pre",minWidth:"30em",minHeight:"20em"},value:y,onChange:()=>{}})]})]})}),(0,s.jsxs)(z.Z,{sx:{justifyContent:"space-between"},children:[(0,s.jsxs)(d.Z,{direction:"row",spacing:1,children:[(0,s.jsxs)(tn.Z,{children:[(0,s.jsx)(ts.Z,{id:"export_format",children:"Format"}),(0,s.jsxs)(ef.Z,{labelId:"export_format",label:"Format",size:"small",value:o,onChange:e=>{c(e.target.value)},children:[(0,s.jsx)(eZ.Z,{value:"dic",children:"DIC"}),(0,s.jsx)(eZ.Z,{value:"json",children:"JSON"}),(0,s.jsx)(eZ.Z,{value:"tabular",children:"Tabular"})]})]}),"tabular"===o?(0,s.jsxs)(tn.Z,{children:[(0,s.jsx)(ts.Z,{id:"export_separator",children:"Type"}),(0,s.jsxs)(ef.Z,{labelId:"export_separator",label:"Type",size:"small",value:x,onChange:e=>{u(e.target.value)},children:[(0,s.jsx)(eZ.Z,{value:"csv",children:"CSV"}),(0,s.jsx)(eZ.Z,{value:"tsv",children:"TSV"}),(0,s.jsx)(eZ.Z,{value:"dat",children:"DAT"})]})]}):(0,s.jsx)(s.Fragment,{})," ","json"===o?(0,s.jsxs)(tn.Z,{children:[(0,s.jsx)(ts.Z,{id:"export_json_type",children:"Type"}),(0,s.jsxs)(ef.Z,{labelId:"export_json_type",label:"Type",size:"small",value:p,onChange:e=>{g(e.target.value)},children:[(0,s.jsx)(eZ.Z,{value:"weighted",children:"Weighted"}),(0,s.jsx)(eZ.Z,{value:"unweighted",children:"Unweighted"}),(0,s.jsx)(eZ.Z,{value:"full",children:"Full"})]})]}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsx)(S.Z,{variant:"contained",onClick:()=>{if(h&&y){let e=document.createElement("a");e.setAttribute("href",URL.createObjectURL(new Blob([y],{type:"text/plain"}))),e.setAttribute("download",h+"."+("tabular"===o?x:o)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"Download"})]})]})]})}function tg(){let[e,t]=(0,l.useState)(!1),n=()=>t(!e),r=(0,l.useContext)(ec),i=(0,l.useContext)(ed),a=(0,l.useContext)(el),o=Object.keys(r),c=(0,l.useContext)(eh),m=(0,l.useContext)(em),p=(0,l.useContext)(eu),[g,y]=(0,l.useState)(""),j=()=>{g&&-1===c.indexOf(g)&&(m({type:"add",cat:g}),y(""))},E=(0,l.useMemo)(()=>c.map(e=>(0,s.jsxs)(h.ZP,{sx:{p:0},children:[(0,s.jsx)(A.Z,{primary:e}),(0,s.jsx)(Z.Z,{"aria-label":"delete category",sx:{opacity:.5},onClick:()=>{p({type:"remove_category",name:e}),m({type:"remove",cat:e})},children:(0,s.jsx)(e8.Z,{})})]},e)),[c,p,m]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{variant:"text",sx:{fontWeight:"bold"},onClick:n,children:a}),(0,s.jsx)(v.ZP,{anchor:"left",open:e,onClose:n,children:(0,s.jsxs)(b.Z,{sx:{height:"100%",width:"20em",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsx)(C.Z,{title:(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Dictionary Menu"}),action:(0,s.jsx)(Z.Z,{onClick:n,"aria-label":"close dictionary menu",className:"close-button",children:(0,s.jsx)(f.Z,{})})}),(0,s.jsxs)(d.Z,{direction:"row",sx:{mb:2},children:[(0,s.jsxs)(tn.Z,{fullWidth:!0,children:[(0,s.jsx)(ts.Z,{id:"dictionary_select",children:"Current"}),(0,s.jsx)(ef.Z,{labelId:"dictionary_select",label:"Current",size:"small",value:a,onChange:e=>{i({type:"set",name:e.target.value,dict:r[e.target.value]})},children:o.map(e=>(0,s.jsx)(eZ.Z,{value:e,children:e},e))})]}),(0,s.jsx)(tm,{})]}),(0,s.jsx)(_.Z,{sx:{alignContent:"left",mb:"auto",pt:0,pb:1,height:"100%",overflow:"hidden"},children:(0,s.jsxs)(d.Z,{spacing:1,sx:{height:"100%",overflowY:"auto"},children:[(0,s.jsxs)(b.Z,{elevation:5,sx:{height:"40%",minHeight:"300px",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(C.Z,{title:(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Categories"}),sx:{pb:0}}),(0,s.jsx)(_.Z,{sx:{pt:0,pb:0,mb:"auto",overflowY:"auto"},children:(0,s.jsx)(u.Z,{children:E})}),(0,s.jsx)(k.Z,{children:(0,s.jsxs)(d.Z,{direction:"row",children:[(0,s.jsx)(w.Z,{label:"New Category Name",size:"small",value:g,onKeyDown:e=>{"Enter"===e.code&&j()},onChange:e=>{y(e.target.value)}}),(0,s.jsx)(S.Z,{onClick:j,children:"Add"})]})})]}),(0,s.jsx)(J,{})]})}),(0,s.jsx)(k.Z,{children:(0,s.jsxs)(d.Z,{direction:"column",sx:{width:"100%"},spacing:1,children:[(0,s.jsx)(tp,{}),(0,s.jsx)(P,{label:"Delete",message:"Delete the "+a+" dictionary?",onConfirm:()=>{i({type:"delete",name:a})}})]})})]})})]})}function ty(e){let{terms:t,exists:n,add:r}=e,[i,a]=(0,l.useState)(""),[o,c]=(0,l.useState)(!1),[x,u]=(0,l.useState)([]),[m,g]=(0,l.useState)(!1),y=(0,l.useContext)(e0),{collapsedTerms:j}=(0,l.useContext)(p),f=e=>{let t=e?"string"==typeof e?e:"innerText"in e.target?e.target.innerText:i:i;if(t&&!n(t)){if(m){let e=t;try{e=new RegExp(e)}catch(e){}r(e,"regex")}else r(t,"fixed");u([]),a("")}},v=e=>{let t=e.target;if(t&&"value"in t){let e=t.value.toLowerCase();c(n(e)),a(e)}};return(0,s.jsx)(e7.Z,{component:"nav",children:(0,s.jsxs)(te.Z,{variant:"dense",sx:{justifyContent:"space-between"},disableGutters:!0,children:[(0,s.jsx)(tg,{}),(0,s.jsxs)(d.Z,{direction:"row",sx:{width:"calc(min(500px, 50%))"},spacing:1,children:[(0,s.jsx)(tt.Z,{options:x,value:i,onKeyUp:e=>{let n="value"in e.target?e.target.value:"";if("Enter"===e.code&&(!n||n===i))return f(i);if(n!==i&&v(e),t){let e=[];if(i&&j){let t;try{t=RegExp(m?X(i):K.test(i)?Y(i):";"+i+"[^;]*;","g")}catch(e){t=RegExp(";"+i.replace($,"\\%&")+";","g")}es("",t,j,e,100)}u(e)}},onChange:v,renderOption:(e,t)=>(0,l.createElement)(h.ZP,{...e,key:t,onClick:f},t),renderInput:e=>(0,s.jsx)(w.Z,{...e,size:"small",placeholder:"Term to add",value:i,onChange:v,error:o}),filterOptions:e=>e,selectOnFocus:!0,clearOnBlur:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,freeSolo:!0}),(0,s.jsx)(ev.Z,{title:"regular expression characters are "+(m?"active":"escaped"),children:(0,s.jsx)(Z.Z,{"aria-label":"toggle regular expression",onClick:()=>g(!m),children:m?(0,s.jsx)(e9.Z,{}):(0,s.jsx)(e6.Z,{})})}),(0,s.jsx)(S.Z,{variant:"outlined",disabled:!i,onClick:()=>{i&&y({type:"add",state:{type:"term",value:i}})},children:"View"}),(0,s.jsx)(S.Z,{variant:"contained",onClick:()=>f(),disabled:!i||o,children:"Add"})]}),(0,s.jsx)(T,{})]})})}var tj=n(678),tf=n(2750),tZ=n(182),tv=n(8444);function tb(e){let{term:t,close:n,categories:r,editor:i,bottomMargin:a}=e,o=(0,l.useContext)(p),c=(0,l.useContext)(ex),[u,h]=(0,l.useState)(!1);if(!t||!(t in c))return(0,s.jsx)(s.Fragment,{});let m=er(t,o,c),g=c[t],y=g.categories,j=[];return r.forEach(e=>{(u||e in y)&&j.push({id:e,from_term_editor:y[e]||"",dictEntry:g,processed:m})}),(0,s.jsx)(eC.Z,{sx:{position:"absolute",top:0,bottom:0,right:0,width:I,mt:"3em",mb:a},children:(0,s.jsxs)(b.Z,{sx:{height:"100%",pb:"2.5em"},elevation:1,children:[(0,s.jsx)(C.Z,{action:(0,s.jsx)(Z.Z,{"aria-label":"Close term editor",onClick:()=>n(""),className:"close-button",children:(0,s.jsx)(f.Z,{})}),title:(0,s.jsx)(x.Z,{fontWeight:"bold",sx:{whiteSpace:"nowrap"},children:(0,s.jsx)(eX,{term:m.term})})}),(0,s.jsx)(_.Z,{sx:{p:.5,height:"100%"},children:(0,s.jsxs)(d.Z,{direction:"column",sx:{height:"100%"},children:[(0,s.jsxs)(tn.Z,{sx:{mb:3},children:["fuzzy"!==m.type&&m.synsets.length?(0,s.jsx)(ts.Z,{sx:{mt:g.sense?"":"-7px"},id:"term_editor_sense",children:"Sense"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(e$,{labelId:"term_editor_sense",label:"Sense",id:"",field:"",processed:m})]}),(0,s.jsxs)(d.Z,{direction:"column",spacing:1,sx:{height:"100%"},children:[(0,s.jsx)(x.Z,{fontWeight:"bold",children:"Category Weights"}),(0,s.jsx)(tZ.Z,{sx:{width:"100%"},control:(0,s.jsx)(tv.Z,{size:"small",checked:u,onChange:()=>h(!u)}),label:(0,s.jsx)(x.Z,{variant:"caption",children:"Show Empty"}),labelPlacement:"start"}),(0,s.jsx)(tj._$,{sx:{"& .MuiToolbar-root":{p:0},"& .MuiDataGrid-main":{height:0},"& .MuiTablePagination-displayedRows":{m:0},"& .MuiTablePagination-actions":{m:0}},rows:j,columns:[{field:"id",headerName:"Name",width:110},{field:"from_term_editor",headerName:"Weight",width:65,editable:!0,hideable:!1,valueParser:(e,t)=>{let n=+e||"";return t&&i(n,t),n}}],disableRowSelectionOnClick:!0,disableDensitySelector:!0,disableColumnMenu:!0,pageSizeOptions:[100],density:"compact",onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&i(0,e)}})]})]})})]})})}function tC(e,t){return t.dictEntry.added-e.dictEntry.added}let t_=/^category_/;function tw(e){let{drawerOpen:t}=e,n=(0,l.useContext)(p),r=(0,l.useContext)(ex),i=(0,l.useContext)(eh),a=(0,l.useContext)(eu),o=(0,l.useMemo)(()=>Object.freeze(Object.keys(r).sort()),[r]),c=(0,l.useCallback)((e,t)=>{let{field:n,row:s}=t,{processed:r,dictEntry:i}=s;if(n&&("from_term_editor"===n||n.startsWith("category_"))){let t={...i.categories},l="from_term_editor"===n?s.id:n.replace(t_,"");l in t&&!e?delete t[l]:e&&(t[l]=e),a({type:"update",term:r.term,term_type:r.term_type,categories:t})}},[a]),u=(0,l.useMemo)(()=>{let e=[{field:"remove",headerName:"",width:1,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsx)(Z.Z,{sx:{opacity:.4,cursor:"not-allowed"},size:"small","aria-label":"remove term",onClick:()=>{a({type:"remove",term:e.id})},children:(0,s.jsx)(e8.Z,{sx:{fontSize:".9em"}})})},{field:"id",headerName:"Term",renderCell:e=>(0,s.jsx)(eX,{term:e.value})},{field:"sense",headerName:"Sense",editable:!0,renderEditCell:e=>(0,s.jsx)(e$,{id:e.id,field:e.field,processed:e.row.processed,editCell:e.api.setEditCellValue})},{field:"frequency",headerName:"Frequency"},{field:"matches",headerName:"Matches"},{field:"senses",headerName:"Senses"},{field:"related",headerName:"Related"}];return i.forEach(t=>e.push({field:"category_"+t,headerName:t,editable:!0,valueParser:(e,t)=>{let n=+e||"";return t&&c(n,t),n}})),e},[i,a,c]),[h,g]=(0,l.useState)([]);(0,l.useEffect)(()=>{n.termAssociations&&n.synsetInfo&&ea(r,n).then(e=>{g(e.sort(tC))})},[r,n]);let y=(0,l.useMemo)(()=>{if(o.length<1e3)return!1;let e=h.map(e=>{let{id:t}=e;return t}).sort();return!(2>Math.abs(e.length-o.length))&&e.join()!==o.join()},[h,o]),j=t?F:0,[f,v]=(0,l.useState)("");return!f||f in r||v(""),(0,s.jsxs)(e5.Z,{children:[(0,s.jsx)(ty,{terms:n.terms,exists:e=>e in r,add:(e,t)=>{a({type:"add",term:e,term_type:t})}}),(0,s.jsx)(tb,{term:f,close:v,categories:i,editor:c,bottomMargin:j}),(0,s.jsx)(eC.Z,{component:"main",sx:{position:"absolute",top:0,right:f?I:0,bottom:0,left:0,overflowY:"auto",mt:"3em",mb:j},children:o.length?y?(0,s.jsx)(e4.Z,{open:y,children:(0,s.jsxs)(d.Z,{direction:"column",children:[(0,s.jsx)(x.Z,{variant:"h4",sx:{mb:4},children:"Processing Dictionary"}),(0,s.jsx)(m.Z,{sx:{m:"auto"}})]})}):(0,s.jsx)(tj._$,{rows:h,columns:u,showCellVerticalBorder:!0,disableDensitySelector:!0,pageSizeOptions:[100],density:"compact",slots:{toolbar:tf.T},onCellKeyDown:(e,t)=>{("Delete"===t.key||"Backspace"===t.key)&&c(0,e)},onRowClick:e=>{let{row:t}=e;v(t.id)}}):(0,s.jsx)(x.Z,{align:"center",children:"Add terms, or import an existing dictionary."})})]})}let tk=(0,r.Z)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}}),tS=(e,t)=>{switch(t.type){case"add":return e.length&&e[0].value===t.state.value?[...e]:[t.state,...e];case"back":return[...e].splice(1,e.length);default:return[]}};function tE(){let[e,t]=(0,l.useReducer)(tS,[]);return(0,s.jsx)(l.StrictMode,{children:(0,s.jsxs)(i.Z,{theme:tk,children:[(0,s.jsx)(a.ZP,{}),(0,s.jsx)(y,{children:(0,s.jsx)(ej,{children:(0,s.jsxs)(e0.Provider,{value:t,children:[(0,s.jsx)(tw,{drawerOpen:!!e.length}),(0,s.jsx)(e3,{state:e,edit:t})]})})})]})})}}},function(e){e.O(0,[23,971,938,744],function(){return e(e.s=69)}),_N_E=e.O()}]);